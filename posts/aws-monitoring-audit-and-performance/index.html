<!doctype html>














<!-- `site.alt_lang` can specify a language different from the UI -->
<html lang="en-US" >
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta
    name="viewport"
    content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover"
  ><!-- Setup Open Graph image -->

  

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="AWS Monitoring, Audit, and Performance" />
<meta name="author" content="Hardwork đẹp trai" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="AWS Monitoring, Audit and Performance AWS CloudWatch Metrics Cloudwatch provides metrics for every services in AWS Metric is a variable to monitor (CPUUtilization, NetworkIn…) Metrics belong to namespaces Dimension is an attribute of a metric (instance id, environment, etc…) Up to 10 dimensions per metric Metrics have timestamps Can create CloudWatch dashboards of metrics EC2 Detailed monitoring EC2 instance metrics have metrics “every 5 minutes” With detailed monitoring (for a cost), you get data “every 1 minute” Use detailed monitoring if you want to scale faster for you ASG! The AWS tier allows us to have 10 detailed monitoring metrics Note: EC2 Memory usage is by default not pushed (must be pushed from inside the instance as a custom metric) CloudWatch Custom Metrics Possibility to define and send your own custom metrics to CloudWatch Example: memory (RAM) usage, disk space, number of logged in users … Use API call PutMetricData Ability to use dimensions (attributes) to segment metrics Instance.id Environment.name Metric resolution (StorageResolution API parameter - two possible value): Standard: 1 minute (60 seconds) High Resolution: 1/5/10/30 second(s) - Highr cost Important: Accepts metric data points two weeks in the past and two hours in the future (make sure to configure your EC@ instance time corectly) CloudWatch Dashboards Great way to setup custom dashboards for quick access to key metrics and alarms Dashboards are global Dashboards can include graphs from different AWS accounts and regions You can change the time zone &amp; time range of dashboards You can setup automatic refresh (10s, 1m, 2m, 5m, 15m) Dashboards can be shared with people who don’t have an AWS account (public, email address, 3rd party SSO provider through Amazon Cognito) Pricing 3 dashboards (up to 50metrics) for free $3/dashboard/month afterwards CloudWatch Logs Log groups: arbitrary name, usually representing an application Log stream: instances within application / log files / containers Can define log expiration policies (never expire, 30 days, etc..) CloudWatch Logs can send logs to: Amazon S3 (exports) Kinesis Data Streams Kinesis Data Firehose AWS Lambda ElasticSearch CloudWatch Logs - Sources SDK, CloudWatch Logs Agent, CloudWatch Unified Agent Elastic Beanstalk: collection of logs from application ECS: collection from containers AWS Lambda: collection from function logs VPC Flow Logs: VPC specific logs API Gateway CloudTrail based on filter Route53: Log DNS queries CloudWatch Logs Metric Filter &amp; Insights CloudWatch Logs can use filter expressions For example, find a specific IP inside of a log Or count occurrences of “ERROR” in your logs Metric filters can be used to triggr CloudWatch alarms Cloudwatch Logs Insights can be used to query logs and add queries to CloudWatch Dashboards CloudWatch Logs – S3 Export Log data can take up to 12 hours to become available for export The API call is CreateExportTask Not near-real time or real-time… use Logs Subscriptions instead CloudWatch Logs Subscriptions CloudWatch Logs Aggregation Multi-Account &amp; Multi Region CloudWatch Logs for EC2 By default, no logs from your EC2 machine will go to CloudWatch You need to run a CloudWatch agent on EC2 to push the log files you want Make sure IAM permissions are correct The CloudWatch log agent can be setup on premises too CloudWatch Logs Agent &amp; Unified Agent For virtual servers (EC2 instances, on-premises servers…) CloudWatch Logs Agent Old version of the agent Can only send to CloudWatch Logs CloudWatch Unified Agent Collect additional system-level metrics such as RAM, processes, etc… Collect logs to send to CloudWatch Logs Centralized configuration using SSM Parameter Store CloudWatch Unified Agent – Metrics Collected directly on your Linux server / EC2 instance CPU (active, guest, idle, system, user, steal) Disk metrics (free, used, total), Disk IO (writes, reads, bytes, iops) RAM (free, inactive, used, total, cached) Netstat (number of TCP and UDP connections, net packets, bytes) Processes (total, dead, bloqued, idle, running, sleep) Swap Space (free, used, used %) Reminder: out-of-the box metrics for EC2 – disk, CPU, network (high level) CloudWatch Alarms Alarms are used to trigger notifications for any metric Various options (sampling, %, max, min, etc…) Alarm States: OK INSUFFICIENT_DATA ALARM Period: Length of time in seconds to evaluate the metric High resolution custom metrics: 10 sec, 30 sec or multiples of 60 sec CloudWatch Alarm Targets Stop, Terminate, Reboot, or Recover an EC2 Instance Trigger Auto Scaling Action Send notification to SNS (from which you can do pretty much anything) EC2 Instance Recovery Status Check: Instance status = check the EC2 VM System status = check the underlying hardware Recovery: Same Private, Public, Elastic IP, metadata, placement group CloudWatch Events Event pattern: Interceot events from AWS services (Sources) Example sources: EC2 instance start, CodeBuild Failre, S3, Trusted Advisor Can intercept any API call with CloudTrai integration Schedule or Cron (example: create an event every 4 hours) A JSON payload is created from the event and passed to a target… Compute: Lambda, Batch, ECS task Integration: SQS, SNS, Kinesis Data Streams, Kinesis Data Firehose Orchestration: Step functions, CodePipeline, CodeBuild Maintenance: SSM, EC2 Actions Amazon EventBridge EventBridge is the next evolution of CloudWatch Events Default Event Bus - generated by AWS services (CloudWatch Events) Partner Event Bus: receive events from SaaS service or applications (Zendesk, DataDog, Segment, Auth0…) Custom Event Buses: for your own applications Event Buses can be accessed by other AWS accounts You can archive events (all/filter) sent to an event bus (indefinitely or set period) Ability to replay archived events Rules: how to process the events (like couldwatch events) Amazon EvntBridge - Schema Registry EventBridge can analyze the events in your bus and infer the schema The Schema Registry allows you to generate code for your application, that will know in advance how data is structured in the event bus Schema can be versioned Amazon EventBridge – Resource-based Policy Manage permissions for a specific Event Bus Example: allow/deny events from another AWS account or AWS region Use case: aggregate all events from your AWS Organization in a single AWS account or AWS region Amazon EventBridge vs CloudWatch Events Amazon EventBridge builds upon and extends CloudWatch Events. It uses the same service API and endpoint, and the same undrlying service infrastructure EventBridge allows extension to add event buses for your custom applications and your third-party SaaS apps. Event Bridge has the Schema registry capability EventBridge has a different name to mark the new capabilities Over time, the CloudWatch Events name will be replaced with EventBridge AWS CloudTrail Provides governance, compliance and audit for your AWS Account CloudTrail is enabled by default! Get an history of events / API calls made within your AWS Account by: Console SDK CLI AWS Services Can put logs from CloudTrail into Cloud A trail can be applied to All Regions (default) or a single Region If a resource is deleted in AWS, investigate CloudTrail first! CloudTrail Diagram CloudTrail Events Management Events: Operations that are performed on resources in your AWS account Examples: Configuring security (IAM AttachRolePolicy) Configuring rules for routing data (Amazon EC2 CreateSubnet) Setting up logging (AWS CloudTrail CreateTrail) By default, trails are configured to log management events. Can separate Read Events (that don’t modify resources) from Write Events (that may modify resources) Data Events: By default, data events are not logged (because high volume operations) Amazon S3 object-level activity (ex: GetObject, DeleteObject, PutObject ): can separate Read and Write Events AWS Lambda function execution activity (the Invoke API) CloudTrail Insights Events See next slide CloudTrail Insights Enable CloudTrail Insights to detect unusual activity in your account: inaccurate resource provisioning hitting service limits Bursts of AWS IAM actions Gaps in periodic maintenance activity CloudTrail Insights analyzes normal management events to create a baseline And then continuously analyzes write events to detect unusual patterns Anomalies appear in the CloudTrail console Event is sent to Amazon S3 An EventBridge event is generated (for automation needs) CloudTrail Events Retention Events are stored for 90 days in CloudTrail To keep events beyond this period, log them to S3 and use Athena AWS Config Helps with auditing and recording compliance of your AWS resources Helps record configurations and changes over time Questions that can be solved by AWS Config: Is there unrestricted SSH access to my security groups? Do my buckets have any public access? How has my ALB configuration changed over time? You can receive alerts (SNS notifications) for any changes AWS Config is a per-region service Can be aggregated across regions and accounts Possibility of storing the configuration data into S3 (analyzed by Athena) Config Rules Can use AWS managed config rules (over 75) Can make custom config rules (must be defined in AWS Lambda) Ex: evaluate if each EBS disk is of type gp2 Ex: evaluate if each EC2 instance is t2.micro Rules can be evaluated / triggered: For each config change And / or: at regular time intervals AWS Config Rules does not prevent actions from happening (no deny) Pricing: no free tier, $0.003 per configuration item recorded per region, $0.001 per config rule evaluation per region AWS Config Resource View compliance of a resource over time View configuration of a resource over time View CloudTrail API calls of a resource over time Config Rules – Remediations Automate remediation of non-compliant resources using SSM Automation Documents Use AWS-Managed Automation Documents or create custom Automation Documents Tip: you can create custom Automation Documents that invokes Lambda function You can set Remediation Retries if the resource is still non-compliant after auto-remediation Config Rules – Notifications Use EventBridge to trigger notifications when AWS resources are non-compliant Ability to send configuration changes and compliance state notifications to SNS (all events – use SNS Filtering or filter at client-side) CloudWatch vs CloudTrail vs Config CloudWatch Performance monitoring (metrics, CPU, network, etc…) &amp; dashboards Events &amp; Alerting Log Aggregation &amp; Analysis CloudTrail Record API calls made within your Account by everyone Can define trails for specific resources Global Service Config Record configuration changes Evaluate resources against compliance rules Get timeline of changes and compliance For an Elastic Load Balancer CloudWatch: Monitoring Incoming connections metric Visualize error codes as % over time Make a dashboard to get an idea of your load balancer performance Config: Track security group rules for the Load Balancer Track configuration changes for the Load Balancer Ensure an SSL certificate is always assigned to the Load Balancer (compliance) CloudTrail: Track who made any changes to the Load Balancer with API calls AWS STS – Security Token Service Allows to grant limited and temporary access to AWS resources. Token is valid for up to one hour (must be refreshed) AssumeRole Within your own account: for enhanced security Cross Account Access: assume role in target account to perform actions there AssumeRoleWithSAML return credentials for users logged with SAML AssumeRoleWithWebIdentity return creds for users logged with an IdP (Facebook Login, Google Login, OIDC compatible…) AWS recommends against using this, and using Cognito instead GetSessionToken for MFA, from a user or AWS account root user Using STS to Assume a Role Define an IAM Role within your account or cross-account Define which principals can access this IAM Role Use AWS STS (Security Token Service) to retrieve credentials and impersonate the IAM Role you have access to (AssumeRole API) Temporary credentials can be valid between 15 minutes to 1 hour Cross account access with STS Identity Federation in AWS Federation lets users outside of AWS to assume temporary role for accessing AWS resources. These users assume identity provided access role. Federations can have many flavors: SAML 2.0 Custom Identity Broker Web Identity Federation with Amazon Cognito Web Identity Federation without Amazon Cognito Single Sign On Non-SAML with AWS Microsoft AD Using federation, you don’t need to create IAM users (user management is outside of AWS) SAML 2.0 Federation To integrate Active Directory / ADFS with AWS (or any SAML 2.0) Provides access to AWS Console or CLI (through temporary creds) No need to create an IAM user for each of your employees SAML 2.0 Federation – Active Directory FS Same process as with any SAML 2.0 compatible IdP SAML 2.0 Federation Needs to setup a trust between AWS IAM and SAML (both ways) SAML 2.0 enables web-based, cross domain SSO Uses the STS API: AssumeRoleWithSAML Note federation through SAML is the “old way” of doing things Amazon Single Sign On (SSO) Federation is the new managed and simpler way Read more here: https://aws.amazon.com/blogs/security/enabling-federation-to-aws-using-windows-active-directory-adfs-and-saml-2-0/ Custom Identity Broker Application Use only if identity provider is not compatible with SAML 2.0 The identity broker must determine the appropriate IAM policy Uses the STS API: AssumeRole or GetFederationToken Web Identity Federation – AssumeRoleWithWebIdentity Not recommended by AWS – use Cognito instead (allows for anonymous users, data synchronization, MFA) AWS Cognito Goal: Provide direct access to AWS Resources from the Client Side (mobile, web app) Example: provide (temporary) access to write to S3 bucket using Facebook Login Problem: We don’t want to create IAM users for our app users How: Log in to federated identity provider – or remain anonymous Get temporary AWS credentials back from the Federated Identity Pool These credentials come with a pre-defined IAM policy stating their permissions What is Microsoft Active Directory (AD)? Found on any Windows Server with AD Domain Services Database of objects: User Accounts, Computers, Printers, File Shares, Security Groups Centralized security management, create account, assign permissions Objects are organized in trees A group of trees is a forest AWS Directory Services AWS Managed Microsoft AD Create your own AD in AWS, manage users locally, supports MFA Establish “trust” connections with your on-premises AD AD Connector Directory Gateway (proxy) to redirect to on-premises AD, supports MFA Users are managed on the on-premises AD Simple AD AD-compatible managed directory on AWS Cannot be joined with on-premises AD AWS Organizations Global service Allows to manage multiple AWS accounts The main account is the master account – you can’t change it Other accounts are member accounts Member accounts can only be part of one organiztion Consolidated Billing across all accounts - single payment method Pricing benefits from aggregated usage (volume discount for EC2, S3…) API is available to automate AWS account creation Multi Account Strategies Create accounts per department, per cost center, per dev / test / prod, based on regulatory restrictions (using SCP), for better resource isolation (ex: VPC), to have separate per-account service limit, isolated account for logging Multi Account vs One Account Multi VPC Use tagging standards for billing purposes Enable CloudTrail on all accounts, send logs to central S3 account Send CloudWatch logs to central logging account Establish cross account roles for admin purposes Organizational Units (OU) - Examples AWS Organization Service Control Policies (SCP) Whitelist or blacklist IAM actions Applied at the OU or Account level Does not apply to the Master Account SCP is applied to all the Users and Roles of the Account, including Root user The SCP does not affect service-linked roles Service-linked roles enable other AWS services to integrate with AWS Organizations and can’t be restricted by SCPs. SCP must have an explicit Allow (does not allow anything by default) Use cases: Restrict access to certain services (for example: can’t use EMR) Enforce PCI compliance by explicitly disabling services SCP Hierarchy AWS Organization – Moving Accounts To migrate accounts from one organization to another Remove the member account from the old organization Send an invite to the new organiztion Accept the invite to the new organization from the member account If you want the master account of the old organization to also join the new organization, do the following: Remove the member accounts from the organizations using procedure above Delete the old organization Repeat the process above to invite the old master account to the new org IAM Conditions IAM for S3 ListBucket permission applies to arn:aws:s3:::test =&gt; bucket level permission GetObject, PutObject, DeleteObject applies to arn:awn:s3:::test/* =&gt; object level permission IAM Roles vs Resource Based Policies Attach a policy to a resource (example: S3 bucket policy) versus attaching of a using a role as a proxy IAM Roles vs Resource Based Policies When you assume a role (user, application or service), you give up your original permissions and take the permissions assigned to the role When using a resource based policy, the principal doesn’t have to give up his permissions Example: User in account A needs to scan a DynamoDB table in Account A and dump it in an S3 bucket in Account B Supported by: Amazon S3 buckets, SNS topics, SQS queues, etc… IAM Permission Boundaries IAM Permission Boundaries are supported for users and roles (not groups) Advanced feature to use a managed policy to set the maximum permissions an IAM entity can get. IAM Permission Boundaries Can be used in combinations of AWS Organizations SCP Use cases Delegate responsibilities to non administrators within their permission Allow developers to self-assign policies and manage their own permissions, while making sure they can’t escalate their privileges (= make themselves admin) Useful to restrict one specific user (instead of a whole account using Organizations &amp; SCP) IAM Policy Evaluation Logic Example IAM Policy Can you perform sqs:CreateQueue? Can you perform sqs:DeleteQueue? Can you perform ec2:DescribeInstances? AWS Resource Access Manager (RAM) Share AWS resources that you own with other AWS accounts Share with any account or within your Organization Avoid resource duplication! VPC Subnets: allow to have all the resources launched in the same subnets must be from the same AWS Organizations. Cannot share security groups and default VPC Participants can manage their own resources in there Participants can’t view, modify, delete resources that belong to other participants or the owner AWS Transit Gateway Route53 Resolver Rules License Manager Configurations Resource Access Manager – VPC example Each account… is responsible for its own resources cannot view, modify or delete other resources in other accounts Network is shared so… Anything deployed in the VPC can talk to other resources in the VPC Applications are accessed easily across accounts, using private IP! Security groups from other accounts can be referenced for maximum security AWS Single Sign-On (SSO) Centrally manage Single Sign-On to access multiple accounts and 3rd -party business applications. Integrated with AWS Organizations Supports SAML 2.0 markup Integration with on-premises Active Directory Centralized permission management Centralized a auditing with CloudTrail AWS Single Sign-On (SSO) – Setup with AD SSO – vs AssumeRoleWithSAML" />
<meta property="og:description" content="AWS Monitoring, Audit and Performance AWS CloudWatch Metrics Cloudwatch provides metrics for every services in AWS Metric is a variable to monitor (CPUUtilization, NetworkIn…) Metrics belong to namespaces Dimension is an attribute of a metric (instance id, environment, etc…) Up to 10 dimensions per metric Metrics have timestamps Can create CloudWatch dashboards of metrics EC2 Detailed monitoring EC2 instance metrics have metrics “every 5 minutes” With detailed monitoring (for a cost), you get data “every 1 minute” Use detailed monitoring if you want to scale faster for you ASG! The AWS tier allows us to have 10 detailed monitoring metrics Note: EC2 Memory usage is by default not pushed (must be pushed from inside the instance as a custom metric) CloudWatch Custom Metrics Possibility to define and send your own custom metrics to CloudWatch Example: memory (RAM) usage, disk space, number of logged in users … Use API call PutMetricData Ability to use dimensions (attributes) to segment metrics Instance.id Environment.name Metric resolution (StorageResolution API parameter - two possible value): Standard: 1 minute (60 seconds) High Resolution: 1/5/10/30 second(s) - Highr cost Important: Accepts metric data points two weeks in the past and two hours in the future (make sure to configure your EC@ instance time corectly) CloudWatch Dashboards Great way to setup custom dashboards for quick access to key metrics and alarms Dashboards are global Dashboards can include graphs from different AWS accounts and regions You can change the time zone &amp; time range of dashboards You can setup automatic refresh (10s, 1m, 2m, 5m, 15m) Dashboards can be shared with people who don’t have an AWS account (public, email address, 3rd party SSO provider through Amazon Cognito) Pricing 3 dashboards (up to 50metrics) for free $3/dashboard/month afterwards CloudWatch Logs Log groups: arbitrary name, usually representing an application Log stream: instances within application / log files / containers Can define log expiration policies (never expire, 30 days, etc..) CloudWatch Logs can send logs to: Amazon S3 (exports) Kinesis Data Streams Kinesis Data Firehose AWS Lambda ElasticSearch CloudWatch Logs - Sources SDK, CloudWatch Logs Agent, CloudWatch Unified Agent Elastic Beanstalk: collection of logs from application ECS: collection from containers AWS Lambda: collection from function logs VPC Flow Logs: VPC specific logs API Gateway CloudTrail based on filter Route53: Log DNS queries CloudWatch Logs Metric Filter &amp; Insights CloudWatch Logs can use filter expressions For example, find a specific IP inside of a log Or count occurrences of “ERROR” in your logs Metric filters can be used to triggr CloudWatch alarms Cloudwatch Logs Insights can be used to query logs and add queries to CloudWatch Dashboards CloudWatch Logs – S3 Export Log data can take up to 12 hours to become available for export The API call is CreateExportTask Not near-real time or real-time… use Logs Subscriptions instead CloudWatch Logs Subscriptions CloudWatch Logs Aggregation Multi-Account &amp; Multi Region CloudWatch Logs for EC2 By default, no logs from your EC2 machine will go to CloudWatch You need to run a CloudWatch agent on EC2 to push the log files you want Make sure IAM permissions are correct The CloudWatch log agent can be setup on premises too CloudWatch Logs Agent &amp; Unified Agent For virtual servers (EC2 instances, on-premises servers…) CloudWatch Logs Agent Old version of the agent Can only send to CloudWatch Logs CloudWatch Unified Agent Collect additional system-level metrics such as RAM, processes, etc… Collect logs to send to CloudWatch Logs Centralized configuration using SSM Parameter Store CloudWatch Unified Agent – Metrics Collected directly on your Linux server / EC2 instance CPU (active, guest, idle, system, user, steal) Disk metrics (free, used, total), Disk IO (writes, reads, bytes, iops) RAM (free, inactive, used, total, cached) Netstat (number of TCP and UDP connections, net packets, bytes) Processes (total, dead, bloqued, idle, running, sleep) Swap Space (free, used, used %) Reminder: out-of-the box metrics for EC2 – disk, CPU, network (high level) CloudWatch Alarms Alarms are used to trigger notifications for any metric Various options (sampling, %, max, min, etc…) Alarm States: OK INSUFFICIENT_DATA ALARM Period: Length of time in seconds to evaluate the metric High resolution custom metrics: 10 sec, 30 sec or multiples of 60 sec CloudWatch Alarm Targets Stop, Terminate, Reboot, or Recover an EC2 Instance Trigger Auto Scaling Action Send notification to SNS (from which you can do pretty much anything) EC2 Instance Recovery Status Check: Instance status = check the EC2 VM System status = check the underlying hardware Recovery: Same Private, Public, Elastic IP, metadata, placement group CloudWatch Events Event pattern: Interceot events from AWS services (Sources) Example sources: EC2 instance start, CodeBuild Failre, S3, Trusted Advisor Can intercept any API call with CloudTrai integration Schedule or Cron (example: create an event every 4 hours) A JSON payload is created from the event and passed to a target… Compute: Lambda, Batch, ECS task Integration: SQS, SNS, Kinesis Data Streams, Kinesis Data Firehose Orchestration: Step functions, CodePipeline, CodeBuild Maintenance: SSM, EC2 Actions Amazon EventBridge EventBridge is the next evolution of CloudWatch Events Default Event Bus - generated by AWS services (CloudWatch Events) Partner Event Bus: receive events from SaaS service or applications (Zendesk, DataDog, Segment, Auth0…) Custom Event Buses: for your own applications Event Buses can be accessed by other AWS accounts You can archive events (all/filter) sent to an event bus (indefinitely or set period) Ability to replay archived events Rules: how to process the events (like couldwatch events) Amazon EvntBridge - Schema Registry EventBridge can analyze the events in your bus and infer the schema The Schema Registry allows you to generate code for your application, that will know in advance how data is structured in the event bus Schema can be versioned Amazon EventBridge – Resource-based Policy Manage permissions for a specific Event Bus Example: allow/deny events from another AWS account or AWS region Use case: aggregate all events from your AWS Organization in a single AWS account or AWS region Amazon EventBridge vs CloudWatch Events Amazon EventBridge builds upon and extends CloudWatch Events. It uses the same service API and endpoint, and the same undrlying service infrastructure EventBridge allows extension to add event buses for your custom applications and your third-party SaaS apps. Event Bridge has the Schema registry capability EventBridge has a different name to mark the new capabilities Over time, the CloudWatch Events name will be replaced with EventBridge AWS CloudTrail Provides governance, compliance and audit for your AWS Account CloudTrail is enabled by default! Get an history of events / API calls made within your AWS Account by: Console SDK CLI AWS Services Can put logs from CloudTrail into Cloud A trail can be applied to All Regions (default) or a single Region If a resource is deleted in AWS, investigate CloudTrail first! CloudTrail Diagram CloudTrail Events Management Events: Operations that are performed on resources in your AWS account Examples: Configuring security (IAM AttachRolePolicy) Configuring rules for routing data (Amazon EC2 CreateSubnet) Setting up logging (AWS CloudTrail CreateTrail) By default, trails are configured to log management events. Can separate Read Events (that don’t modify resources) from Write Events (that may modify resources) Data Events: By default, data events are not logged (because high volume operations) Amazon S3 object-level activity (ex: GetObject, DeleteObject, PutObject ): can separate Read and Write Events AWS Lambda function execution activity (the Invoke API) CloudTrail Insights Events See next slide CloudTrail Insights Enable CloudTrail Insights to detect unusual activity in your account: inaccurate resource provisioning hitting service limits Bursts of AWS IAM actions Gaps in periodic maintenance activity CloudTrail Insights analyzes normal management events to create a baseline And then continuously analyzes write events to detect unusual patterns Anomalies appear in the CloudTrail console Event is sent to Amazon S3 An EventBridge event is generated (for automation needs) CloudTrail Events Retention Events are stored for 90 days in CloudTrail To keep events beyond this period, log them to S3 and use Athena AWS Config Helps with auditing and recording compliance of your AWS resources Helps record configurations and changes over time Questions that can be solved by AWS Config: Is there unrestricted SSH access to my security groups? Do my buckets have any public access? How has my ALB configuration changed over time? You can receive alerts (SNS notifications) for any changes AWS Config is a per-region service Can be aggregated across regions and accounts Possibility of storing the configuration data into S3 (analyzed by Athena) Config Rules Can use AWS managed config rules (over 75) Can make custom config rules (must be defined in AWS Lambda) Ex: evaluate if each EBS disk is of type gp2 Ex: evaluate if each EC2 instance is t2.micro Rules can be evaluated / triggered: For each config change And / or: at regular time intervals AWS Config Rules does not prevent actions from happening (no deny) Pricing: no free tier, $0.003 per configuration item recorded per region, $0.001 per config rule evaluation per region AWS Config Resource View compliance of a resource over time View configuration of a resource over time View CloudTrail API calls of a resource over time Config Rules – Remediations Automate remediation of non-compliant resources using SSM Automation Documents Use AWS-Managed Automation Documents or create custom Automation Documents Tip: you can create custom Automation Documents that invokes Lambda function You can set Remediation Retries if the resource is still non-compliant after auto-remediation Config Rules – Notifications Use EventBridge to trigger notifications when AWS resources are non-compliant Ability to send configuration changes and compliance state notifications to SNS (all events – use SNS Filtering or filter at client-side) CloudWatch vs CloudTrail vs Config CloudWatch Performance monitoring (metrics, CPU, network, etc…) &amp; dashboards Events &amp; Alerting Log Aggregation &amp; Analysis CloudTrail Record API calls made within your Account by everyone Can define trails for specific resources Global Service Config Record configuration changes Evaluate resources against compliance rules Get timeline of changes and compliance For an Elastic Load Balancer CloudWatch: Monitoring Incoming connections metric Visualize error codes as % over time Make a dashboard to get an idea of your load balancer performance Config: Track security group rules for the Load Balancer Track configuration changes for the Load Balancer Ensure an SSL certificate is always assigned to the Load Balancer (compliance) CloudTrail: Track who made any changes to the Load Balancer with API calls AWS STS – Security Token Service Allows to grant limited and temporary access to AWS resources. Token is valid for up to one hour (must be refreshed) AssumeRole Within your own account: for enhanced security Cross Account Access: assume role in target account to perform actions there AssumeRoleWithSAML return credentials for users logged with SAML AssumeRoleWithWebIdentity return creds for users logged with an IdP (Facebook Login, Google Login, OIDC compatible…) AWS recommends against using this, and using Cognito instead GetSessionToken for MFA, from a user or AWS account root user Using STS to Assume a Role Define an IAM Role within your account or cross-account Define which principals can access this IAM Role Use AWS STS (Security Token Service) to retrieve credentials and impersonate the IAM Role you have access to (AssumeRole API) Temporary credentials can be valid between 15 minutes to 1 hour Cross account access with STS Identity Federation in AWS Federation lets users outside of AWS to assume temporary role for accessing AWS resources. These users assume identity provided access role. Federations can have many flavors: SAML 2.0 Custom Identity Broker Web Identity Federation with Amazon Cognito Web Identity Federation without Amazon Cognito Single Sign On Non-SAML with AWS Microsoft AD Using federation, you don’t need to create IAM users (user management is outside of AWS) SAML 2.0 Federation To integrate Active Directory / ADFS with AWS (or any SAML 2.0) Provides access to AWS Console or CLI (through temporary creds) No need to create an IAM user for each of your employees SAML 2.0 Federation – Active Directory FS Same process as with any SAML 2.0 compatible IdP SAML 2.0 Federation Needs to setup a trust between AWS IAM and SAML (both ways) SAML 2.0 enables web-based, cross domain SSO Uses the STS API: AssumeRoleWithSAML Note federation through SAML is the “old way” of doing things Amazon Single Sign On (SSO) Federation is the new managed and simpler way Read more here: https://aws.amazon.com/blogs/security/enabling-federation-to-aws-using-windows-active-directory-adfs-and-saml-2-0/ Custom Identity Broker Application Use only if identity provider is not compatible with SAML 2.0 The identity broker must determine the appropriate IAM policy Uses the STS API: AssumeRole or GetFederationToken Web Identity Federation – AssumeRoleWithWebIdentity Not recommended by AWS – use Cognito instead (allows for anonymous users, data synchronization, MFA) AWS Cognito Goal: Provide direct access to AWS Resources from the Client Side (mobile, web app) Example: provide (temporary) access to write to S3 bucket using Facebook Login Problem: We don’t want to create IAM users for our app users How: Log in to federated identity provider – or remain anonymous Get temporary AWS credentials back from the Federated Identity Pool These credentials come with a pre-defined IAM policy stating their permissions What is Microsoft Active Directory (AD)? Found on any Windows Server with AD Domain Services Database of objects: User Accounts, Computers, Printers, File Shares, Security Groups Centralized security management, create account, assign permissions Objects are organized in trees A group of trees is a forest AWS Directory Services AWS Managed Microsoft AD Create your own AD in AWS, manage users locally, supports MFA Establish “trust” connections with your on-premises AD AD Connector Directory Gateway (proxy) to redirect to on-premises AD, supports MFA Users are managed on the on-premises AD Simple AD AD-compatible managed directory on AWS Cannot be joined with on-premises AD AWS Organizations Global service Allows to manage multiple AWS accounts The main account is the master account – you can’t change it Other accounts are member accounts Member accounts can only be part of one organiztion Consolidated Billing across all accounts - single payment method Pricing benefits from aggregated usage (volume discount for EC2, S3…) API is available to automate AWS account creation Multi Account Strategies Create accounts per department, per cost center, per dev / test / prod, based on regulatory restrictions (using SCP), for better resource isolation (ex: VPC), to have separate per-account service limit, isolated account for logging Multi Account vs One Account Multi VPC Use tagging standards for billing purposes Enable CloudTrail on all accounts, send logs to central S3 account Send CloudWatch logs to central logging account Establish cross account roles for admin purposes Organizational Units (OU) - Examples AWS Organization Service Control Policies (SCP) Whitelist or blacklist IAM actions Applied at the OU or Account level Does not apply to the Master Account SCP is applied to all the Users and Roles of the Account, including Root user The SCP does not affect service-linked roles Service-linked roles enable other AWS services to integrate with AWS Organizations and can’t be restricted by SCPs. SCP must have an explicit Allow (does not allow anything by default) Use cases: Restrict access to certain services (for example: can’t use EMR) Enforce PCI compliance by explicitly disabling services SCP Hierarchy AWS Organization – Moving Accounts To migrate accounts from one organization to another Remove the member account from the old organization Send an invite to the new organiztion Accept the invite to the new organization from the member account If you want the master account of the old organization to also join the new organization, do the following: Remove the member accounts from the organizations using procedure above Delete the old organization Repeat the process above to invite the old master account to the new org IAM Conditions IAM for S3 ListBucket permission applies to arn:aws:s3:::test =&gt; bucket level permission GetObject, PutObject, DeleteObject applies to arn:awn:s3:::test/* =&gt; object level permission IAM Roles vs Resource Based Policies Attach a policy to a resource (example: S3 bucket policy) versus attaching of a using a role as a proxy IAM Roles vs Resource Based Policies When you assume a role (user, application or service), you give up your original permissions and take the permissions assigned to the role When using a resource based policy, the principal doesn’t have to give up his permissions Example: User in account A needs to scan a DynamoDB table in Account A and dump it in an S3 bucket in Account B Supported by: Amazon S3 buckets, SNS topics, SQS queues, etc… IAM Permission Boundaries IAM Permission Boundaries are supported for users and roles (not groups) Advanced feature to use a managed policy to set the maximum permissions an IAM entity can get. IAM Permission Boundaries Can be used in combinations of AWS Organizations SCP Use cases Delegate responsibilities to non administrators within their permission Allow developers to self-assign policies and manage their own permissions, while making sure they can’t escalate their privileges (= make themselves admin) Useful to restrict one specific user (instead of a whole account using Organizations &amp; SCP) IAM Policy Evaluation Logic Example IAM Policy Can you perform sqs:CreateQueue? Can you perform sqs:DeleteQueue? Can you perform ec2:DescribeInstances? AWS Resource Access Manager (RAM) Share AWS resources that you own with other AWS accounts Share with any account or within your Organization Avoid resource duplication! VPC Subnets: allow to have all the resources launched in the same subnets must be from the same AWS Organizations. Cannot share security groups and default VPC Participants can manage their own resources in there Participants can’t view, modify, delete resources that belong to other participants or the owner AWS Transit Gateway Route53 Resolver Rules License Manager Configurations Resource Access Manager – VPC example Each account… is responsible for its own resources cannot view, modify or delete other resources in other accounts Network is shared so… Anything deployed in the VPC can talk to other resources in the VPC Applications are accessed easily across accounts, using private IP! Security groups from other accounts can be referenced for maximum security AWS Single Sign-On (SSO) Centrally manage Single Sign-On to access multiple accounts and 3rd -party business applications. Integrated with AWS Organizations Supports SAML 2.0 markup Integration with on-premises Active Directory Centralized permission management Centralized a auditing with CloudTrail AWS Single Sign-On (SSO) – Setup with AD SSO – vs AssumeRoleWithSAML" />
<link rel="canonical" href="https://hardworkenglishlearner.github.io/posts/aws-monitoring-audit-and-performance/" />
<meta property="og:url" content="https://hardworkenglishlearner.github.io/posts/aws-monitoring-audit-and-performance/" />
<meta property="og:site_name" content="Programmer From Zero To Mountaint" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-02-06T00:00:00+07:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="AWS Monitoring, Audit, and Performance" />
<meta name="twitter:site" content="@twitter_username" />
<meta name="twitter:creator" content="@Hardwork đẹp trai" />
<meta name="google-site-verification" content="google_meta_tag_verification" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Hardwork đẹp trai"},"dateModified":"2024-02-06T00:00:00+07:00","datePublished":"2024-02-06T00:00:00+07:00","description":"AWS Monitoring, Audit and Performance AWS CloudWatch Metrics Cloudwatch provides metrics for every services in AWS Metric is a variable to monitor (CPUUtilization, NetworkIn…) Metrics belong to namespaces Dimension is an attribute of a metric (instance id, environment, etc…) Up to 10 dimensions per metric Metrics have timestamps Can create CloudWatch dashboards of metrics EC2 Detailed monitoring EC2 instance metrics have metrics “every 5 minutes” With detailed monitoring (for a cost), you get data “every 1 minute” Use detailed monitoring if you want to scale faster for you ASG! The AWS tier allows us to have 10 detailed monitoring metrics Note: EC2 Memory usage is by default not pushed (must be pushed from inside the instance as a custom metric) CloudWatch Custom Metrics Possibility to define and send your own custom metrics to CloudWatch Example: memory (RAM) usage, disk space, number of logged in users … Use API call PutMetricData Ability to use dimensions (attributes) to segment metrics Instance.id Environment.name Metric resolution (StorageResolution API parameter - two possible value): Standard: 1 minute (60 seconds) High Resolution: 1/5/10/30 second(s) - Highr cost Important: Accepts metric data points two weeks in the past and two hours in the future (make sure to configure your EC@ instance time corectly) CloudWatch Dashboards Great way to setup custom dashboards for quick access to key metrics and alarms Dashboards are global Dashboards can include graphs from different AWS accounts and regions You can change the time zone &amp; time range of dashboards You can setup automatic refresh (10s, 1m, 2m, 5m, 15m) Dashboards can be shared with people who don’t have an AWS account (public, email address, 3rd party SSO provider through Amazon Cognito) Pricing 3 dashboards (up to 50metrics) for free $3/dashboard/month afterwards CloudWatch Logs Log groups: arbitrary name, usually representing an application Log stream: instances within application / log files / containers Can define log expiration policies (never expire, 30 days, etc..) CloudWatch Logs can send logs to: Amazon S3 (exports) Kinesis Data Streams Kinesis Data Firehose AWS Lambda ElasticSearch CloudWatch Logs - Sources SDK, CloudWatch Logs Agent, CloudWatch Unified Agent Elastic Beanstalk: collection of logs from application ECS: collection from containers AWS Lambda: collection from function logs VPC Flow Logs: VPC specific logs API Gateway CloudTrail based on filter Route53: Log DNS queries CloudWatch Logs Metric Filter &amp; Insights CloudWatch Logs can use filter expressions For example, find a specific IP inside of a log Or count occurrences of “ERROR” in your logs Metric filters can be used to triggr CloudWatch alarms Cloudwatch Logs Insights can be used to query logs and add queries to CloudWatch Dashboards CloudWatch Logs – S3 Export Log data can take up to 12 hours to become available for export The API call is CreateExportTask Not near-real time or real-time… use Logs Subscriptions instead CloudWatch Logs Subscriptions CloudWatch Logs Aggregation Multi-Account &amp; Multi Region CloudWatch Logs for EC2 By default, no logs from your EC2 machine will go to CloudWatch You need to run a CloudWatch agent on EC2 to push the log files you want Make sure IAM permissions are correct The CloudWatch log agent can be setup on premises too CloudWatch Logs Agent &amp; Unified Agent For virtual servers (EC2 instances, on-premises servers…) CloudWatch Logs Agent Old version of the agent Can only send to CloudWatch Logs CloudWatch Unified Agent Collect additional system-level metrics such as RAM, processes, etc… Collect logs to send to CloudWatch Logs Centralized configuration using SSM Parameter Store CloudWatch Unified Agent – Metrics Collected directly on your Linux server / EC2 instance CPU (active, guest, idle, system, user, steal) Disk metrics (free, used, total), Disk IO (writes, reads, bytes, iops) RAM (free, inactive, used, total, cached) Netstat (number of TCP and UDP connections, net packets, bytes) Processes (total, dead, bloqued, idle, running, sleep) Swap Space (free, used, used %) Reminder: out-of-the box metrics for EC2 – disk, CPU, network (high level) CloudWatch Alarms Alarms are used to trigger notifications for any metric Various options (sampling, %, max, min, etc…) Alarm States: OK INSUFFICIENT_DATA ALARM Period: Length of time in seconds to evaluate the metric High resolution custom metrics: 10 sec, 30 sec or multiples of 60 sec CloudWatch Alarm Targets Stop, Terminate, Reboot, or Recover an EC2 Instance Trigger Auto Scaling Action Send notification to SNS (from which you can do pretty much anything) EC2 Instance Recovery Status Check: Instance status = check the EC2 VM System status = check the underlying hardware Recovery: Same Private, Public, Elastic IP, metadata, placement group CloudWatch Events Event pattern: Interceot events from AWS services (Sources) Example sources: EC2 instance start, CodeBuild Failre, S3, Trusted Advisor Can intercept any API call with CloudTrai integration Schedule or Cron (example: create an event every 4 hours) A JSON payload is created from the event and passed to a target… Compute: Lambda, Batch, ECS task Integration: SQS, SNS, Kinesis Data Streams, Kinesis Data Firehose Orchestration: Step functions, CodePipeline, CodeBuild Maintenance: SSM, EC2 Actions Amazon EventBridge EventBridge is the next evolution of CloudWatch Events Default Event Bus - generated by AWS services (CloudWatch Events) Partner Event Bus: receive events from SaaS service or applications (Zendesk, DataDog, Segment, Auth0…) Custom Event Buses: for your own applications Event Buses can be accessed by other AWS accounts You can archive events (all/filter) sent to an event bus (indefinitely or set period) Ability to replay archived events Rules: how to process the events (like couldwatch events) Amazon EvntBridge - Schema Registry EventBridge can analyze the events in your bus and infer the schema The Schema Registry allows you to generate code for your application, that will know in advance how data is structured in the event bus Schema can be versioned Amazon EventBridge – Resource-based Policy Manage permissions for a specific Event Bus Example: allow/deny events from another AWS account or AWS region Use case: aggregate all events from your AWS Organization in a single AWS account or AWS region Amazon EventBridge vs CloudWatch Events Amazon EventBridge builds upon and extends CloudWatch Events. It uses the same service API and endpoint, and the same undrlying service infrastructure EventBridge allows extension to add event buses for your custom applications and your third-party SaaS apps. Event Bridge has the Schema registry capability EventBridge has a different name to mark the new capabilities Over time, the CloudWatch Events name will be replaced with EventBridge AWS CloudTrail Provides governance, compliance and audit for your AWS Account CloudTrail is enabled by default! Get an history of events / API calls made within your AWS Account by: Console SDK CLI AWS Services Can put logs from CloudTrail into Cloud A trail can be applied to All Regions (default) or a single Region If a resource is deleted in AWS, investigate CloudTrail first! CloudTrail Diagram CloudTrail Events Management Events: Operations that are performed on resources in your AWS account Examples: Configuring security (IAM AttachRolePolicy) Configuring rules for routing data (Amazon EC2 CreateSubnet) Setting up logging (AWS CloudTrail CreateTrail) By default, trails are configured to log management events. Can separate Read Events (that don’t modify resources) from Write Events (that may modify resources) Data Events: By default, data events are not logged (because high volume operations) Amazon S3 object-level activity (ex: GetObject, DeleteObject, PutObject ): can separate Read and Write Events AWS Lambda function execution activity (the Invoke API) CloudTrail Insights Events See next slide CloudTrail Insights Enable CloudTrail Insights to detect unusual activity in your account: inaccurate resource provisioning hitting service limits Bursts of AWS IAM actions Gaps in periodic maintenance activity CloudTrail Insights analyzes normal management events to create a baseline And then continuously analyzes write events to detect unusual patterns Anomalies appear in the CloudTrail console Event is sent to Amazon S3 An EventBridge event is generated (for automation needs) CloudTrail Events Retention Events are stored for 90 days in CloudTrail To keep events beyond this period, log them to S3 and use Athena AWS Config Helps with auditing and recording compliance of your AWS resources Helps record configurations and changes over time Questions that can be solved by AWS Config: Is there unrestricted SSH access to my security groups? Do my buckets have any public access? How has my ALB configuration changed over time? You can receive alerts (SNS notifications) for any changes AWS Config is a per-region service Can be aggregated across regions and accounts Possibility of storing the configuration data into S3 (analyzed by Athena) Config Rules Can use AWS managed config rules (over 75) Can make custom config rules (must be defined in AWS Lambda) Ex: evaluate if each EBS disk is of type gp2 Ex: evaluate if each EC2 instance is t2.micro Rules can be evaluated / triggered: For each config change And / or: at regular time intervals AWS Config Rules does not prevent actions from happening (no deny) Pricing: no free tier, $0.003 per configuration item recorded per region, $0.001 per config rule evaluation per region AWS Config Resource View compliance of a resource over time View configuration of a resource over time View CloudTrail API calls of a resource over time Config Rules – Remediations Automate remediation of non-compliant resources using SSM Automation Documents Use AWS-Managed Automation Documents or create custom Automation Documents Tip: you can create custom Automation Documents that invokes Lambda function You can set Remediation Retries if the resource is still non-compliant after auto-remediation Config Rules – Notifications Use EventBridge to trigger notifications when AWS resources are non-compliant Ability to send configuration changes and compliance state notifications to SNS (all events – use SNS Filtering or filter at client-side) CloudWatch vs CloudTrail vs Config CloudWatch Performance monitoring (metrics, CPU, network, etc…) &amp; dashboards Events &amp; Alerting Log Aggregation &amp; Analysis CloudTrail Record API calls made within your Account by everyone Can define trails for specific resources Global Service Config Record configuration changes Evaluate resources against compliance rules Get timeline of changes and compliance For an Elastic Load Balancer CloudWatch: Monitoring Incoming connections metric Visualize error codes as % over time Make a dashboard to get an idea of your load balancer performance Config: Track security group rules for the Load Balancer Track configuration changes for the Load Balancer Ensure an SSL certificate is always assigned to the Load Balancer (compliance) CloudTrail: Track who made any changes to the Load Balancer with API calls AWS STS – Security Token Service Allows to grant limited and temporary access to AWS resources. Token is valid for up to one hour (must be refreshed) AssumeRole Within your own account: for enhanced security Cross Account Access: assume role in target account to perform actions there AssumeRoleWithSAML return credentials for users logged with SAML AssumeRoleWithWebIdentity return creds for users logged with an IdP (Facebook Login, Google Login, OIDC compatible…) AWS recommends against using this, and using Cognito instead GetSessionToken for MFA, from a user or AWS account root user Using STS to Assume a Role Define an IAM Role within your account or cross-account Define which principals can access this IAM Role Use AWS STS (Security Token Service) to retrieve credentials and impersonate the IAM Role you have access to (AssumeRole API) Temporary credentials can be valid between 15 minutes to 1 hour Cross account access with STS Identity Federation in AWS Federation lets users outside of AWS to assume temporary role for accessing AWS resources. These users assume identity provided access role. Federations can have many flavors: SAML 2.0 Custom Identity Broker Web Identity Federation with Amazon Cognito Web Identity Federation without Amazon Cognito Single Sign On Non-SAML with AWS Microsoft AD Using federation, you don’t need to create IAM users (user management is outside of AWS) SAML 2.0 Federation To integrate Active Directory / ADFS with AWS (or any SAML 2.0) Provides access to AWS Console or CLI (through temporary creds) No need to create an IAM user for each of your employees SAML 2.0 Federation – Active Directory FS Same process as with any SAML 2.0 compatible IdP SAML 2.0 Federation Needs to setup a trust between AWS IAM and SAML (both ways) SAML 2.0 enables web-based, cross domain SSO Uses the STS API: AssumeRoleWithSAML Note federation through SAML is the “old way” of doing things Amazon Single Sign On (SSO) Federation is the new managed and simpler way Read more here: https://aws.amazon.com/blogs/security/enabling-federation-to-aws-using-windows-active-directory-adfs-and-saml-2-0/ Custom Identity Broker Application Use only if identity provider is not compatible with SAML 2.0 The identity broker must determine the appropriate IAM policy Uses the STS API: AssumeRole or GetFederationToken Web Identity Federation – AssumeRoleWithWebIdentity Not recommended by AWS – use Cognito instead (allows for anonymous users, data synchronization, MFA) AWS Cognito Goal: Provide direct access to AWS Resources from the Client Side (mobile, web app) Example: provide (temporary) access to write to S3 bucket using Facebook Login Problem: We don’t want to create IAM users for our app users How: Log in to federated identity provider – or remain anonymous Get temporary AWS credentials back from the Federated Identity Pool These credentials come with a pre-defined IAM policy stating their permissions What is Microsoft Active Directory (AD)? Found on any Windows Server with AD Domain Services Database of objects: User Accounts, Computers, Printers, File Shares, Security Groups Centralized security management, create account, assign permissions Objects are organized in trees A group of trees is a forest AWS Directory Services AWS Managed Microsoft AD Create your own AD in AWS, manage users locally, supports MFA Establish “trust” connections with your on-premises AD AD Connector Directory Gateway (proxy) to redirect to on-premises AD, supports MFA Users are managed on the on-premises AD Simple AD AD-compatible managed directory on AWS Cannot be joined with on-premises AD AWS Organizations Global service Allows to manage multiple AWS accounts The main account is the master account – you can’t change it Other accounts are member accounts Member accounts can only be part of one organiztion Consolidated Billing across all accounts - single payment method Pricing benefits from aggregated usage (volume discount for EC2, S3…) API is available to automate AWS account creation Multi Account Strategies Create accounts per department, per cost center, per dev / test / prod, based on regulatory restrictions (using SCP), for better resource isolation (ex: VPC), to have separate per-account service limit, isolated account for logging Multi Account vs One Account Multi VPC Use tagging standards for billing purposes Enable CloudTrail on all accounts, send logs to central S3 account Send CloudWatch logs to central logging account Establish cross account roles for admin purposes Organizational Units (OU) - Examples AWS Organization Service Control Policies (SCP) Whitelist or blacklist IAM actions Applied at the OU or Account level Does not apply to the Master Account SCP is applied to all the Users and Roles of the Account, including Root user The SCP does not affect service-linked roles Service-linked roles enable other AWS services to integrate with AWS Organizations and can’t be restricted by SCPs. SCP must have an explicit Allow (does not allow anything by default) Use cases: Restrict access to certain services (for example: can’t use EMR) Enforce PCI compliance by explicitly disabling services SCP Hierarchy AWS Organization – Moving Accounts To migrate accounts from one organization to another Remove the member account from the old organization Send an invite to the new organiztion Accept the invite to the new organization from the member account If you want the master account of the old organization to also join the new organization, do the following: Remove the member accounts from the organizations using procedure above Delete the old organization Repeat the process above to invite the old master account to the new org IAM Conditions IAM for S3 ListBucket permission applies to arn:aws:s3:::test =&gt; bucket level permission GetObject, PutObject, DeleteObject applies to arn:awn:s3:::test/* =&gt; object level permission IAM Roles vs Resource Based Policies Attach a policy to a resource (example: S3 bucket policy) versus attaching of a using a role as a proxy IAM Roles vs Resource Based Policies When you assume a role (user, application or service), you give up your original permissions and take the permissions assigned to the role When using a resource based policy, the principal doesn’t have to give up his permissions Example: User in account A needs to scan a DynamoDB table in Account A and dump it in an S3 bucket in Account B Supported by: Amazon S3 buckets, SNS topics, SQS queues, etc… IAM Permission Boundaries IAM Permission Boundaries are supported for users and roles (not groups) Advanced feature to use a managed policy to set the maximum permissions an IAM entity can get. IAM Permission Boundaries Can be used in combinations of AWS Organizations SCP Use cases Delegate responsibilities to non administrators within their permission Allow developers to self-assign policies and manage their own permissions, while making sure they can’t escalate their privileges (= make themselves admin) Useful to restrict one specific user (instead of a whole account using Organizations &amp; SCP) IAM Policy Evaluation Logic Example IAM Policy Can you perform sqs:CreateQueue? Can you perform sqs:DeleteQueue? Can you perform ec2:DescribeInstances? AWS Resource Access Manager (RAM) Share AWS resources that you own with other AWS accounts Share with any account or within your Organization Avoid resource duplication! VPC Subnets: allow to have all the resources launched in the same subnets must be from the same AWS Organizations. Cannot share security groups and default VPC Participants can manage their own resources in there Participants can’t view, modify, delete resources that belong to other participants or the owner AWS Transit Gateway Route53 Resolver Rules License Manager Configurations Resource Access Manager – VPC example Each account… is responsible for its own resources cannot view, modify or delete other resources in other accounts Network is shared so… Anything deployed in the VPC can talk to other resources in the VPC Applications are accessed easily across accounts, using private IP! Security groups from other accounts can be referenced for maximum security AWS Single Sign-On (SSO) Centrally manage Single Sign-On to access multiple accounts and 3rd -party business applications. Integrated with AWS Organizations Supports SAML 2.0 markup Integration with on-premises Active Directory Centralized permission management Centralized a auditing with CloudTrail AWS Single Sign-On (SSO) – Setup with AD SSO – vs AssumeRoleWithSAML","headline":"AWS Monitoring, Audit, and Performance","mainEntityOfPage":{"@type":"WebPage","@id":"https://hardworkenglishlearner.github.io/posts/aws-monitoring-audit-and-performance/"},"url":"https://hardworkenglishlearner.github.io/posts/aws-monitoring-audit-and-performance/"}</script>
<!-- End Jekyll SEO tag -->


  <!-- PWA cache settings -->
  <meta
    name="pwa-cache"
    content="true">

  <title>AWS Monitoring, Audit, and Performance | Programmer From Zero To Mountaint
  </title>

  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://realfavicongenerator.net/
-->



<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png">

  <link rel="manifest" href="/assets/img/favicons/site.webmanifest">

<link rel="shortcut icon" href="/assets/img/favicons/favicon.ico">
<meta name="apple-mobile-web-app-title" content="Programmer From Zero To Mountaint">
<meta name="application-name" content="Programmer From Zero To Mountaint">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">


  
    
      <link rel="preconnect" href="https://fonts.googleapis.com" >
      <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
    
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin>
    
      <link rel="preconnect" href="https://fonts.googleapis.com" >
      <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
    
      <link rel="preconnect" href="https://cdn.jsdelivr.net" >
      <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" >
    
      <link rel="preconnect" href="https://polyfill.io" >
      <link rel="dns-prefetch" href="https://polyfill.io" >
    

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap">
  

  <!-- GA -->
  

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css">

  <link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css">

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.25.0/dist/tocbot.min.css">
  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css">
  

  
    <!-- Manific Popup -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css">
  

  <!-- JavaScript -->

  
    <!-- Switch the mode between dark and light. -->

<script type="text/javascript">
  class ModeToggle {
    static get MODE_KEY() {
      return 'mode';
    }
    static get MODE_ATTR() {
      return 'data-mode';
    }
    static get DARK_MODE() {
      return 'dark';
    }
    static get LIGHT_MODE() {
      return 'light';
    }
    static get ID() {
      return 'mode-toggle';
    }

    constructor() {
      if (this.hasMode) {
        if (this.isDarkMode) {
          if (!this.isSysDarkPrefer) {
            this.setDark();
          }
        } else {
          if (this.isSysDarkPrefer) {
            this.setLight();
          }
        }
      }

      let self = this;

      /* always follow the system prefers */
      this.sysDarkPrefers.addEventListener('change', () => {
        if (self.hasMode) {
          if (self.isDarkMode) {
            if (!self.isSysDarkPrefer) {
              self.setDark();
            }
          } else {
            if (self.isSysDarkPrefer) {
              self.setLight();
            }
          }

          self.clearMode();
        }

        self.notify();
      });
    } /* constructor() */

    get sysDarkPrefers() {
      return window.matchMedia('(prefers-color-scheme: dark)');
    }

    get isSysDarkPrefer() {
      return this.sysDarkPrefers.matches;
    }

    get isDarkMode() {
      return this.mode === ModeToggle.DARK_MODE;
    }

    get isLightMode() {
      return this.mode === ModeToggle.LIGHT_MODE;
    }

    get hasMode() {
      return this.mode != null;
    }

    get mode() {
      return sessionStorage.getItem(ModeToggle.MODE_KEY);
    }

    /* get the current mode on screen */
    get modeStatus() {
      if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) {
        return ModeToggle.DARK_MODE;
      } else {
        return ModeToggle.LIGHT_MODE;
      }
    }

    setDark() {
      document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE);
      sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE);
    }

    setLight() {
      document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE);
      sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE);
    }

    clearMode() {
      document.documentElement.removeAttribute(ModeToggle.MODE_ATTR);
      sessionStorage.removeItem(ModeToggle.MODE_KEY);
    }

    /* Notify another plugins that the theme mode has changed */
    notify() {
      window.postMessage(
        {
          direction: ModeToggle.ID,
          message: this.modeStatus
        },
        '*'
      );
    }

    flipMode() {
      if (this.hasMode) {
        if (this.isSysDarkPrefer) {
          if (this.isLightMode) {
            this.clearMode();
          } else {
            this.setLight();
          }
        } else {
          if (this.isDarkMode) {
            this.clearMode();
          } else {
            this.setDark();
          }
        }
      } else {
        if (this.isSysDarkPrefer) {
          this.setLight();
        } else {
          this.setDark();
        }
      }

      this.notify();
    } /* flipMode() */
  } /* ModeToggle */

  const modeToggle = new ModeToggle();
</script>

  

  <!-- A placeholder to allow defining custom metadata -->

</head>


  <body>
    <!-- The Side Bar -->

<aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end">
  <header class="profile-wrapper">
    <a href="/" id="avatar" class="rounded-circle"><img src="/assets/img/avatar.jpg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a>

    <h1 class="site-title">
      <a href="/">Programmer From Zero To Mountaint</a>
    </h1>
    <p class="site-subtitle fst-italic mb-0">Programmer blog</p>
  </header>
  <!-- .profile-wrapper -->

  <nav class="flex-column flex-grow-1 w-100 ps-0">
    <ul class="nav">
      <!-- home -->
      <li class="nav-item">
        <a href="/" class="nav-link">
          <i class="fa-fw fas fa-home"></i>
          <span>HOME</span>
        </a>
      </li>
      <!-- the real tabs -->
      
        <li class="nav-item">
          <a href="/categories/" class="nav-link">
            <i class="fa-fw fas fa-stream"></i>
            

            <span>CATEGORIES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/tags/" class="nav-link">
            <i class="fa-fw fas fa-tags"></i>
            

            <span>TAGS</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/archives/" class="nav-link">
            <i class="fa-fw fas fa-archive"></i>
            

            <span>ARCHIVES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/about/" class="nav-link">
            <i class="fa-fw fas fa-info-circle"></i>
            

            <span>ABOUT</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/portfoio/" class="nav-link">
            <i class="fa-fw fas fa-paper-plane"></i>
            

            <span>PORTFOLIO</span>
          </a>
        </li>
        <!-- .nav-item -->
      
    </ul>
  </nav>

  <div class="sidebar-bottom d-flex flex-wrap  align-items-center w-100">
    
      <button type="button" class="mode-toggle btn" aria-label="Switch Mode">
        <i class="fas fa-adjust"></i>
      </button>

      
        <span class="icon-border"></span>
      
    

    
      

      
        <a
          href="https://github.com/hardworkenglishlearner"
          aria-label="github"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-github"></i>
        </a>
      
    
      

      
        <a
          href="https://twitter.com/twitter_username"
          aria-label="twitter"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fa-brands fa-x-twitter"></i>
        </a>
      
    
      

      
        <a
          href="javascript:location.href = 'mailto:' + ['huybinh.ad','gmail.com'].join('@')"
          aria-label="email"
          

          

          

          
        >
          <i class="fas fa-envelope"></i>
        </a>
      
    
      

      
        <a
          href="/feed.xml"
          aria-label="rss"
          

          

          

          
        >
          <i class="fas fa-rss"></i>
        </a>
      
    
      

      
        <a
          href="https://www.linkedin.com/in/b%C3%ACnh-nguy%E1%BB%85n-75312a7b/"
          aria-label="linkedin"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-linkedin"></i>
        </a>
      
    
  </div>
  <!-- .sidebar-bottom -->
</aside>
<!-- #sidebar -->


    <div id="main-wrapper" class="d-flex justify-content-center">
      <div class="container d-flex flex-column px-xxl-5">
        <!-- The Top Bar -->

<header id="topbar-wrapper" aria-label="Top Bar">
  <div
    id="topbar"
    class="d-flex align-items-center justify-content-between px-lg-3 h-100"
  >
    <nav id="breadcrumb" aria-label="Breadcrumb">
      

      
        
          
            <span>
              <a href="/">Home</a>
            </span>

          
        
          
        
          
            
              <span>AWS Monitoring, Audit, and Performance</span>
            

          
        
      
    </nav>
    <!-- endof #breadcrumb -->

    <button type="button" id="sidebar-trigger" class="btn btn-link">
      <i class="fas fa-bars fa-fw"></i>
    </button>

    <div id="topbar-title">
      Post
    </div>

    <button type="button" id="search-trigger" class="btn btn-link">
      <i class="fas fa-search fa-fw"></i>
    </button>

    <search class="align-items-center ms-3 ms-lg-0">
      <i class="fas fa-search fa-fw"></i>
      <input
        class="form-control"
        id="search-input"
        type="search"
        aria-label="search"
        autocomplete="off"
        placeholder="Search..."
      >
    </search>
    <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button>
  </div>
</header>


        <div class="row flex-grow-1">
          <main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              <!-- Refactor the HTML structure -->



<!--
  In order to allow a wide table to scroll horizontally,
  we suround the markdown table with `<div class="table-wrapper">` and `</div>`
-->



<!--
  Fixed kramdown code highlight rendering:
  https://github.com/penibelst/jekyll-compress-html/issues/101
  https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901
-->



<!-- Change the icon of checkbox -->



<!-- Handle images -->




  
  

  
    
      
      
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  

  


<!-- Add header for code snippets -->



<!-- Create heading anchors -->





  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  

  
  

  

  
  

  




<!-- return -->




<article class="px-1">
  <header>
    <h1 data-toc-skip>AWS Monitoring, Audit, and Performance</h1>

    <div class="post-meta text-muted">
      <!-- published date -->
      <span>
        Posted
        <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1707152400"
  data-df="ll"
  
    data-bs-toggle="tooltip" data-bs-placement="bottom"
  
>
  Feb  6, 2024
</time>

      </span>

      <!-- lastmod date -->
      

      

      <div class="d-flex justify-content-between">
        <!-- author(s) -->
        <span>
          

          By

          <em>
            
              <a href="https://twitter.com/username">Hardwork đẹp trai</a>
            
          </em>
        </span>

        <!-- read time -->
        <!-- Calculate the post's reading time, and display the word count in tooltip -->



<!-- words per minute -->










<!-- return element -->
<span
  class="readtime"
  data-bs-toggle="tooltip"
  data-bs-placement="bottom"
  title="3026 words"
>
  <em>16 min</em> read</span>

      </div>
      <!-- .d-flex -->
    </div>
    <!-- .post-meta -->
  </header>

  <div class="content">
    <h1 id="aws-monitoring-audit-and-performance">AWS Monitoring, Audit and Performance</h1>
<h2 id="aws-cloudwatch-metrics"><span class="me-2">AWS CloudWatch Metrics</span><a href="#aws-cloudwatch-metrics" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
<ul>
  <li>Cloudwatch provides metrics for every services in AWS</li>
  <li>Metric is a variable to monitor (CPUUtilization, NetworkIn…)</li>
  <li>Metrics belong to namespaces</li>
  <li>Dimension is an attribute of a metric (instance id, environment, etc…)</li>
  <li>Up to 10 dimensions per metric</li>
  <li>Metrics have timestamps</li>
  <li>Can create CloudWatch dashboards of metrics
    <h2 id="ec2-detailed-monitoring"><span class="me-2">EC2 Detailed monitoring</span><a href="#ec2-detailed-monitoring" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
  </li>
  <li>EC2 instance metrics have metrics “every 5 minutes”</li>
  <li>With detailed monitoring (for a cost), you get data “every 1 minute”</li>
  <li>Use detailed monitoring if you want to scale faster for you ASG!</li>
  <li>The AWS tier allows us to have 10 detailed monitoring metrics</li>
  <li>Note: EC2 Memory usage is by default not pushed (must be pushed from inside the instance as a custom metric)
    <h2 id="cloudwatch-custom-metrics"><span class="me-2">CloudWatch Custom Metrics</span><a href="#cloudwatch-custom-metrics" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
  </li>
  <li>Possibility to define and send your own custom metrics to CloudWatch</li>
  <li>Example: memory (RAM) usage, disk space, number of logged in users …</li>
  <li>Use API call PutMetricData</li>
  <li>Ability to use dimensions (attributes) to segment metrics
    <ul>
      <li>Instance.id</li>
      <li>Environment.name</li>
    </ul>
  </li>
  <li>Metric resolution (StorageResolution API parameter - two possible value):
    <ul>
      <li>Standard: 1 minute (60 seconds)</li>
      <li>High Resolution: 1/5/10/30 second(s) - Highr cost</li>
    </ul>
  </li>
  <li>Important: Accepts metric data points two weeks in the past and two hours in the future (make sure to configure your EC@ instance time corectly)
    <h2 id="cloudwatch-dashboards"><span class="me-2">CloudWatch Dashboards</span><a href="#cloudwatch-dashboards" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
  </li>
  <li>Great way to setup custom dashboards for quick access to key metrics and alarms</li>
  <li>Dashboards are global</li>
  <li>Dashboards can include graphs from different AWS accounts and regions</li>
  <li>You can change the time zone &amp; time range of dashboards</li>
  <li>You can setup automatic refresh (10s, 1m, 2m, 5m, 15m)</li>
  <li>Dashboards can be shared with people who don’t have an AWS account (public, email address, 3rd party SSO provider through Amazon Cognito)</li>
  <li>Pricing
    <ul>
      <li>3 dashboards (up to 50metrics) for free</li>
      <li>$3/dashboard/month afterwards
        <h2 id="cloudwatch-logs"><span class="me-2">CloudWatch Logs</span><a href="#cloudwatch-logs" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
      </li>
    </ul>
  </li>
  <li>Log groups: arbitrary name, usually representing an application</li>
  <li>Log stream: instances within application / log files / containers</li>
  <li>Can define log expiration policies (never expire, 30 days, etc..)</li>
  <li>CloudWatch Logs can send logs to:
    <ul>
      <li>Amazon S3 (exports)</li>
      <li>Kinesis Data Streams</li>
      <li>Kinesis Data Firehose</li>
      <li>AWS Lambda</li>
      <li>ElasticSearch
        <h2 id="cloudwatch-logs---sources"><span class="me-2">CloudWatch Logs - Sources</span><a href="#cloudwatch-logs---sources" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
      </li>
    </ul>
  </li>
  <li>SDK, CloudWatch Logs Agent, CloudWatch Unified Agent</li>
  <li>Elastic Beanstalk: collection of logs from application</li>
  <li>ECS: collection from containers</li>
  <li>AWS Lambda: collection from function logs</li>
  <li>VPC Flow Logs: VPC specific logs</li>
  <li>API Gateway</li>
  <li>CloudTrail based on filter</li>
  <li>Route53: Log DNS queries
    <h2 id="cloudwatch-logs-metric-filter--insights"><span class="me-2">CloudWatch Logs Metric Filter &amp; Insights</span><a href="#cloudwatch-logs-metric-filter--insights" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
  </li>
  <li>CloudWatch Logs can use filter expressions
    <ul>
      <li>For example, find a specific IP inside of a log</li>
      <li>Or count occurrences of “ERROR” in your logs</li>
    </ul>
  </li>
  <li>Metric filters can be used to triggr CloudWatch alarms</li>
  <li>Cloudwatch Logs Insights can be used to query logs and add queries to CloudWatch Dashboards
    <h2 id="cloudwatch-logs--s3-export"><span class="me-2">CloudWatch Logs – S3 Export</span><a href="#cloudwatch-logs--s3-export" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
  </li>
  <li>Log data can take up to 12 hours to become available for export</li>
  <li>The API call is CreateExportTask</li>
  <li>Not near-real time or real-time… use Logs Subscriptions instead
    <h2 id="cloudwatch-logs-subscriptions"><span class="me-2">CloudWatch Logs Subscriptions</span><a href="#cloudwatch-logs-subscriptions" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
    <p><a href="https://data.terabox.com/thumbnail/04abc5033f62ea9559263837c91802af?fid=4401547290288-250528-654347901904295&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-onXs40WxMS4HewLr0eNfRXPOyCI%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=214382886743684890&amp;dp-callid=0&amp;time=1667534400&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" class="popup img-link  shimmer"><img src="https://data.terabox.com/thumbnail/04abc5033f62ea9559263837c91802af?fid=4401547290288-250528-654347901904295&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-onXs40WxMS4HewLr0eNfRXPOyCI%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=214382886743684890&amp;dp-callid=0&amp;time=1667534400&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" loading="lazy"></a></p>
    <h2 id="cloudwatch-logs-aggregation-multi-account--multi-region"><span class="me-2">CloudWatch Logs Aggregation Multi-Account &amp; Multi Region</span><a href="#cloudwatch-logs-aggregation-multi-account--multi-region" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
    <p><a href="https://data.terabox.com/thumbnail/e8fd758c11e0bf1d1e7e19899638dc31?fid=4401547290288-250528-564143060683598&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-3piASJj%2fo9lfq5mCGzX6e9gghjQ%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=214454843239863206&amp;dp-callid=0&amp;time=1667534400&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" class="popup img-link  shimmer"><img src="https://data.terabox.com/thumbnail/e8fd758c11e0bf1d1e7e19899638dc31?fid=4401547290288-250528-564143060683598&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-3piASJj%2fo9lfq5mCGzX6e9gghjQ%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=214454843239863206&amp;dp-callid=0&amp;time=1667534400&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" loading="lazy"></a></p>
    <h2 id="cloudwatch-logs-for-ec2"><span class="me-2">CloudWatch Logs for EC2</span><a href="#cloudwatch-logs-for-ec2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
  </li>
  <li>By default, no logs from your EC2 machine will go to CloudWatch</li>
  <li>You need to run a CloudWatch agent on EC2 to push the log files you want</li>
  <li>Make sure IAM permissions are correct</li>
  <li>The CloudWatch log agent can be setup on premises too
<a href="https://data.terabox.com/thumbnail/94bbe0b65ca286890f346b574f151f34?fid=4401547290288-250528-696868206928029&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-aS1mqiv8UdNHkdyIrcSC9kGELD4%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=214502317154085731&amp;dp-callid=0&amp;time=1667534400&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" class="popup img-link  shimmer"><img src="https://data.terabox.com/thumbnail/94bbe0b65ca286890f346b574f151f34?fid=4401547290288-250528-696868206928029&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-aS1mqiv8UdNHkdyIrcSC9kGELD4%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=214502317154085731&amp;dp-callid=0&amp;time=1667534400&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" loading="lazy"></a>
    <h2 id="cloudwatch-logs-agent--unified-agent"><span class="me-2">CloudWatch Logs Agent &amp; Unified Agent</span><a href="#cloudwatch-logs-agent--unified-agent" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
  </li>
  <li>For virtual servers (EC2 instances, on-premises servers…)</li>
  <li>CloudWatch Logs Agent
    <ul>
      <li>Old version of the agent</li>
      <li>Can only send to CloudWatch Logs</li>
    </ul>
  </li>
  <li>CloudWatch Unified Agent
    <ul>
      <li>Collect additional system-level metrics such as RAM, processes, etc…</li>
      <li>Collect logs to send to CloudWatch Logs</li>
      <li>Centralized configuration using SSM Parameter Store
        <h2 id="cloudwatch-unified-agent--metrics"><span class="me-2">CloudWatch Unified Agent – Metrics</span><a href="#cloudwatch-unified-agent--metrics" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
      </li>
    </ul>
  </li>
  <li>Collected directly on your Linux server / EC2 instance</li>
  <li>CPU (active, guest, idle, system, user, steal)</li>
  <li>Disk metrics (free, used, total), Disk IO (writes, reads, bytes, iops)</li>
  <li>RAM (free, inactive, used, total, cached)</li>
  <li>Netstat (number of TCP and UDP connections, net packets, bytes)</li>
  <li>Processes (total, dead, bloqued, idle, running, sleep)</li>
  <li>Swap Space (free, used, used %)</li>
  <li>Reminder: out-of-the box metrics for EC2 – disk, CPU, network (high level)
    <h2 id="cloudwatch-alarms"><span class="me-2">CloudWatch Alarms</span><a href="#cloudwatch-alarms" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
  </li>
  <li>Alarms are used to trigger notifications for any metric</li>
  <li>Various options (sampling, %, max, min, etc…)</li>
  <li>Alarm States:
    <ul>
      <li>OK</li>
      <li>INSUFFICIENT_DATA</li>
      <li>ALARM</li>
    </ul>
  </li>
  <li>Period:
    <ul>
      <li>Length of time in seconds to evaluate the metric</li>
      <li>High resolution custom metrics: 10 sec, 30 sec or multiples of 60 sec
        <h2 id="cloudwatch-alarm-targets"><span class="me-2">CloudWatch Alarm Targets</span><a href="#cloudwatch-alarm-targets" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
      </li>
    </ul>
  </li>
  <li>Stop, Terminate, Reboot, or Recover an EC2 Instance</li>
  <li>Trigger Auto Scaling Action</li>
  <li>Send notification to SNS (from which you can do pretty much anything)
<a href="https://data.terabox.com/thumbnail/ddbaea3f8ded408a8f0653c3d65c0a71?fid=4401547290288-250528-797778510712352&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-98bL1hXiVpkLZUcaHUSmZ0PhaCk%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=214613010955798462&amp;dp-callid=0&amp;time=1667534400&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" class="popup img-link  shimmer"><img src="https://data.terabox.com/thumbnail/ddbaea3f8ded408a8f0653c3d65c0a71?fid=4401547290288-250528-797778510712352&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-98bL1hXiVpkLZUcaHUSmZ0PhaCk%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=214613010955798462&amp;dp-callid=0&amp;time=1667534400&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" loading="lazy"></a>
    <h2 id="ec2-instance-recovery"><span class="me-2">EC2 Instance Recovery</span><a href="#ec2-instance-recovery" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
  </li>
  <li>Status Check:
    <ul>
      <li>Instance status = check the EC2 VM</li>
      <li>System status = check the underlying hardware</li>
    </ul>
  </li>
  <li>Recovery: Same Private, Public, Elastic IP, metadata, placement group
<a href="https://data.terabox.com/thumbnail/e2f4b6e0be6f860bba4ae42014d37403?fid=4401547290288-250528-247094783744706&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-qqAWhdFvYxfoxtPL%2fawDafGEceM%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=214633180891749929&amp;dp-callid=0&amp;time=1667534400&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" class="popup img-link  shimmer"><img src="https://data.terabox.com/thumbnail/e2f4b6e0be6f860bba4ae42014d37403?fid=4401547290288-250528-247094783744706&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-qqAWhdFvYxfoxtPL%2fawDafGEceM%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=214633180891749929&amp;dp-callid=0&amp;time=1667534400&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" loading="lazy"></a>
    <h2 id="cloudwatch-events"><span class="me-2">CloudWatch Events</span><a href="#cloudwatch-events" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
  </li>
  <li>Event pattern: Interceot events from AWS services (Sources)
    <ul>
      <li>Example sources: EC2 instance start, CodeBuild Failre, S3, Trusted Advisor</li>
      <li>Can intercept any API call with CloudTrai integration</li>
    </ul>
  </li>
  <li>Schedule or Cron (example: create an event every 4 hours)</li>
  <li>A JSON payload is created from the event and passed to a target…
    <ul>
      <li>Compute: Lambda, Batch, ECS task</li>
      <li>Integration: SQS, SNS, Kinesis Data Streams, Kinesis Data Firehose</li>
      <li>Orchestration: Step functions, CodePipeline, CodeBuild</li>
      <li>Maintenance: SSM, EC2 Actions
        <h2 id="amazon-eventbridge"><span class="me-2">Amazon EventBridge</span><a href="#amazon-eventbridge" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
      </li>
    </ul>
  </li>
  <li>EventBridge is the next evolution of CloudWatch Events</li>
  <li>Default Event Bus - generated by AWS services (CloudWatch Events)</li>
  <li>Partner Event Bus: receive events from SaaS service or applications (Zendesk, DataDog, Segment, Auth0…)</li>
  <li>Custom Event Buses: for your own applications</li>
  <li>Event Buses can be accessed by other AWS accounts</li>
  <li>You can archive events (all/filter) sent to an event bus (indefinitely or set period)</li>
  <li>Ability to replay archived events</li>
  <li>Rules: how to process the events (like couldwatch events)
    <h2 id="amazon-evntbridge---schema-registry"><span class="me-2">Amazon EvntBridge - Schema Registry</span><a href="#amazon-evntbridge---schema-registry" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
  </li>
  <li>EventBridge can analyze the events in your bus and infer the schema</li>
  <li>The Schema Registry allows you to generate code for your application, that will know in advance how data is structured in the event bus</li>
  <li>Schema can be versioned
    <h2 id="amazon-eventbridge--resource-based-policy"><span class="me-2">Amazon EventBridge – Resource-based Policy</span><a href="#amazon-eventbridge--resource-based-policy" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
  </li>
  <li>Manage permissions for a specific Event Bus</li>
  <li>Example: allow/deny events from another AWS account or AWS region</li>
  <li>Use case: aggregate all events from your AWS Organization in a single AWS account or AWS region
<a href="https://data.terabox.com/thumbnail/1062a56fc93b25be661215f52fb713c6?fid=4401547290288-250528-732538512753138&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-jMuvWqMrK%2f9ZdDpnpE8OFOQzuGI%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=215098522923733259&amp;dp-callid=0&amp;time=1667534400&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" class="popup img-link  shimmer"><img src="https://data.terabox.com/thumbnail/1062a56fc93b25be661215f52fb713c6?fid=4401547290288-250528-732538512753138&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-jMuvWqMrK%2f9ZdDpnpE8OFOQzuGI%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=215098522923733259&amp;dp-callid=0&amp;time=1667534400&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" loading="lazy"></a>
    <h2 id="amazon-eventbridge-vs-cloudwatch-events"><span class="me-2">Amazon EventBridge vs CloudWatch Events</span><a href="#amazon-eventbridge-vs-cloudwatch-events" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
  </li>
  <li>Amazon EventBridge builds upon and extends CloudWatch Events.</li>
  <li>It uses the same service API and endpoint, and the same undrlying service infrastructure</li>
  <li>EventBridge allows extension to add event buses for your custom applications and your third-party SaaS apps.</li>
  <li>Event Bridge has the Schema registry capability</li>
  <li>EventBridge has a different name to mark the new capabilities</li>
  <li>Over time, the CloudWatch Events name will be replaced with EventBridge
    <h2 id="aws-cloudtrail"><span class="me-2">AWS CloudTrail</span><a href="#aws-cloudtrail" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
  </li>
  <li>Provides governance, compliance and audit for your AWS Account</li>
  <li>CloudTrail is enabled by default!</li>
  <li>Get an history of events / API calls made within your AWS Account by:
    <ul>
      <li>Console</li>
      <li>SDK</li>
      <li>CLI</li>
      <li>AWS Services</li>
    </ul>
  </li>
  <li>Can put logs from CloudTrail into Cloud</li>
  <li>A trail can be applied to All Regions (default) or a single Region</li>
  <li>If a resource is deleted in AWS, investigate CloudTrail first!
    <h2 id="cloudtrail-diagram"><span class="me-2">CloudTrail Diagram</span><a href="#cloudtrail-diagram" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
    <p><a href="https://data.terabox.com/thumbnail/02bbac5944dd32497977380a03adc90a?fid=4401547290288-250528-214387842489131&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-xgqy9yQh980wuzWUNLu%2brYoNwFs%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=216773946963548255&amp;dp-callid=0&amp;time=1667541600&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" class="popup img-link  shimmer"><img src="https://data.terabox.com/thumbnail/02bbac5944dd32497977380a03adc90a?fid=4401547290288-250528-214387842489131&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-xgqy9yQh980wuzWUNLu%2brYoNwFs%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=216773946963548255&amp;dp-callid=0&amp;time=1667541600&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" loading="lazy"></a></p>
    <h2 id="cloudtrail-events"><span class="me-2">CloudTrail Events</span><a href="#cloudtrail-events" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
  </li>
  <li>Management Events:
    <ul>
      <li>Operations that are performed on resources in your AWS account</li>
      <li>Examples:
        <ul>
          <li>Configuring security (IAM AttachRolePolicy)</li>
          <li>Configuring rules for routing data (Amazon EC2 CreateSubnet)</li>
          <li>Setting up logging (AWS CloudTrail CreateTrail)</li>
        </ul>
      </li>
      <li>By default, trails are configured to log management events.</li>
      <li>Can separate Read Events (that don’t modify resources) from Write Events (that may modify resources)</li>
    </ul>
  </li>
  <li>Data Events:
    <ul>
      <li>By default, data events are not logged (because high volume operations)</li>
      <li>Amazon S3 object-level activity (ex: GetObject, DeleteObject, PutObject ): can separate Read and Write Events</li>
      <li>AWS Lambda function execution activity (the Invoke API)</li>
    </ul>
  </li>
  <li>CloudTrail Insights Events
    <ul>
      <li>See next slide
        <h2 id="cloudtrail-insights"><span class="me-2">CloudTrail Insights</span><a href="#cloudtrail-insights" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
      </li>
    </ul>
  </li>
  <li>Enable CloudTrail Insights to detect unusual activity in your account:
    <ul>
      <li>inaccurate resource provisioning</li>
      <li>hitting service limits</li>
      <li>Bursts of AWS IAM actions</li>
      <li>Gaps in periodic maintenance activity</li>
    </ul>
  </li>
  <li>CloudTrail Insights analyzes normal management events to create a baseline</li>
  <li>And then continuously analyzes write events to detect unusual patterns
    <ul>
      <li>Anomalies appear in the CloudTrail console</li>
      <li>Event is sent to Amazon S3</li>
      <li>An EventBridge event is generated (for automation needs)
<a href="https://data.terabox.com/thumbnail/d03d0805fe9fb0bc9c6875db29411916?fid=4401547290288-250528-921135651322767&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-aC53BeSg0dRKxConuj%2bWytxh1%2b4%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=216881216511701042&amp;dp-callid=0&amp;time=1667541600&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" class="popup img-link  shimmer"><img src="https://data.terabox.com/thumbnail/d03d0805fe9fb0bc9c6875db29411916?fid=4401547290288-250528-921135651322767&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-aC53BeSg0dRKxConuj%2bWytxh1%2b4%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=216881216511701042&amp;dp-callid=0&amp;time=1667541600&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" loading="lazy"></a>
        <h2 id="cloudtrail-events-retention"><span class="me-2">CloudTrail Events Retention</span><a href="#cloudtrail-events-retention" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
      </li>
    </ul>
  </li>
  <li>Events are stored for 90 days in CloudTrail</li>
  <li>To keep events beyond this period, log them to S3 and use Athena
<a href="https://data.terabox.com/thumbnail/57a5f83744cba9eda0a2b025deb798e0?fid=4401547290288-250528-975671270385073&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-OeWjkd5je8R2SHJ3yp3V0Di%2b6xo%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=216898217029829320&amp;dp-callid=0&amp;time=1667541600&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" class="popup img-link  shimmer"><img src="https://data.terabox.com/thumbnail/57a5f83744cba9eda0a2b025deb798e0?fid=4401547290288-250528-975671270385073&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-OeWjkd5je8R2SHJ3yp3V0Di%2b6xo%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=216898217029829320&amp;dp-callid=0&amp;time=1667541600&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" loading="lazy"></a>
    <h2 id="aws-config"><span class="me-2">AWS Config</span><a href="#aws-config" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
  </li>
  <li>Helps with auditing and recording compliance of your AWS resources</li>
  <li>Helps record configurations and changes over time</li>
  <li>Questions that can be solved by AWS Config:
    <ul>
      <li>Is there unrestricted SSH access to my security groups?</li>
      <li>Do my buckets have any public access?</li>
      <li>How has my ALB configuration changed over time?</li>
    </ul>
  </li>
  <li>You can receive alerts (SNS notifications) for any changes</li>
  <li>AWS Config is a per-region service</li>
  <li>Can be aggregated across regions and accounts</li>
  <li>Possibility of storing the configuration data into S3 (analyzed by Athena)
    <h2 id="config-rules"><span class="me-2">Config Rules</span><a href="#config-rules" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
  </li>
  <li>Can use AWS managed config rules (over 75)</li>
  <li>Can make custom config rules (must be defined in AWS Lambda)
    <ul>
      <li>Ex: evaluate if each EBS disk is of type gp2</li>
      <li>Ex: evaluate if each EC2 instance is t2.micro</li>
    </ul>
  </li>
  <li>Rules can be evaluated / triggered:
    <ul>
      <li>For each config change</li>
      <li>And / or: at regular time intervals</li>
    </ul>
  </li>
  <li>AWS Config Rules does not prevent actions from happening (no deny)</li>
  <li>Pricing: no free tier, $0.003 per configuration item recorded per region,
$0.001 per config rule evaluation per region
    <h2 id="aws-config-resource"><span class="me-2">AWS Config Resource</span><a href="#aws-config-resource" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
  </li>
  <li>View compliance of a resource over time</li>
  <li>View configuration of a resource over time</li>
  <li>View CloudTrail API calls of a resource over time
<a href="https://data.terabox.com/thumbnail/0b03aa61f9308e33d2a4f29ed032b8e8?fid=4401547290288-250528-126345804289668&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-9tlYGB3a2lXlNx6tpxGU33Gyfzk%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=216970130579784745&amp;dp-callid=0&amp;time=1667541600&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" class="popup img-link  shimmer"><img src="https://data.terabox.com/thumbnail/0b03aa61f9308e33d2a4f29ed032b8e8?fid=4401547290288-250528-126345804289668&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-9tlYGB3a2lXlNx6tpxGU33Gyfzk%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=216970130579784745&amp;dp-callid=0&amp;time=1667541600&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" loading="lazy"></a>
    <h2 id="config-rules--remediations"><span class="me-2">Config Rules – Remediations</span><a href="#config-rules--remediations" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
  </li>
  <li>Automate remediation of non-compliant resources using SSM Automation
Documents</li>
  <li>Use AWS-Managed Automation Documents or create custom Automation
Documents
    <ul>
      <li>Tip: you can create custom Automation Documents that invokes Lambda function</li>
    </ul>
  </li>
  <li>You can set Remediation Retries if the resource is still non-compliant after auto-remediation
    <h2 id="config-rules--notifications"><span class="me-2">Config Rules – Notifications</span><a href="#config-rules--notifications" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
  </li>
  <li>Use EventBridge to trigger notifications when AWS resources are non-compliant
<a href="https://data.terabox.com/thumbnail/a8cc45b5f21a7b84a2572d25bb429135?fid=4401547290288-250528-103163448512458&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-xK%2bhzEo83usxGVgyMZ90qzk1Yc0%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=217017174480331262&amp;dp-callid=0&amp;time=1667541600&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" class="popup img-link  shimmer"><img src="https://data.terabox.com/thumbnail/a8cc45b5f21a7b84a2572d25bb429135?fid=4401547290288-250528-103163448512458&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-xK%2bhzEo83usxGVgyMZ90qzk1Yc0%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=217017174480331262&amp;dp-callid=0&amp;time=1667541600&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" loading="lazy"></a></li>
  <li>Ability to send configuration changes and compliance state notifications
to SNS (all events – use SNS Filtering or filter at client-side)
<a href="https://data.terabox.com/thumbnail/62129b58c7d62f89ce9a2babea056a9b?fid=4401547290288-250528-559254806949063&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-nBO5AgojcgZ2CnjrswOMU39KuJw%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=217030677069452616&amp;dp-callid=0&amp;time=1667541600&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" class="popup img-link  shimmer"><img src="https://data.terabox.com/thumbnail/62129b58c7d62f89ce9a2babea056a9b?fid=4401547290288-250528-559254806949063&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-nBO5AgojcgZ2CnjrswOMU39KuJw%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=217030677069452616&amp;dp-callid=0&amp;time=1667541600&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" loading="lazy"></a>
    <h2 id="cloudwatch-vs-cloudtrail-vs-config"><span class="me-2">CloudWatch vs CloudTrail vs Config</span><a href="#cloudwatch-vs-cloudtrail-vs-config" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
  </li>
  <li>CloudWatch
    <ul>
      <li>Performance monitoring (metrics, CPU, network, etc…) &amp; dashboards</li>
      <li>Events &amp; Alerting</li>
      <li>Log Aggregation &amp; Analysis</li>
    </ul>
  </li>
  <li>CloudTrail
    <ul>
      <li>Record API calls made within your Account by everyone</li>
      <li>Can define trails for specific resources</li>
      <li>Global Service</li>
    </ul>
  </li>
  <li>Config
    <ul>
      <li>Record configuration changes</li>
      <li>Evaluate resources against compliance rules</li>
      <li>Get timeline of changes and compliance
        <h2 id="for-an-elastic-load-balancer"><span class="me-2">For an Elastic Load Balancer</span><a href="#for-an-elastic-load-balancer" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
      </li>
    </ul>
  </li>
  <li>CloudWatch:
    <ul>
      <li>Monitoring Incoming connections metric</li>
      <li>Visualize error codes as % over time</li>
      <li>Make a dashboard to get an idea of your load balancer performance</li>
    </ul>
  </li>
  <li>Config:
    <ul>
      <li>Track security group rules for the Load Balancer</li>
      <li>Track configuration changes for the Load Balancer</li>
      <li>Ensure an SSL certificate is always assigned to the Load Balancer (compliance)</li>
    </ul>
  </li>
  <li>CloudTrail:
    <ul>
      <li>Track who made any changes to the Load Balancer with API calls
        <h2 id="aws-sts--security-token-service"><span class="me-2">AWS STS – Security Token Service</span><a href="#aws-sts--security-token-service" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
      </li>
    </ul>
  </li>
  <li>Allows to grant limited and temporary access to AWS resources.</li>
  <li>Token is valid for up to one hour (must be refreshed)</li>
  <li>AssumeRole
    <ul>
      <li>Within your own account: for enhanced security</li>
      <li>Cross Account Access: assume role in target account to perform actions there</li>
    </ul>
  </li>
  <li>AssumeRoleWithSAML
    <ul>
      <li>return credentials for users logged with SAML</li>
    </ul>
  </li>
  <li>AssumeRoleWithWebIdentity
    <ul>
      <li>return creds for users logged with an IdP (Facebook Login, Google Login, OIDC compatible…)</li>
      <li>AWS recommends against using this, and using Cognito instead</li>
    </ul>
  </li>
  <li>GetSessionToken
    <ul>
      <li>for MFA, from a user or AWS account root user
        <h2 id="using-sts-to-assume-a-role"><span class="me-2">Using STS to Assume a Role</span><a href="#using-sts-to-assume-a-role" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
      </li>
    </ul>
  </li>
  <li>Define an IAM Role within your account or cross-account</li>
  <li>Define which principals can access this IAM Role</li>
  <li>Use AWS STS (Security Token Service) to retrieve credentials and impersonate the IAM Role you have access to (AssumeRole API)</li>
  <li>Temporary credentials can be valid between 15 minutes to 1 hour
<a href="https://data.terabox.com/thumbnail/f1d2c1be6986a81036eac50b1bcc816d?fid=4401547290288-250528-586507772444246&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-dQeHKjTxRALscaP17oqmSwEGKB8%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=217154853426255026&amp;dp-callid=0&amp;time=1667541600&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" class="popup img-link  shimmer"><img src="https://data.terabox.com/thumbnail/f1d2c1be6986a81036eac50b1bcc816d?fid=4401547290288-250528-586507772444246&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-dQeHKjTxRALscaP17oqmSwEGKB8%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=217154853426255026&amp;dp-callid=0&amp;time=1667541600&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" loading="lazy"></a>
    <h2 id="cross-account-access-with-sts"><span class="me-2">Cross account access with STS</span><a href="#cross-account-access-with-sts" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
    <p><a href="https://data.terabox.com/thumbnail/dd93815065652baf5575c1edf5d2b9ff?fid=4401547290288-250528-106028331143318&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-c5%2bFMH%2bj6jKHB3fUlFbfzxrUSiI%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=217170673819591883&amp;dp-callid=0&amp;time=1667545200&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" class="popup img-link  shimmer"><img src="https://data.terabox.com/thumbnail/dd93815065652baf5575c1edf5d2b9ff?fid=4401547290288-250528-106028331143318&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-c5%2bFMH%2bj6jKHB3fUlFbfzxrUSiI%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=217170673819591883&amp;dp-callid=0&amp;time=1667545200&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" loading="lazy"></a></p>
    <h2 id="identity-federation-in-aws"><span class="me-2">Identity Federation in AWS</span><a href="#identity-federation-in-aws" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
  </li>
  <li>Federation lets users outside of AWS to assume temporary role for accessing AWS resources.</li>
  <li>These users assume identity provided access role.</li>
  <li>Federations can have many flavors:
    <ul>
      <li>SAML 2.0</li>
      <li>Custom Identity Broker</li>
      <li>Web Identity Federation with Amazon Cognito</li>
      <li>Web Identity Federation without Amazon Cognito</li>
      <li>Single Sign On</li>
      <li>Non-SAML with AWS Microsoft AD</li>
    </ul>
  </li>
  <li>Using federation, you don’t need to create IAM users (user management is outside of AWS)
<a href="https://data.terabox.com/thumbnail/b7b593e9b55d8eb96e9bc621ccb6658e?fid=4401547290288-250528-334549767703471&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-PLQKzuPbp1gY%2fht9WBM2zq5gd6U%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=217204789707972375&amp;dp-callid=0&amp;time=1667545200&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" class="popup img-link  shimmer"><img src="https://data.terabox.com/thumbnail/b7b593e9b55d8eb96e9bc621ccb6658e?fid=4401547290288-250528-334549767703471&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-PLQKzuPbp1gY%2fht9WBM2zq5gd6U%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=217204789707972375&amp;dp-callid=0&amp;time=1667545200&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" loading="lazy"></a>
    <h2 id="saml-20-federation"><span class="me-2">SAML 2.0 Federation</span><a href="#saml-20-federation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
  </li>
  <li>To integrate Active Directory / ADFS with AWS (or any SAML 2.0)</li>
  <li>Provides access to AWS Console or CLI (through temporary creds)</li>
  <li>No need to create an IAM user for each of your employees
<a href="https://data.terabox.com/thumbnail/c7b6d0d32fb9325fa79378ae2db95960?fid=4401547290288-250528-392525858093714&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-N7xJnVPKomz6%2bzW4X3V59PFjECQ%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=218333761575233277&amp;dp-callid=0&amp;time=1667548800&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" class="popup img-link  shimmer"><img src="https://data.terabox.com/thumbnail/c7b6d0d32fb9325fa79378ae2db95960?fid=4401547290288-250528-392525858093714&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-N7xJnVPKomz6%2bzW4X3V59PFjECQ%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=218333761575233277&amp;dp-callid=0&amp;time=1667548800&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" loading="lazy"></a>
    <h2 id="saml-20-federation--active-directory-fs"><span class="me-2">SAML 2.0 Federation – Active Directory FS</span><a href="#saml-20-federation--active-directory-fs" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
  </li>
  <li>Same process as with any SAML 2.0 compatible IdP
<a href="https://data.terabox.com/thumbnail/8d166b5f5668aaaaf8afb53e2a1f7ac0?fid=4401547290288-250528-886776048673321&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-OE2vKD3%2fQ88rJyhXCWF0zxrtBOc%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=218375574990367700&amp;dp-callid=0&amp;time=1667548800&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" class="popup img-link  shimmer"><img src="https://data.terabox.com/thumbnail/8d166b5f5668aaaaf8afb53e2a1f7ac0?fid=4401547290288-250528-886776048673321&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-OE2vKD3%2fQ88rJyhXCWF0zxrtBOc%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=218375574990367700&amp;dp-callid=0&amp;time=1667548800&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" loading="lazy"></a>
    <h2 id="saml-20-federation-1"><span class="me-2">SAML 2.0 Federation</span><a href="#saml-20-federation-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
  </li>
  <li>Needs to setup a trust between AWS IAM and SAML (both ways)</li>
  <li>SAML 2.0 enables web-based, cross domain SSO</li>
  <li>Uses the STS API: AssumeRoleWithSAML</li>
  <li>Note federation through SAML is the “old way” of doing things</li>
  <li>Amazon Single Sign On (SSO) Federation is the new managed and
simpler way
    <ul>
      <li>Read more here: https://aws.amazon.com/blogs/security/enabling-federation-to-aws-using-windows-active-directory-adfs-and-saml-2-0/
        <h2 id="custom-identity-broker-application"><span class="me-2">Custom Identity Broker Application</span><a href="#custom-identity-broker-application" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
      </li>
    </ul>
  </li>
  <li>Use only if identity provider is not compatible with SAML 2.0</li>
  <li>The identity broker must determine the appropriate IAM policy</li>
  <li>Uses the STS API: AssumeRole or GetFederationToken
<a href="https://data.terabox.com/thumbnail/c84c5765074b7152eaaf54c23a13230e?fid=4401547290288-250528-529214597819384&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-rzChLMVt0SwfeP2szURmVug0YF0%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=218515452911764723&amp;dp-callid=0&amp;time=1667548800&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" class="popup img-link  shimmer"><img src="https://data.terabox.com/thumbnail/c84c5765074b7152eaaf54c23a13230e?fid=4401547290288-250528-529214597819384&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-rzChLMVt0SwfeP2szURmVug0YF0%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=218515452911764723&amp;dp-callid=0&amp;time=1667548800&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" loading="lazy"></a>
    <h2 id="web-identity-federation--assumerolewithwebidentity"><span class="me-2">Web Identity Federation – AssumeRoleWithWebIdentity</span><a href="#web-identity-federation--assumerolewithwebidentity" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
  </li>
  <li>Not recommended by AWS – use Cognito instead (allows for anonymous users, data synchronization, MFA)
<a href="https://data.terabox.com/thumbnail/b422116600cfe161f80bddce9e993c50?fid=4401547290288-250528-291953383498164&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-Ffo0tucrBoAmDnukDQ%2bz7YTSy%2bE%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=218568517770816282&amp;dp-callid=0&amp;time=1667548800&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" class="popup img-link  shimmer"><img src="https://data.terabox.com/thumbnail/b422116600cfe161f80bddce9e993c50?fid=4401547290288-250528-291953383498164&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-Ffo0tucrBoAmDnukDQ%2bz7YTSy%2bE%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=218568517770816282&amp;dp-callid=0&amp;time=1667548800&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" loading="lazy"></a>
    <h2 id="aws-cognito"><span class="me-2">AWS Cognito</span><a href="#aws-cognito" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
  </li>
  <li>Goal:
    <ul>
      <li>Provide direct access to AWS Resources from the Client Side (mobile, web app)</li>
    </ul>
  </li>
  <li>Example:
    <ul>
      <li>provide (temporary) access to write to S3 bucket using Facebook Login</li>
    </ul>
  </li>
  <li>Problem:
    <ul>
      <li>We don’t want to create IAM users for our app users</li>
    </ul>
  </li>
  <li>How:
    <ul>
      <li>Log in to federated identity provider – or remain anonymous</li>
      <li>Get temporary AWS credentials back from the Federated Identity Pool</li>
      <li>These credentials come with a pre-defined IAM policy stating their permissions
        <h2 id="what-is-microsoft-active-directory-ad"><span class="me-2">What is Microsoft Active Directory (AD)?</span><a href="#what-is-microsoft-active-directory-ad" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
      </li>
    </ul>
  </li>
  <li>Found on any Windows Server with AD Domain Services</li>
  <li>Database of objects: User Accounts, Computers, Printers, File Shares, Security Groups</li>
  <li>Centralized security management, create account, assign permissions</li>
  <li>Objects are organized in trees</li>
  <li>A group of trees is a forest
    <h2 id="aws-directory-services"><span class="me-2">AWS Directory Services</span><a href="#aws-directory-services" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
  </li>
  <li>AWS Managed Microsoft AD
    <ul>
      <li>Create your own AD in AWS, manage users locally, supports MFA</li>
      <li>Establish “trust” connections with your on-premises AD</li>
    </ul>
  </li>
  <li>AD Connector
    <ul>
      <li>Directory Gateway (proxy) to redirect to on-premises AD, supports MFA</li>
      <li>Users are managed on the on-premises AD</li>
    </ul>
  </li>
  <li>Simple AD
    <ul>
      <li>AD-compatible managed directory on AWS</li>
      <li>Cannot be joined with on-premises AD
        <h2 id="aws-organizations"><span class="me-2">AWS Organizations</span><a href="#aws-organizations" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
      </li>
    </ul>
  </li>
  <li>Global service</li>
  <li>Allows to manage multiple AWS accounts</li>
  <li>The main account is the master account – you can’t change it</li>
  <li>Other accounts are member accounts</li>
  <li>Member accounts can only be part of one organiztion</li>
  <li>Consolidated Billing across all accounts - single payment method</li>
  <li>Pricing benefits from aggregated usage (volume discount for EC2, S3…)</li>
  <li>API is available to automate AWS account creation
    <h2 id="multi-account-strategies"><span class="me-2">Multi Account Strategies</span><a href="#multi-account-strategies" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
  </li>
  <li>Create accounts per department, per cost center, per dev / test / prod, based on regulatory restrictions (using SCP), for better resource isolation (ex: VPC), to have separate per-account service limit, isolated account for logging</li>
  <li>Multi Account vs One Account Multi VPC</li>
  <li>Use tagging standards for billing purposes</li>
  <li>Enable CloudTrail on all accounts, send logs to central S3 account</li>
  <li>Send CloudWatch logs to central logging account</li>
  <li>Establish cross account roles for admin purposes
    <h2 id="organizational-units-ou---examples"><span class="me-2">Organizational Units (OU) - Examples</span><a href="#organizational-units-ou---examples" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
    <p><a href="https://data.terabox.com/thumbnail/35165b599028b6e66b8ff3c68261e234?fid=4401547290288-250528-100081827684100&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-Js5vxsrebBtVLAyN1KJuw9elCNw%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=219979697638906354&amp;dp-callid=0&amp;time=1667552400&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" class="popup img-link  shimmer"><img src="https://data.terabox.com/thumbnail/35165b599028b6e66b8ff3c68261e234?fid=4401547290288-250528-100081827684100&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-Js5vxsrebBtVLAyN1KJuw9elCNw%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=219979697638906354&amp;dp-callid=0&amp;time=1667552400&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" loading="lazy"></a></p>
    <h2 id="aws-organization"><span class="me-2">AWS Organization</span><a href="#aws-organization" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
    <p><a href="https://data.terabox.com/thumbnail/0d68a0e813e6cbf2d725939349d08c5f?fid=4401547290288-250528-167070688745664&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-eyL115l79CGrrkXSambKyQM6iyo%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=219991520664672598&amp;dp-callid=0&amp;time=1667552400&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" class="popup img-link  shimmer"><img src="https://data.terabox.com/thumbnail/0d68a0e813e6cbf2d725939349d08c5f?fid=4401547290288-250528-167070688745664&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-eyL115l79CGrrkXSambKyQM6iyo%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=219991520664672598&amp;dp-callid=0&amp;time=1667552400&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" loading="lazy"></a></p>
    <h2 id="service-control-policies-scp"><span class="me-2">Service Control Policies (SCP)</span><a href="#service-control-policies-scp" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
  </li>
  <li>Whitelist or blacklist IAM actions</li>
  <li>Applied at the OU or Account level</li>
  <li>Does not apply to the Master Account</li>
  <li>SCP is applied to all the Users and Roles of the Account, including Root user</li>
  <li>The SCP does not affect service-linked roles
    <ul>
      <li>Service-linked roles enable other AWS services to integrate with AWS Organizations and can’t be restricted by SCPs.</li>
    </ul>
  </li>
  <li>SCP must have an explicit Allow (does not allow anything by default)</li>
  <li>Use cases:
    <ul>
      <li>Restrict access to certain services (for example: can’t use EMR)</li>
      <li>Enforce PCI compliance by explicitly disabling services
        <h2 id="scp-hierarchy"><span class="me-2">SCP Hierarchy</span><a href="#scp-hierarchy" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
        <p><a href="https://data.terabox.com/thumbnail/2285cc827173fd732d8454786920cc49?fid=4401547290288-250528-35219311130830&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-1OE9aXOfPDhIAxYgMKQgnmgH8Cc%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220027427804734668&amp;dp-callid=0&amp;time=1667552400&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" class="popup img-link  shimmer"><img src="https://data.terabox.com/thumbnail/2285cc827173fd732d8454786920cc49?fid=4401547290288-250528-35219311130830&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-1OE9aXOfPDhIAxYgMKQgnmgH8Cc%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220027427804734668&amp;dp-callid=0&amp;time=1667552400&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" loading="lazy"></a>
<a href="https://data.terabox.com/thumbnail/48227a166faffa2f5c5f45c81bd7467f?fid=4401547290288-250528-432741673575103&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-pAm%2bVCEHq5be4n1u9sP0KMfz%2f6M%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220050632987484899&amp;dp-callid=0&amp;time=1667552400&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" class="popup img-link  shimmer"><img src="https://data.terabox.com/thumbnail/48227a166faffa2f5c5f45c81bd7467f?fid=4401547290288-250528-432741673575103&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-pAm%2bVCEHq5be4n1u9sP0KMfz%2f6M%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220050632987484899&amp;dp-callid=0&amp;time=1667552400&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" loading="lazy"></a></p>
        <h2 id="aws-organization--moving-accounts"><span class="me-2">AWS Organization – Moving Accounts</span><a href="#aws-organization--moving-accounts" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
      </li>
    </ul>
  </li>
  <li>To migrate accounts from one organization to another
    <ol>
      <li>Remove the member account from the old organization</li>
      <li>Send an invite to the new organiztion</li>
      <li>Accept the invite to the new organization from the member account</li>
    </ol>
  </li>
  <li>If you want the master account of the old organization to also join the new organization, do the following:
    <ol>
      <li>Remove the member accounts from the organizations using procedure above</li>
      <li>Delete the old organization</li>
      <li>Repeat the process above to invite the old master account to the new org
<a href="https://data.terabox.com/thumbnail/154626f7672f7594c5d62c0131cf55be?fid=4401547290288-250528-983569818853867&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-bClV8%2fOV0ZZkv9zPkrgyrnQBttY%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220109457588015889&amp;dp-callid=0&amp;time=1667556000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" class="popup img-link  shimmer"><img src="https://data.terabox.com/thumbnail/154626f7672f7594c5d62c0131cf55be?fid=4401547290288-250528-983569818853867&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-bClV8%2fOV0ZZkv9zPkrgyrnQBttY%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220109457588015889&amp;dp-callid=0&amp;time=1667556000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" loading="lazy"></a>
        <h2 id="iam-conditions"><span class="me-2">IAM Conditions</span><a href="#iam-conditions" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
        <p><a href="https://data.terabox.com/thumbnail/594cb3e1dc8410385d534845e0d73ca0?fid=4401547290288-250528-611246829116890&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-bMgtu1lDQq4KL2K4wvDaaJ%2bHg9U%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220124888680246170&amp;dp-callid=0&amp;time=1667556000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" class="popup img-link  shimmer"><img src="https://data.terabox.com/thumbnail/594cb3e1dc8410385d534845e0d73ca0?fid=4401547290288-250528-611246829116890&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-bMgtu1lDQq4KL2K4wvDaaJ%2bHg9U%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220124888680246170&amp;dp-callid=0&amp;time=1667556000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" loading="lazy"></a>
<a href="https://data.terabox.com/thumbnail/9316e2704af9e607c6581b35775bf39d?fid=4401547290288-250528-481221424643039&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-uj17NK53LhttIQCy4LdYSmaVvog%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220148473480242532&amp;dp-callid=0&amp;time=1667556000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" class="popup img-link  shimmer"><img src="https://data.terabox.com/thumbnail/9316e2704af9e607c6581b35775bf39d?fid=4401547290288-250528-481221424643039&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-uj17NK53LhttIQCy4LdYSmaVvog%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220148473480242532&amp;dp-callid=0&amp;time=1667556000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" loading="lazy"></a></p>
        <h2 id="iam-for-s3"><span class="me-2">IAM for S3</span><a href="#iam-for-s3" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
      </li>
    </ol>
  </li>
  <li>ListBucket permission applies to arn:aws:s3:::test</li>
  <li>=&gt; bucket level permission</li>
  <li>GetObject, PutObject, DeleteObject applies to arn:awn:s3:::test/*</li>
  <li>=&gt; object level permission
<a href="https://data.terabox.com/thumbnail/9316e2704af9e607c6581b35775bf39d?fid=4401547290288-250528-318631966680319&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-pPIbv91WNwmdpjXtkvtyTA2HRnk%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220150227236216663&amp;dp-callid=0&amp;time=1667556000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" class="popup img-link  shimmer"><img src="https://data.terabox.com/thumbnail/9316e2704af9e607c6581b35775bf39d?fid=4401547290288-250528-318631966680319&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-pPIbv91WNwmdpjXtkvtyTA2HRnk%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220150227236216663&amp;dp-callid=0&amp;time=1667556000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" loading="lazy"></a>
    <h2 id="iam-roles-vs-resource-based-policies"><span class="me-2">IAM Roles vs Resource Based Policies</span><a href="#iam-roles-vs-resource-based-policies" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
  </li>
  <li>Attach a policy to a resource (example: S3 bucket policy) versus attaching of a using a role as a proxy
<a href="https://data.terabox.com/thumbnail/d6407a4bade989333c0c629856786ecb?fid=4401547290288-250528-286178952248615&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-K7KCAsw1asrNk7ejANhyVv8fBik%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220195210904642544&amp;dp-callid=0&amp;time=1667556000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" class="popup img-link  shimmer"><img src="https://data.terabox.com/thumbnail/d6407a4bade989333c0c629856786ecb?fid=4401547290288-250528-286178952248615&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-K7KCAsw1asrNk7ejANhyVv8fBik%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220195210904642544&amp;dp-callid=0&amp;time=1667556000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" loading="lazy"></a>
    <h2 id="iam-roles-vs-resource-based-policies-1"><span class="me-2">IAM Roles vs Resource Based Policies</span><a href="#iam-roles-vs-resource-based-policies-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
  </li>
  <li>When you assume a role (user, application or service), you give up your
original permissions and take the permissions assigned to the role</li>
  <li>When using a resource based policy, the principal doesn’t have to give
up his permissions</li>
  <li>Example: User in account A needs to scan a DynamoDB table in Account A and dump it in an S3 bucket in Account B</li>
  <li>Supported by: Amazon S3 buckets, SNS topics, SQS queues, etc…
    <h2 id="iam-permission-boundaries"><span class="me-2">IAM Permission Boundaries</span><a href="#iam-permission-boundaries" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
  </li>
  <li>IAM Permission Boundaries are supported for users and roles (not groups)</li>
  <li>Advanced feature to use a managed policy to set the maximum permissions
an IAM entity can get.
<a href="https://data.terabox.com/thumbnail/790035040f5cd2bdf957df2feedf0f03?fid=4401547290288-250528-417917140952444&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-m7HDIuD1g1xNxmySEv%2fBENobQ8A%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220242801437375018&amp;dp-callid=0&amp;time=1667556000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" class="popup img-link  shimmer"><img src="https://data.terabox.com/thumbnail/790035040f5cd2bdf957df2feedf0f03?fid=4401547290288-250528-417917140952444&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-m7HDIuD1g1xNxmySEv%2fBENobQ8A%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220242801437375018&amp;dp-callid=0&amp;time=1667556000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" loading="lazy"></a>
    <h2 id="iam-permission-boundaries-1"><span class="me-2">IAM Permission Boundaries</span><a href="#iam-permission-boundaries-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
  </li>
  <li>Can be used in combinations of AWS Organizations SCP
<a href="https://data.terabox.com/thumbnail/a911c7832b93e96f4702d05a584c65dc?fid=4401547290288-250528-992783932441151&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-UHskvAwCs2aD5LAyT%2bx0tdun8E8%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220260884841035928&amp;dp-callid=0&amp;time=1667556000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" class="popup img-link  shimmer"><img src="https://data.terabox.com/thumbnail/a911c7832b93e96f4702d05a584c65dc?fid=4401547290288-250528-992783932441151&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-UHskvAwCs2aD5LAyT%2bx0tdun8E8%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220260884841035928&amp;dp-callid=0&amp;time=1667556000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" loading="lazy"></a></li>
  <li>Use cases
    <ul>
      <li>Delegate responsibilities to non administrators within their permission</li>
      <li>Allow developers to self-assign policies and manage their own permissions, while making sure they can’t escalate their privileges (= make themselves admin)</li>
      <li>Useful to restrict one specific user (instead of a whole account using Organizations &amp; SCP)
        <h2 id="iam-policy-evaluation-logic"><span class="me-2">IAM Policy Evaluation Logic</span><a href="#iam-policy-evaluation-logic" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
        <p><a href="https://data.terabox.com/thumbnail/afe0378f0df5690b80975a28c7ae4af8?fid=4401547290288-250528-801969616342204&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-RF04bAkcQ9z%2f9XG9aZMfGKJW4ic%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220365060183320422&amp;dp-callid=0&amp;time=1667556000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" class="popup img-link  shimmer"><img src="https://data.terabox.com/thumbnail/afe0378f0df5690b80975a28c7ae4af8?fid=4401547290288-250528-801969616342204&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-RF04bAkcQ9z%2f9XG9aZMfGKJW4ic%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220365060183320422&amp;dp-callid=0&amp;time=1667556000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" loading="lazy"></a></p>
        <h2 id="example-iam-policy"><span class="me-2">Example IAM Policy</span><a href="#example-iam-policy" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
      </li>
    </ul>
  </li>
  <li>Can you perform sqs:CreateQueue?</li>
  <li>Can you perform sqs:DeleteQueue?</li>
  <li>Can you perform ec2:DescribeInstances?
    <h2 id="aws-resource-access-manager-ram"><span class="me-2">AWS Resource Access Manager (RAM)</span><a href="#aws-resource-access-manager-ram" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
  </li>
  <li>Share AWS resources that you own with other AWS accounts</li>
  <li>Share with any account or within your Organization</li>
  <li>Avoid resource duplication!</li>
  <li>VPC Subnets:
    <ul>
      <li>allow to have all the resources launched in the same subnets</li>
      <li>must be from the same AWS Organizations.</li>
      <li>Cannot share security groups and default VPC</li>
      <li>Participants can manage their own resources in there</li>
      <li>Participants can’t view, modify, delete resources that belong to other participants or the owner</li>
    </ul>
  </li>
  <li>AWS Transit Gateway</li>
  <li>Route53 Resolver Rules</li>
  <li>License Manager Configurations
    <h2 id="resource-access-manager--vpc-example"><span class="me-2">Resource Access Manager – VPC example</span><a href="#resource-access-manager--vpc-example" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
    <p><a href="https://data.terabox.com/thumbnail/d42dc3700f48b3c0ed035a53dbb3eea4?fid=4401547290288-250528-1097540045173168&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-HHVgvb4r7b3a2hAaZ93qUkpzplc%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220415791121398441&amp;dp-callid=0&amp;time=1667556000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" class="popup img-link  shimmer"><img src="https://data.terabox.com/thumbnail/d42dc3700f48b3c0ed035a53dbb3eea4?fid=4401547290288-250528-1097540045173168&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-HHVgvb4r7b3a2hAaZ93qUkpzplc%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220415791121398441&amp;dp-callid=0&amp;time=1667556000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" loading="lazy"></a></p>
  </li>
  <li>Each account…
    <ul>
      <li>is responsible for its own resources</li>
      <li>cannot view, modify or delete other resources in other accounts</li>
    </ul>
  </li>
  <li>Network is shared so…
    <ul>
      <li>Anything deployed in the VPC can talk to other resources in  the VPC</li>
      <li>Applications are accessed easily across accounts, using private IP!</li>
      <li>Security groups from other accounts can be referenced for maximum security
        <h2 id="aws-single-sign-on-sso"><span class="me-2">AWS Single Sign-On (SSO)</span><a href="#aws-single-sign-on-sso" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
      </li>
    </ul>
  </li>
  <li>Centrally manage Single Sign-On to access multiple accounts and 3rd -party business applications.</li>
  <li>Integrated with AWS Organizations</li>
  <li>Supports SAML 2.0 markup</li>
  <li>Integration with on-premises Active Directory</li>
  <li>Centralized permission management</li>
  <li>Centralized a auditing with CloudTrail
<a href="https://data.terabox.com/thumbnail/51d7fae9d4fc55bcbfec6e74926e0666?fid=4401547290288-250528-678752735626691&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-3OX3fEJJzW6aaJ1%2fnTg0E2u%2bVUs%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220471516869484801&amp;dp-callid=0&amp;time=1667556000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" class="popup img-link  shimmer"><img src="https://data.terabox.com/thumbnail/51d7fae9d4fc55bcbfec6e74926e0666?fid=4401547290288-250528-678752735626691&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-3OX3fEJJzW6aaJ1%2fnTg0E2u%2bVUs%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220471516869484801&amp;dp-callid=0&amp;time=1667556000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" loading="lazy"></a>
    <h2 id="aws-single-sign-on-sso--setup-with-ad"><span class="me-2">AWS Single Sign-On (SSO) – Setup with AD</span><a href="#aws-single-sign-on-sso--setup-with-ad" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
    <p><a href="https://data.terabox.com/thumbnail/80a455cfed4ab80ff3825dc97a13f051?fid=4401547290288-250528-476059878497071&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-ELAR6fn%2fjySBywKunKtB6sGaJX8%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220490648943574061&amp;dp-callid=0&amp;time=1667556000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" class="popup img-link  shimmer"><img src="https://data.terabox.com/thumbnail/80a455cfed4ab80ff3825dc97a13f051?fid=4401547290288-250528-476059878497071&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-ELAR6fn%2fjySBywKunKtB6sGaJX8%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220490648943574061&amp;dp-callid=0&amp;time=1667556000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" loading="lazy"></a></p>
    <h2 id="sso--vs-assumerolewithsaml"><span class="me-2">SSO – vs AssumeRoleWithSAML</span><a href="#sso--vs-assumerolewithsaml" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>
    <p><a href="https://data.terabox.com/thumbnail/22ceba706f9b6b5542266f20edd2a3d7?fid=4401547290288-250528-688792890826970&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-0N45qASqeo41kR4D3ocicPGOfhE%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220508371845466250&amp;dp-callid=0&amp;time=1667556000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" class="popup img-link  shimmer"><img src="https://data.terabox.com/thumbnail/22ceba706f9b6b5542266f20edd2a3d7?fid=4401547290288-250528-688792890826970&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-0N45qASqeo41kR4D3ocicPGOfhE%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220508371845466250&amp;dp-callid=0&amp;time=1667556000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" loading="lazy"></a></p>
  </li>
</ul>

  </div>

  <div class="post-tail-wrapper text-muted">
    <!-- categories -->
    
      <div class="post-meta mb-3">
        <i class="far fa-folder-open fa-fw me-1"></i>
        
          <a href="/categories/fullstack/">Fullstack</a>,
          <a href="/categories/architect/">Architect</a>,
          <a href="/categories/aws/">AWS</a>
      </div>
    

    <!-- tags -->
    
      <div class="post-tags">
        <i class="fa fa-tags fa-fw me-1"></i>
        
          <a
            href="/tags/aws/"
            class="post-tag no-text-decoration"
          >aws</a>
        
          <a
            href="/tags/cloud-watch/"
            class="post-tag no-text-decoration"
          >cloud Watch</a>
        
          <a
            href="/tags/sso/"
            class="post-tag no-text-decoration"
          >SSO</a>
        
          <a
            href="/tags/aws-resource-access-manager/"
            class="post-tag no-text-decoration"
          >AWS Resource Access Manager</a>
        
          <a
            href="/tags/scp/"
            class="post-tag no-text-decoration"
          >SCP</a>
        
          <a
            href="/tags/iam/"
            class="post-tag no-text-decoration"
          >IAM</a>
        
          <a
            href="/tags/could-trailt/"
            class="post-tag no-text-decoration"
          >Could Trailt</a>
        
          <a
            href="/tags/eventbridge/"
            class="post-tag no-text-decoration"
          >EventBridge</a>
        
      </div>
    

    <div
      class="
        post-tail-bottom
        d-flex justify-content-between align-items-center mt-5 pb-2
      "
    >
      <div class="license-wrapper">
        
          

          This post is licensed under 
        <a href="https://creativecommons.org/licenses/by/4.0/">
          CC BY 4.0
        </a>
         by the author.
        
      </div>

      <!-- Post sharing snippet -->

<div class="share-wrapper d-flex align-items-center">
  <span class="share-label text-muted">Share</span>
  <span class="share-icons">
    
    
    

    

      

      <a href="https://twitter.com/AdHuybinh" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter">
        <i class="fa-fw fab fa-twitter"></i>
      </a>
    

      

      <a href="https://www.facebook.com/alz.ailove" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook">
        <i class="fa-fw fab fa-facebook-square"></i>
      </a>
    

      

      <a href="https://telegram.me/share?text=AWS%20Monitoring,%20Audit,%20and%20Performance%20-%20Programmer%20From%20Zero%20To%20Mountaint&url=https%3A%2F%2Fhardworkenglishlearner.github.io%2Fposts%2Faws-monitoring-audit-and-performance%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram">
        <i class="fa-fw fab fa-telegram"></i>
      </a>
    

      

      <a href="https://www.linkedin.com/in/b%C3%ACnh-nguy%E1%BB%85n-75312a7b/" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin">
        <i class="fa-fw fab fa-linkedin"></i>
      </a>
    

    <button
      id="copy-link"
      aria-label="Copy link"
      class="btn small"
      data-bs-toggle="tooltip"
      data-bs-placement="top"
      title="Copy link"
      data-title-succeed="Link copied successfully!"
    >
      <i class="fa-fw fas fa-link pe-none fs-6"></i>
    </button>
  </span>
</div>

    </div>
    <!-- .post-tail-bottom -->
  </div>
  <!-- div.post-tail-wrapper -->
</article>


            
          </main>

          <!-- panel -->
          <aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 mb-5 text-muted">
            <div class="access">
              <!-- Get 5 last posted/updated posts -->














  <section id="access-lastmod">
    <h2 class="panel-heading">Recently Updated</h2>
    <ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2">
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/laravel-react-adminlte-dashboard-project-and-todo-example/">Laravel React AdminLTE Dashboard Project and todo example</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/aws-white-papers-and-architectures/">AWS White Papers and Architectures</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/virtual-private-cloud-vpc-part-2/">Virtual Private Cloud (VPC) part 2</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/aws-router-53/">AWS Router 53</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/aws-virtual-private-cloud-overview-vpc-part-1/">AWS Virtual Private Cloud Overview (VPC) part 1</a>
        </li>
      
    </ul>
  </section>
  <!-- #access-lastmod -->


              <!-- The trending tags list -->















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">Trending Tags</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/aws/">aws</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/rails/">rails</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/api/">api</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/aws/">AWS</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/javascript/">javascript</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/ruby/">ruby</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/s3/">s3</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/architecture/">architecture</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/athena/">athena</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/aurora/">aurora</a>
      
    </div>
  </section>


            </div>

            
              
              



  <section id="toc-wrapper" class="ps-0 pe-4">
    <h2 class="panel-heading ps-3 pt-2 mb-2">Contents</h2>
    <nav id="toc"></nav>
  </section>


            
          </aside>
        </div>

        <div class="row">
          <!-- tail -->
          <div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              
              <!-- Recommend the other 3 posts according to the tags and categories of the current post. -->

<!-- The total size of related posts -->


<!-- An random integer that bigger than 0 -->


<!-- Equals to TAG_SCORE / {max_categories_hierarchy} -->














  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
    
  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  











  <aside id="related-posts" aria-labelledby="related-label">
    <h3 class="mb-4" id="related-label">Further Reading</h3>
    <nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4">
      
        <article class="col">
          <a href="/posts/aws-question-and-answer-practice/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1707152400"
  data-df="ll"
  
>
  Feb  6, 2024
</time>

              <h4 class="pt-0 my-2">AWS Question and Answer Practice</h4>
              <div class="text-muted">
                <p>
                  





                  
  What is ACM?
    
      The AWS certtificates manager is a service which allow the creation, managerment and renewable of certificates. It allow deployment certificcatte onto support AWS service...
                </p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/developing-on-aws/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1707152400"
  data-df="ll"
  
>
  Feb  6, 2024
</time>

              <h4 class="pt-0 my-2">Developing on AWS</h4>
              <div class="text-muted">
                <p>
                  





                  Developing on AWS
AWS EC2 Instance Metadata

  AWS EC2 Instance Medata is powerful but one of the least known features to developers
  It allows AWS EC2 instances to “learn about themselves” withou...
                </p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/exam-review-tips/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1707152400"
  data-df="ll"
  
>
  Feb  6, 2024
</time>

              <h4 class="pt-0 my-2">Exam Review & Tips</h4>
              <div class="text-muted">
                <p>
                  





                  Exam Review &amp;amp; Tips
State of learning checkpoint

  Let look how far we’ve gone on our learning 
    Practice makes perfect
  
  If you’re new to AWS, take a bit of AWS practice thanks to this c...
                </p>
              </div>
            </div>
          </a>
        </article>
      
    </nav>
  </aside>
  <!-- #related-posts -->


            
              
              <!-- Navigation buttons at the bottom of the post. -->

<nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation">
  
  

  
    <a
      href="/posts/aws-machine-learning/"
      class="btn btn-outline-primary"
      aria-label="Older"
    >
      <p>AWS Machine Learning</p>
    </a>
  

  
    <a
      href="/posts/aws-question-and-answer-practice/"
      class="btn btn-outline-primary"
      aria-label="Newer"
    >
      <p>AWS Question and Answer Practice</p>
    </a>
  
</nav>

            
              
              <!--  The comments switcher -->


            

            <!-- The Footer -->

<footer
  aria-label="Site Info"
  class="
    d-flex flex-column justify-content-center text-muted
    flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3
  "
>
  <p>©
    <time>2025</time>

    
      <a href="https://twitter.com/username">Hardwork đẹp trai</a>.
    

    
      <span
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author."
      >Some rights reserved.</span>
    
  </p>

  <p>Using the <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>.
  </p>
</footer>

          </div>
        </div>

        <!-- The Search results -->

<div id="search-result-wrapper" class="d-flex justify-content-center unloaded">
  <div class="col-11 content">
    <div id="search-hints">
      <!-- The trending tags list -->















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">Trending Tags</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/aws/">aws</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/rails/">rails</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/api/">api</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/aws/">AWS</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/javascript/">javascript</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/ruby/">ruby</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/s3/">s3</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/architecture/">architecture</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/athena/">athena</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/aurora/">aurora</a>
      
    </div>
  </section>


    </div>
    <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
  </div>
</div>

      </div>

      <aside aria-label="Scroll to Top">
        <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow">
          <i class="fas fa-angle-up"></i>
        </button>
      </aside>
    </div>

    <div id="mask"></div>

    
      <aside
  id="notification"
  class="toast"
  role="alert"
  aria-live="assertive"
  aria-atomic="true"
  data-bs-animation="true"
  data-bs-autohide="false"
>
  <div class="toast-header">
    <button
      type="button"
      class="btn-close ms-auto"
      data-bs-dismiss="toast"
      aria-label="Close"
    ></button>
  </div>
  <div class="toast-body text-center pt-0">
    <p class="px-2 mb-3">A new version of content is available.</p>
    <button type="button" class="btn btn-primary" aria-label="Update">
      Update
    </button>
  </div>
</aside>

    

    <!-- JavaScripts -->

    <!-- JS selector for site. -->

<!-- commons -->



<!-- layout specified -->




  

  
    <!-- image lazy-loading & popup & clipboard -->
    
  















  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  



  <script src="https://cdn.jsdelivr.net/combine/npm/jquery@3.7.1/dist/jquery.min.js,npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js,npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.10/dayjs.min.js,npm/dayjs@1.11.10/locale/en.min.js,npm/dayjs@1.11.10/plugin/relativeTime.min.js,npm/dayjs@1.11.10/plugin/localizedFormat.min.js,npm/tocbot@4.25.0/dist/tocbot.min.js"></script>






<script defer src="/assets/js/dist/post.min.js"></script>






    

    <!--
  Jekyll Simple Search loader
  See: <https://github.com/christian-fei/Simple-Jekyll-Search>
-->





<script>
  /* Note: dependent library will be loaded in `js-selector.html` */
  SimpleJekyllSearch({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('search-results'),
    json: '/assets/js/data/search.json',
    searchResultTemplate: '  <article class="px-1 px-sm-2 px-lg-4 px-xl-0">    <header>      <h2><a href="{url}">{title}</a></h2>      <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1">        {categories}        {tags}      </div>    </header>    <p>{snippet}</p>  </article>',
    noResultsText: '<p class="mt-5"></p>',
    templateMiddleware: function(prop, value, template) {
      if (prop === 'categories') {
        if (value === '') {
          return `${value}`;
        } else {
          return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`;
        }
      }

      if (prop === 'tags') {
        if (value === '') {
          return `${value}`;
        } else {
          return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`;
        }
      }
    }
  });
</script>

  </body>
</html>


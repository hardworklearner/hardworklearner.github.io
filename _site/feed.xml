<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-US"><generator uri="https://jekyllrb.com/" version="4.3.3">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" hreflang="en-US" /><updated>2025-07-15T02:07:26+07:00</updated><id>http://localhost:4000/feed.xml</id><title type="html">Programmer From Zero To Mountaint</title><subtitle>A minimal, portfolio, sidebar, bootstrap Jekyll theme with responsive web design and focuses on text presentation.</subtitle><author><name>Hardwork đẹp trai</name></author><entry><title type="html">Laravel React AdminLTE Dashboard Project and todo example</title><link href="http://localhost:4000/posts/laravel-react-adminlte-dashboard-project-and-todo-example/" rel="alternate" type="text/html" title="Laravel React AdminLTE Dashboard Project and todo example" /><published>2024-10-07T00:00:00+07:00</published><updated>2024-10-07T00:00:00+07:00</updated><id>http://localhost:4000/posts/laravel-react-adminlte-dashboard-project-and-todo-example</id><content type="html" xml:base="http://localhost:4000/posts/laravel-react-adminlte-dashboard-project-and-todo-example/"><![CDATA[<h1 id="laravel-react-adminlte-project-management-example-code">Laravel React AdminLTE Project management example code</h1>

<p>Admin Dashboard using Laravel, AdminLTE and ReactJs to coded a website with purpose using in Project management, due to example code for tutorial, this sample code cover case during code daily of a full stack developer. In this project, this was created from a long time project, so I using Laravel 5.x and update to React@lastest. I will update from Laravel 5.x to Laravel lastest in near future time and update in readme if possible.</p>

<h2 id="prepare">Prepare</h2>
<ul>
  <li>Working environment: Linux, MacOS, microsoft Windows</li>
  <li>Laravel 5.x</li>
  <li>ReactJs lastest</li>
  <li>PHP 7.4</li>
  <li>Node 14
    <h2 id="install">Install</h2>
    <ol>
      <li>Install Laravel
Install Laravel via composer is more convienence than use laravel install due to maintain tool installer, certainly!, Composer is well-known package manager
        <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>composer create-project <span class="nt">--prefer-dist</span> laravel/laravel laravel_react_adminlte_project_todo_management <span class="s2">"5.5.*"</span>
<span class="nb">cd </span>laravel_react_adminlte_project_todo_management
composer <span class="nb">install</span>
</pre></td></tr></tbody></table></code></pre></div>        </div>
      </li>
      <li>Install AdminLTE
AdminLTE used in my repository is 2.x, which is stable for Laravel 5.x in 2018. For lastest support and maintain please use lastest version of adminLTE is 3.x in 2024.
        <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>composer require jeroennoten/laravel-adminlte
php artisan adminlte:install <span class="c"># if adminlte of lower version will not run this command `adminlte` not found</span>
</pre></td></tr></tbody></table></code></pre></div>        </div>
        <p>Register AdminLTE in service provider to booter with laravel</p>
        <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nc">JeroenNoten\LaravelAdminLte\ServiceProvider</span><span class="o">::</span><span class="n">class</span><span class="p">,</span>
</pre></td></tr></tbody></table></code></pre></div>        </div>
        <p>After install AdminLTE, publish vendor assests file to make css, and js file working.</p>
        <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>php artisan vendor:publish <span class="nt">--provider</span><span class="o">=</span><span class="s2">"JeroenNoten</span><span class="se">\L</span><span class="s2">aravelAdminLte</span><span class="se">\S</span><span class="s2">erviceProvider"</span> <span class="nt">--tag</span><span class="o">=</span>asset
php artisan config:cache
php artisan view:clear
</pre></td></tr></tbody></table></code></pre></div>        </div>
      </li>
    </ol>
  </li>
</ul>

<ol>
  <li>Install Node package
The version of Node is 14 and React is latest, and ReactDom is also lastest to avoid miss coparatitive with version and functions.
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>nvm <span class="nb">install </span>14
nvm use 14
npm <span class="nb">install</span> 
</pre></td></tr></tbody></table></code></pre></div>    </div>
    <p>To build css and js file</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>npm run dev
</pre></td></tr></tbody></table></code></pre></div>    </div>
    <p>To watch and synchonized change code automatically</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>npm run watch
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
  <li>Run conmand to generate key
Laravel is rich features, mean every code and feature can also have own config but before run a laravel app, laravel will look into the configure file and find out key generated which used for hash, ssl and algorithm functions. Laravel will not start without key generated.
    <ul>
      <li>Make a <code class="language-plaintext highlighter-rouge">.env</code> file from <code class="language-plaintext highlighter-rouge">.env.local</code>
        <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>php artisan key:generate
</pre></td></tr></tbody></table></code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>Run command to migrate
Before run migrate, make sure to config database parameters in <code class="language-plaintext highlighter-rouge">.env</code>.
There are multiplee databases support but in this repository, I use MYSQL.
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="nv">DB_CONNECTION</span><span class="o">=</span>mysql
<span class="nv">DB_HOST</span><span class="o">=</span>127.0.0.1
<span class="nv">DB_PORT</span><span class="o">=</span>3306
<span class="nv">DB_DATABASE</span><span class="o">=</span>laravel_react_sample_code
<span class="nv">DB_USERNAME</span><span class="o">=</span>db_usernam
<span class="nv">DB_PASSWORD</span><span class="o">=</span>db_pass
</pre></td></tr></tbody></table></code></pre></div>    </div>
    <p>Run migrate</p>
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>php artisan migrate 
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
  <li>Run command to make data for test</li>
</ol>

<p>Made some data for tests and available seed by command</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>php artisan db:seed
</pre></td></tr></tbody></table></code></pre></div></div>
<p>The content is following to Seed are: <em>ProjectTableSeeder.php</em>  and <em>MemberTableSeeder.php</em></p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;?php</span>

<span class="kn">use</span> <span class="nc">Illuminate\Database\Seeder</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">App\Project</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">ProjectTableSeeder</span> <span class="kd">extends</span> <span class="nc">Seeder</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">function</span> <span class="n">run</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="no">DB</span><span class="o">::</span><span class="nf">statement</span><span class="p">(</span><span class="s1">'SET FOREIGN_KEY_CHECKS=0;'</span><span class="p">);</span>
        <span class="nc">App\Project</span><span class="o">::</span><span class="nf">truncate</span><span class="p">();</span>
        <span class="no">DB</span><span class="o">::</span><span class="nf">statement</span><span class="p">(</span><span class="s1">'SET FOREIGN_KEY_CHECKS=1;'</span><span class="p">);</span>
        <span class="no">DB</span><span class="o">::</span><span class="nf">table</span><span class="p">(</span><span class="s1">'project'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">delete</span><span class="p">();</span>
        <span class="nv">$name</span> <span class="o">=</span> <span class="s1">'Project A'</span><span class="p">;</span>
        <span class="nc">Project</span><span class="o">::</span><span class="nf">create</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
            <span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="nv">$name</span><span class="p">,</span>
            <span class="s1">'information'</span> <span class="o">=&gt;</span> <span class="s1">'test1'</span><span class="p">,</span>
            <span class="s1">'deadline'</span> <span class="o">=&gt;</span> <span class="s1">'2018-09-27'</span><span class="p">,</span>
            <span class="s1">'type'</span> <span class="o">=&gt;</span> <span class="s1">'lab'</span><span class="p">,</span>
            <span class="s1">'status'</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">'created_at'</span> <span class="o">=&gt;</span> <span class="s1">'1990-09-27'</span><span class="p">,</span>
            <span class="s1">'updated_at'</span> <span class="o">=&gt;</span> <span class="s1">'1990-09-27'</span>
        <span class="p">));</span>

        <span class="nv">$name</span> <span class="o">=</span> <span class="s1">'Project B'</span><span class="p">;</span>
        <span class="nc">Project</span><span class="o">::</span><span class="nf">create</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
            <span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="nv">$name</span><span class="p">,</span>
            <span class="s1">'information'</span> <span class="o">=&gt;</span> <span class="s1">'test2'</span><span class="p">,</span>
            <span class="s1">'deadline'</span> <span class="o">=&gt;</span> <span class="s1">'2018-09-27'</span><span class="p">,</span>
            <span class="s1">'type'</span> <span class="o">=&gt;</span> <span class="s1">'lab'</span><span class="p">,</span>
            <span class="s1">'status'</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">'created_at'</span> <span class="o">=&gt;</span> <span class="s1">'1990-09-27'</span><span class="p">,</span>
            <span class="s1">'updated_at'</span> <span class="o">=&gt;</span> <span class="s1">'1990-09-27'</span>
        <span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>and <em>MemberTableSeeder.php</em></p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;?php</span>

<span class="kn">use</span> <span class="nc">Illuminate\Database\Seeder</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">App\Member</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">MemberTableSeeder</span> <span class="kd">extends</span> <span class="nc">Seeder</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">function</span> <span class="n">run</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="no">DB</span><span class="o">::</span><span class="nf">statement</span><span class="p">(</span><span class="s1">'SET FOREIGN_KEY_CHECKS=0;'</span><span class="p">);</span>
        <span class="nc">App\Member</span><span class="o">::</span><span class="nf">truncate</span><span class="p">();</span>
        <span class="no">DB</span><span class="o">::</span><span class="nf">statement</span><span class="p">(</span><span class="s1">'SET FOREIGN_KEY_CHECKS=1;'</span><span class="p">);</span>
        <span class="no">DB</span><span class="o">::</span><span class="nf">table</span><span class="p">(</span><span class="s1">'member'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">delete</span><span class="p">();</span>
        <span class="nv">$name</span> <span class="o">=</span> <span class="s1">'Nguyen Kim'</span><span class="p">;</span>
        <span class="nc">Member</span><span class="o">::</span><span class="nf">create</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
            <span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="nv">$name</span><span class="p">,</span>
            <span class="s1">'information'</span> <span class="o">=&gt;</span> <span class="s1">'test'</span><span class="p">,</span>
            <span class="s1">'date_of_birth'</span> <span class="o">=&gt;</span> <span class="s1">'1992-09-25'</span><span class="p">,</span>
            <span class="s1">'position'</span> <span class="o">=&gt;</span> <span class="s1">'intern'</span><span class="p">,</span>
            <span class="s1">'phone'</span> <span class="o">=&gt;</span> <span class="s1">'0965841492'</span><span class="p">,</span>
            <span class="s1">'gender'</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">'avatar'</span> <span class="o">=&gt;</span> <span class="s1">'storage/images/default.png'</span>
        <span class="p">));</span>

        <span class="nv">$name</span> <span class="o">=</span> <span class="s1">'Nguyen Phuc'</span><span class="p">;</span>
        <span class="nc">Member</span><span class="o">::</span><span class="nf">create</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
            <span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="nv">$name</span><span class="p">,</span>
            <span class="s1">'information'</span> <span class="o">=&gt;</span> <span class="s1">'test'</span><span class="p">,</span>
            <span class="s1">'date_of_birth'</span> <span class="o">=&gt;</span> <span class="s1">'1992-09-25'</span><span class="p">,</span>
            <span class="s1">'position'</span> <span class="o">=&gt;</span> <span class="s1">'intern'</span><span class="p">,</span>
            <span class="s1">'phone'</span> <span class="o">=&gt;</span> <span class="s1">'0965841492'</span><span class="p">,</span>
            <span class="s1">'gender'</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">'avatar'</span> <span class="o">=&gt;</span> <span class="s1">'storage/images/default.png'</span>
        <span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>File <em>DatabaseSeeder.php</em> will place code to call seeders</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;?php</span>

<span class="kn">use</span> <span class="nc">Illuminate\Database\Seeder</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">DatabaseSeeder</span> <span class="kd">extends</span> <span class="nc">Seeder</span>
<span class="p">{</span>
    <span class="cd">/**
     * Run the database seeds.
     *
     * @return void
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">run</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">call</span><span class="p">(</span><span class="nc">ProjectTableSeeder</span><span class="o">::</span><span class="n">class</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">call</span><span class="p">(</span><span class="nc">MemberTableSeeder</span><span class="o">::</span><span class="n">class</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<ol>
  <li>Check variables configure</li>
</ol>

<p>Check on folder config and locate files: <code class="language-plaintext highlighter-rouge">adminlte.php</code>, <code class="language-plaintext highlighter-rouge">MyGlobeSetting.php</code> and <code class="language-plaintext highlighter-rouge">app.php</code> to checl whether conditions and variables are setted. These variables have own defaults.
Please check config to add:</p>
<ul>
  <li>App Name</li>
  <li>Database connection</li>
  <li>AdminLTE params: menu, plugins</li>
</ul>

<ol>
  <li>Fix any bugs appear and check bug math.div</li>
</ol>

<p>After install and run npm run dev, command is work properly but errors may be appear. Please aware to fix bugs appeard duting run at local site.
The bug come from sass compiler is math.div not found so please go in detail error notice and make change from <code class="language-plaintext highlighter-rouge">math.div</code> to function symbols <code class="language-plaintext highlighter-rouge">/</code></p>

<ol>
  <li>Websites pictures 
Website pictures:
    <ul>
      <li>Home page
<img src="/assets/img/posts/20241007/home%20page.png" alt="Home page" /></li>
      <li>Project Page
<img src="/assets/img/posts/20241007/project%20list.png" alt="Project page" /></li>
      <li>Create Project
<img src="/assets/img/posts/20241007/create%20project.png" alt="Create Project" /></li>
      <li>Member Update information
<img src="/assets/img/posts/20241007/update%20member%20infor.png" alt="Member Update information" /></li>
    </ul>
  </li>
  <li>Other
    <ul>
      <li>Data is sample for test and demo</li>
    </ul>
  </li>
</ol>

<h2 id="coding-tutorial">Coding Tutorial</h2>

<h3 id="admin-by-laravel">Admin By Laravel</h3>

<h3 id="create-admin-dashboard-using-adminlte">Create Admin Dashboard using AdminLTE</h3>

<h3 id="admin-dashboard-using-reactjs">Admin Dashboard using ReactJS</h3>

<h2 id="reference">Reference</h2>]]></content><author><name>Hardwork đẹp trai</name></author><summary type="html"><![CDATA[Laravel React AdminLTE Project management example code]]></summary></entry><entry><title type="html">AWS White Papers and Architectures</title><link href="http://localhost:4000/posts/aws-white-papers-and-architectures/" rel="alternate" type="text/html" title="AWS White Papers and Architectures" /><published>2024-02-08T00:00:00+07:00</published><updated>2024-02-08T00:00:00+07:00</updated><id>http://localhost:4000/posts/aws-white-papers-and-architectures</id><content type="html" xml:base="http://localhost:4000/posts/aws-white-papers-and-architectures/"><![CDATA[<h1 id="white-papers-and-architectures">White Papers and Architectures</h1>
<p>Well Architected Framework, Disaster Recovery, etc…</p>
<h2 id="section-overview">Section Overview</h2>
<ul>
  <li>Well Architected Framework Whitepaper</li>
  <li>Well Architected Tool</li>
  <li>AWS Trusted Advisor</li>
  <li>Reference architectures resources (for real-world)</li>
  <li>Disaster Recovery on AWS Whitepaper
    <h2 id="well-architected-framework-general-guiding-principles">Well Architected Framework General Guiding Principles</h2>
  </li>
  <li>https://aws.amazon.com/architecture/well-architected</li>
  <li>Stop guessing your capacity needs</li>
  <li>Test systems at production scale</li>
  <li>Automate to make architectural experimentation easier</li>
  <li>Allow for evolutionary architectures
    <ul>
      <li>Design based on changing requirements</li>
    </ul>
  </li>
  <li>Drive architectures using data</li>
  <li>Improve through game days
    <ul>
      <li>Simulate applications for flash sale days
        <h2 id="well-architected-framework-66-pillars">Well Architected Framework 66 Pillars</h2>
        <ol>
          <li>Operational Excellence</li>
          <li>Security</li>
          <li>Reliability</li>
          <li>Performance Efficiency</li>
          <li>Cost Optimization</li>
          <li>Sustainability
They are not something to balance, or trade-offs, they’re a synergy
            <h2 id="aws-well-architected-tool">AWS Well-architected Tool</h2>
            <p>Free tool to review your architectures against the 6 pillars Well-Architected Framework and adopt architectural best practice</p>
          </li>
        </ol>
      </li>
    </ul>
  </li>
  <li>How does it work?
    <ul>
      <li>Select your workload and answer questions</li>
      <li>Review your answers against the 66 pillars</li>
      <li>Obtain advice: get videos ad documentations, generate a report, see the results iin a dashboard</li>
    </ul>
  </li>
  <li>Let’s have a look: https://console.aws.amazon.com/wellarchitected
    <h2 id="trusted-advisor">Trusted Advisor</h2>
  </li>
  <li>No need to install anything - high level AWS account assessment</li>
  <li>Analyze your AWS accounts and provides recommendation:
<img src="https://ibb.co/Xz3GP4j" alt="" /></li>
  <li>Core checks and recommendations - all customers</li>
  <li>Can enable weekly email notification from the console</li>
  <li>Full Trusted Advisor: Available for business &amp; Enterprise support plans
    <ul>
      <li>Ability to set CloudWatch alarms when reaching limits</li>
      <li>Programmatic Access using AWS Support API
        <h2 id="trusted-advisor-checks-examples">Trusted Advisor Checks Examples</h2>
      </li>
    </ul>
  </li>
  <li>Cost Optimization
    <ul>
      <li>Low utilization EC2 instances, idle load balancers, under-utilized EBS volumes…</li>
      <li>Reserved instances &amp; savings plans optimizations</li>
    </ul>
  </li>
  <li>Performance:
    <ul>
      <li>High utilization EC2 instances, CloudFront CDN optimizations</li>
      <li>EC2 to EBS throughput optimizations, Alias records recommendations</li>
    </ul>
  </li>
  <li>Security:
    <ul>
      <li>MFA enabled on Root Account, IAM key rotation, exposed Access Keys</li>
      <li>S3 Bucket permissions for public access, security groups with unrestricted ports</li>
    </ul>
  </li>
  <li>Fault Tolerance:
    <ul>
      <li>EBS snapshots age, Availability Zone balance</li>
      <li>ASG Multi-AZ, RDS Multi-AZ, ELB configuration,,,</li>
    </ul>
  </li>
  <li>Service Limits
    <h2 id="more-architecture-examples">More Architecture Examples</h2>
  </li>
  <li>We explored the most important architectural patterns:
    <ul>
      <li>Classic: EC2, ELB, RDS, ElastiCache, etc …</li>
      <li>Serverless: S3, Lambda, DynamoDB, CloudFront, API Gateway, etc…</li>
    </ul>
  </li>
  <li>If you want to see more AWS architectures:
    <ul>
      <li><img src="https://aws.amazon.com/architecture/" alt="https://aws.amazon.com/architecture/" /></li>
      <li><img src="https://aws.amazon.com/solutions/" alt="https://aws.amazon.com/solutions/" /></li>
    </ul>
  </li>
</ul>]]></content><author><name>Hardwork đẹp trai</name></author><category term="Fullstack" /><category term="Architect" /><category term="AWS" /><category term="aws" /><category term="Architecture" /><summary type="html"><![CDATA[White Papers and Architectures Well Architected Framework, Disaster Recovery, etc… Section Overview Well Architected Framework Whitepaper Well Architected Tool AWS Trusted Advisor Reference architectures resources (for real-world) Disaster Recovery on AWS Whitepaper Well Architected Framework General Guiding Principles https://aws.amazon.com/architecture/well-architected Stop guessing your capacity needs Test systems at production scale Automate to make architectural experimentation easier Allow for evolutionary architectures Design based on changing requirements Drive architectures using data Improve through game days Simulate applications for flash sale days Well Architected Framework 66 Pillars Operational Excellence Security Reliability Performance Efficiency Cost Optimization Sustainability They are not something to balance, or trade-offs, they’re a synergy AWS Well-architected Tool Free tool to review your architectures against the 6 pillars Well-Architected Framework and adopt architectural best practice How does it work? Select your workload and answer questions Review your answers against the 66 pillars Obtain advice: get videos ad documentations, generate a report, see the results iin a dashboard Let’s have a look: https://console.aws.amazon.com/wellarchitected Trusted Advisor No need to install anything - high level AWS account assessment Analyze your AWS accounts and provides recommendation: Core checks and recommendations - all customers Can enable weekly email notification from the console Full Trusted Advisor: Available for business &amp; Enterprise support plans Ability to set CloudWatch alarms when reaching limits Programmatic Access using AWS Support API Trusted Advisor Checks Examples Cost Optimization Low utilization EC2 instances, idle load balancers, under-utilized EBS volumes… Reserved instances &amp; savings plans optimizations Performance: High utilization EC2 instances, CloudFront CDN optimizations EC2 to EBS throughput optimizations, Alias records recommendations Security: MFA enabled on Root Account, IAM key rotation, exposed Access Keys S3 Bucket permissions for public access, security groups with unrestricted ports Fault Tolerance: EBS snapshots age, Availability Zone balance ASG Multi-AZ, RDS Multi-AZ, ELB configuration,,, Service Limits More Architecture Examples We explored the most important architectural patterns: Classic: EC2, ELB, RDS, ElastiCache, etc … Serverless: S3, Lambda, DynamoDB, CloudFront, API Gateway, etc… If you want to see more AWS architectures:]]></summary></entry><entry><title type="html">Virtual Private Cloud (VPC) part 2</title><link href="http://localhost:4000/posts/virtual-private-cloud-vpc-part-2/" rel="alternate" type="text/html" title="Virtual Private Cloud (VPC) part 2" /><published>2024-02-08T00:00:00+07:00</published><updated>2024-02-08T00:00:00+07:00</updated><id>http://localhost:4000/posts/virtual-private-cloud-vpc-part-2</id><content type="html" xml:base="http://localhost:4000/posts/virtual-private-cloud-vpc-part-2/"><![CDATA[<h1 id="virtual-private-cloud-vpc">Virtual Private Cloud (VPC)</h1>
<h2 id="vpc-components-diagram">VPC Components Diagram</h2>
<p><img src="https://data.terabox.com/thumbnail/47144d3f58bc4b3820a76b0dc6c01a97?fid=4401547290288-250528-727173837262976&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-Zc22ueP6yG6M%2b9nYZsoWplvbIaY%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=271281899358817708&amp;dp-callid=0&amp;time=1667746800&amp;size=c1680_u1050&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" /></p>
<h2 id="understanding-cidr---ipv4">Understanding CIDR - IPv4</h2>
<ul>
  <li>Classless Inter-Domain Routing - a method for allocating IP addresses</li>
  <li>Used in Security Groups rules and AWS networking in general</li>
  <li>They help to define an IP address range:
    <ul>
      <li>We’ve seen WW.XX.YY.ZZ/32 =&gt; one IP</li>
      <li>We’ve seen 0.0.0.0/0 =&gt; all IPs</li>
      <li>But we can define 192.168.0.0/26 =&gt; 192.168.0.0 - 192.168.0.63 (64 IP addresses)</li>
    </ul>
  </li>
  <li>A CIDR consists of two components</li>
  <li>Base IP
    <ul>
      <li>Represents an IP contained in the range (XX.XX.XX.XX)</li>
      <li>Example: 1.0.0.0 192.168.0.0</li>
    </ul>
  </li>
  <li>Subnet Mask
    <ul>
      <li>Defines how many bits can change in the IP</li>
      <li>Example: /0, /24, /32</li>
      <li>Can take two forms:
        <ul>
          <li>/8 =&gt; 255.0.0.0</li>
          <li>/16 =&gt; 255.255.0.0</li>
          <li>/24 =&gt; 255.255.255.0</li>
          <li>/32 =&gt; 255.255.255.255
            <h2 id="understanding-cidr---subnet-mask">Understanding CIDR - Subnet Mask</h2>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>The subnet mask basically allows part of the underlying IP to get additional next values from the base IP</li>
  <li>192.168.0.0 / 32 allows for 1 IP -&gt; 192.168.0.0</li>
  <li>192.168.0.0 / 31 allows for 2 IP -&gt; 192.168.0.1</li>
  <li>192.168.0.0 / 30 allows for 4 IP -&gt; 192.168.0.0 -&gt; 192.168.0.3</li>
  <li>192.168.0.0 / 29 allows for 8 IP -&gt; 192.168.0.7</li>
  <li>192.168.0.0 / 28 allows for 16 IP -&gt; 192.168.0.15</li>
  <li>…</li>
  <li>192.168.0.0 / 16 allows for 65.536 IP -&gt; 192.168.255.255</li>
  <li>192.168.0.0 / 0 allows for all IPs
    <h2 id="understanding-cidr--little-exercise">Understanding CIDR – Little Exercise</h2>
  </li>
  <li>192.168.0.0 / 24 = … ?
    <ul>
      <li>192.168.0.0 – 192.168.0.255 (256 IPs)</li>
    </ul>
  </li>
  <li>192.168.0.0/16 = … ?
    <ul>
      <li>192.168.0.0 – 192.168.255.255 (65,536 IPs)</li>
    </ul>
  </li>
  <li>134.56.78.123/32 = … ?
    <ul>
      <li>Just 134.56.78.123</li>
    </ul>
  </li>
  <li>0.0.0.0/0
    <ul>
      <li>all ips</li>
    </ul>
  </li>
  <li>When in doubt, use this website: https://www.ipaddressguide.com/cidr
    <h2 id="public-vs-private-ip-ipv4">Public vs Private IP (IPv4)</h2>
  </li>
  <li>The internet assigned number authority (IANA) established certain blocks of IPv4 addresses for the use of private (LAN) and public (internet) addresses</li>
  <li>Private IP can only allow certain values
    <ul>
      <li>10.0.0.0 - 10.255.255.255 (10.0.0.0/8) &lt;- in big networks</li>
      <li>172.16.0.0 - 172.31.255.255 (172.16.0.0/12) &lt;- AWS default VPC in that range</li>
      <li>192.168.0.0 - 192.168.255.255 (192.168.0.0/16) &lt;- e.g, home networks</li>
    </ul>
  </li>
  <li>All the rest of the IP address on the Internet are Public
    <h2 id="vpc-in-aws--ipv4">VPC in AWS – IPv4</h2>
  </li>
  <li>VPC = Virtual Private Cloud</li>
  <li>You can have multiple VPCs inn an Ắ region (mã 5 pẻ region - soft limit)</li>
  <li>Max. CIDR per VPC is 5, for each CIDR:
    <ul>
      <li>Min. size is /28 (16 ip)</li>
      <li>Max size is /16 (65536 ip)</li>
    </ul>
  </li>
  <li>Because VP is private, only the Private IPv4 ranges are allowed:
    <ul>
      <li>10.0.0.0 - 10.255.255.255 (10.0.0.0/8)</li>
      <li>172.16.0.0 - 172.31.255.255 (172.16.0.0/12)</li>
      <li>192.168.0.0 - 192.168.255.255 (192.168.0.0/16)</li>
    </ul>
  </li>
  <li>Your VPC CIDR should NOT overlap with your other network
    <h2 id="vpc--subnet-ipv4">VPC – Subnet (IPv4)</h2>
  </li>
  <li>AWS reserves 5 IP addresses (first 4 &amp; last) inn each subnet</li>
  <li>These 5 IP addresses are not available for use and can’t be assigned to an EC2 instance</li>
  <li>Example: If IDR block 10.0.0.0/24, then reserved IP addresses are:
    <ul>
      <li>10.0.0.0 Network Address</li>
      <li>10.0.0.1 reserved by AWS for the VPC router</li>
      <li>10.0.0.2 reserved by AWS for mapping to Amazon-provided DNS</li>
      <li>10.0.0.3 reserved by AWS for future use</li>
      <li>10.0.0.255 Network Broadcast address. AWS doesn’t support broadcast in a VPC, therefore the address is reserved</li>
    </ul>
  </li>
  <li>Example Tip: If you need 29 IP addresses for EC2 instances:
    <ul>
      <li>You can’t choose a subnet of size /27 (32 IP addresses, 32 - 5 = 27 &lt; 29)</li>
      <li>YOu need to choose a subnet of size /26 (64 IP address, 64 - 5 = 59 &gt; 29)
        <h2 id="internet-gateway-igw">Internet Gateway (IGW)</h2>
      </li>
    </ul>
  </li>
  <li>Allows resources (e.g EC2 instances) in a VP connect to the Internet</li>
  <li>It scales horizontally and is highly available and redundant</li>
  <li>Must be created separately from a VPC</li>
  <li>One VPC can only be attached to one IGW adn vice versa</li>
  <li>Internet Gateway in their own do not allow internet access…</li>
  <li>Route tables must also be edited!
    <h2 id="vpc---subnet-ipv4">VPC - Subnet (IPv4)</h2>
  </li>
  <li>AWS reserves 5 IP addresses (first 4 &amp; last) in each subnet</li>
  <li>These 5 IP addresses are not available for use adn can’t be assigned to an EC2 instance</li>
  <li>Example if CIDR block 10.0.0.0/24, then reserved IP addresses are:
    <ul>
      <li>10.0.0.0 Network Address</li>
      <li>10.0.0.1 reserved by AWS for VPC router</li>
      <li>10.0.0.2 reserved by AWS mapping Amazon-provided DNS</li>
      <li>10.0.0.3 reserved by AWS for future use</li>
      <li>10.0.0,255 Network Broadcast Address AWS does not support broadcast inn a VPC therefore the address is reserved</li>
    </ul>
  </li>
  <li>Example Tip: if you need 29 IP address for EC2 instances:
    <ul>
      <li>You can’t choose a subnet of size /27 (32 IP address, 32-5 = 27 &lt; 29)</li>
      <li>You need to choose a subnet of size /26 (64 - 5 = 59 &gt; 29)
        <h2 id="bastion-hosts">Bastion Hosts</h2>
      </li>
    </ul>
  </li>
  <li>We can use a Bastion Host to SSH into our private EC2 instances</li>
  <li>The bastion is in the public subnet which is then connected to all other private subnet</li>
  <li>Bastion Host security group must be tightened</li>
  <li>Example Tip: Make sure the bastion host oly has port 22 traffic from the IP address you need, not from the security groups of your other EC2 instances
    <h2 id="nat-instanceoutdated-but-still-at-the-exam">NAT Instance(outdated but still at the exam)</h2>
  </li>
  <li>NAT = Network Address Transaction</li>
  <li>Allows EC2 instances in private subnet to connect to the internet</li>
  <li>Must be launched in a public subnet</li>
  <li>Must disable EC2 setting: Source / destination check</li>
  <li>Must have Elastic IP attached to it</li>
  <li>Route Tables must be configured to route traffic from private subnet to the NAT instance
    <h2 id="nat-instance---comments">NAT Instance - Comments</h2>
  </li>
  <li>Pre-configured Amazon Linux AMI is available
    <ul>
      <li>Reached the end of standard support on December 31, 2020</li>
    </ul>
  </li>
  <li>Not highly  available / resilient setup [ out of the box
    <ul>
      <li>You need to create ann ASG inn multi-AZ + resilient user-data script</li>
    </ul>
  </li>
  <li>Internet traffic bandwidth depends on EC2 instance type</li>
  <li>YOu must manage Security Groups &amp; rules
    <ul>
      <li>Inbound :
        <ul>
          <li>Allow HTTP/HTTPS coming from Private Subnet</li>
          <li>Allow SSH from your home network (access is provided through Internet Gateway)</li>
        </ul>
      </li>
      <li>Outbound:
        <ul>
          <li>Allow HTTP/HTTPS traffic to the internet
            <h2 id="nat-gateway">NAT Gateway</h2>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>AWS-managed NAT, higher bandwidth, high availability, no administration</li>
  <li>Pay per hour for usage and bandwidth</li>
  <li>NATGW is created in a specific Availability Zone, uses an Elastic IP</li>
  <li>Can’t be used by EC2 instance in the same subnet (only from other subnets)</li>
  <li>Requires an IGW (Private Subnet =&gt; NATGW =&gt; IGW)</li>
  <li>5Gbs of bandwidth with automatic scaling up to 45Gbps</li>
  <li>No Security Groups to manage / required
    <h2 id="nat-gateway-with-high-availability">NAT Gateway with high availability</h2>
  </li>
  <li>NAT Gateway is resilient within a single Availability Zone</li>
  <li>Must create multiple NAT Gateways inn multiple AZs for fault tolerance</li>
  <li>There is no cross-AZ failover needed because if an AZ goes down it doesn’t need NAT
    <h2 id="nat-gateway-vs-nat-instance">NAT Gateway vs. NAT Instance</h2>
  </li>
</ul>

<h2 id="dns-resolution-in-vpc">DNS Resolution in VPC</h2>
<ul>
  <li>DNS Resolution in VPC(enableDnsSupport)
    <ul>
      <li>Decides if DNS resolution from Route53 resolver server is supported for the VPC</li>
      <li>True (default): it queries the amazon provider DNS Server att 169.254.169.253 or the reserved IP address at the base of the VPC IPv4 network range plus two</li>
    </ul>
  </li>
  <li>DNS Hostname (enableDnsHostnames)
    <ul>
      <li>By default
        <ul>
          <li>True =&gt; default VPC</li>
          <li>False =&gt; newly created VPCs</li>
        </ul>
      </li>
      <li>Won’t do anything unless enableDnsSupport=true</li>
      <li>If True, assigns public hostname to EC2 instances if it has a public IPv4</li>
    </ul>
  </li>
  <li>If you use custom DNS domain names in a Private Hosted Zone in Route 53, you must set both these attributes (enableDnsSupport &amp; enableDnsHostname) to true
    <h2 id="security-group-vs-nacls">Security Group vs NACLs</h2>
    <h2 id="network-access-control-list-nacl">Network Access control list (NACL)</h2>
  </li>
  <li>NACL are like a firewall which control  traffic from and tto subnet</li>
  <li>One NACL per subnet, new subnets are assigned the Default NACL</li>
  <li>You define NACL rules:
    <ul>
      <li>Rules have a number (1-32766), higher precedence with a lower number</li>
      <li>First rule match will drive the decision</li>
      <li>Example: If you define #100 Allow 10.0.0.10/32 and #200 DENY 10.0.0.10/32, the IP address
  will be allowed because 100 has a higher precedence over 200</li>
      <li>The last rule is an asterisk(*) and denies a request in case of no rule match</li>
      <li>AWS recommends adding rules by increment of 100</li>
    </ul>
  </li>
  <li>Newly created NACLs will deny everything</li>
  <li>NACL are great way of blocking a specific IP address at the subnet level
    <h2 id="default-nacl">Default NACL</h2>
  </li>
  <li>Accepts everything inbound/outbound with the subnets it’s associated with</li>
  <li>Do NOT modify the default NACL, instead create custom NACLs
    <h2 id="ephemeral-ports">Ephemeral Ports</h2>
  </li>
  <li>For any two endpoints to establish a connection, they must use ports</li>
  <li>Clients connect to a defined port and expect a response on an ephemeral port</li>
  <li>Different Operation Systems use different port ranges, examples:
    <ul>
      <li>IANA &amp; MS Windows 10: 49152-65535</li>
      <li>Many Linux kernels: 327668-60999
        <h2 id="nacl-with-ephemeral-ports">NACL with Ephemeral Ports</h2>
        <h2 id="create-nacl-rules-for-each-target-subnets-cidr">Create NACL rules for each target subnets CIDR</h2>
        <h2 id="security-group-vs-nacls-1">Security Group vs NACLs</h2>
      </li>
    </ul>
  </li>
  <li>Security group
    <ul>
      <li>Operates at the instance level</li>
      <li>Supports allow rules only</li>
      <li>Stateful: return traffic is automatically allowed, regardless of any rules</li>
      <li>All rules are evaluated before deciding whether to allow traffic</li>
      <li>Applies to an EC2 instance when specified by someone</li>
    </ul>
  </li>
  <li>NACL
    <ul>
      <li>Operate at the subnet level</li>
      <li>Support allow rules and deny rules</li>
      <li>Stateless: return traffic must be explicitly allowed by rules(thick of ephemeral ports)</li>
      <li>Rules are evaluated in order (lower to higher) when deciding whether to allow traffic, first match wins</li>
      <li>Automatically applies to all EC2 instances in the subnet that it’s associated with
  <img src="https://docs.aws.amazon.com/vpc/latest/userguide/vpc-network-acls.html" alt="https://docs.aws.amazon.com/vpc/latest/userguide/vpc-network-acls.html" />
        <h2 id="vpc---reachability-analyzer">VPC - Reachability Analyzer</h2>
      </li>
    </ul>
  </li>
  <li>A network diagnotics tool that troubleshoots network connectivity between two endpoints in yourVPC(s)</li>
  <li>It builds a model of the network configuration, then checks the reachability based on these configuration (it doesn’t send packets)</li>
  <li>When the destination is:
    <ul>
      <li>Reachable: It produces hop by hop details of the virtual network path</li>
      <li>Not reachable: It identifies the blocking component(s) (e.g configuration issues in SG, NACLs, Route Tables,…)</li>
    </ul>
  </li>
  <li>Use cases: troubleshoot connectivity issues, ensure network configuration is intended,…
    <h2 id="vpc-peering">VPC Peering</h2>
  </li>
  <li><strong>Privately</strong> connect two VPCs using AWS’s network</li>
  <li>Make them <strong>behave</strong> as if they were in the same network</li>
  <li>Must not have overlapping CIDRs</li>
  <li>VPC Peering connection is NOT <strong>transitive</strong>(Must be established for each VPC that need to communicate with one another)</li>
  <li>You must <strong>update route tables</strong> in each VPC’s subnet to ensure EC2 instances can communicate with each other
    <h2 id="vpc-peering--good-to-know">VPC Peering – Good to know</h2>
  </li>
  <li>You can create VPC connection between VPCs in different AWS accounts/regions</li>
  <li>You can reference a security group inn a peered VPC (works cross accounts - same region)
    <h2 id="vpc-peering---vpc-end-point">VPC Peering - VPC End Point</h2>
    <h2 id="vpc-endpoints-aws-privatelink">VPC Endpoints (AWS PrivateLink)</h2>
  </li>
  <li>Every AWS service is publicly exposed (public URL)</li>
  <li>VPC Endpoint (powered by AWS PrivateLink) allows you to connect to AWS services using a private network instead of using the public internet</li>
  <li>They’re redundant and scale horizontally</li>
  <li>They remove the need of IGW, NATGW,… to access AWS Services</li>
  <li>In case of issues:
    <ul>
      <li>Check DNS Setting Resolution in your VPC</li>
      <li>Check Route Tables
        <h2 id="type-of-endpoints">Type of Endpoints</h2>
      </li>
    </ul>
  </li>
  <li>Interface endpoints
    <ul>
      <li>Provisions an ENI (private IP address) as an entry point (must attach a Security Group)</li>
      <li>Supports most AWS services</li>
    </ul>
  </li>
  <li>Gateway Endpoints
    <ul>
      <li>Provisions a gateway and must be used as a target in a route table</li>
      <li>Supports both S3 and DynamoDB
        <h2 id="vpc-flow-logs">VPC Flow Logs</h2>
      </li>
    </ul>
  </li>
  <li>Capture information about IP traffic going into your interfaces:
    <ul>
      <li>VPC Flow Logs</li>
      <li>Subnet Flow Logs</li>
      <li>Elastic network Interface (ENI) Flow Logs</li>
    </ul>
  </li>
  <li>Helps to monitor &amp; troubleshoot connectivity issues</li>
  <li>Captures network information from AWS managed interface too: ELB, RDS, ElasticCache, Redshift, WorkSpaces,NATGW, Transit Gateway…
    <h2 id="vpc-flow-logs-syntax">VPC Flow Logs Syntax</h2>
  </li>
  <li><strong>srcaddr &amp; dstaddr</strong> help identify problematic IP</li>
  <li><strong>srcport &amp; dsttportt</strong> help identity problematic ports</li>
  <li>Action: Success or failures of request due to Security Group / NACL</li>
  <li>Can be used for analytics on usage patterns, or malicious behavior</li>
  <li>Query VPC flow logs using Athena on S3 or CloudWatch Logs Insights</li>
  <li>Flow Log examples: <img src="https://docs.aws.amazon.com/vpc/latest/userguide/flow-logs-records-examples.html" alt="https://docs.aws.amazon.com/vpc/latest/userguide/flow-logs-records-examples.html" />
    <h2 id="vpc-flow-logs--troubleshoot-sg--nacl-issues">VPC Flow Logs – Troubleshoot SG &amp; NACL issues</h2>
    <h3 id="look-at-the-action-field">Look at the “ACTION” field</h3>
  </li>
  <li>Incoming Requests
    <ul>
      <li>Inbound REJECT =&gt; NACL or SG</li>
      <li>Inbound ACCEPT, Outbound REJECT =&gt; NACL</li>
    </ul>
  </li>
  <li>Outgoing request
    <ul>
      <li>Outbound REJECT =&gt; NACL or SG</li>
      <li>Outbound ACCEPT, Inbound REJECT =&gt; NACL
        <h2 id="aws-site-to-site-vpn">AWS Site-to-Site VPN</h2>
        <h3 id="virtual-private-gateway-vgw">Virtual Private Gateway (VGW)</h3>
      </li>
    </ul>
  </li>
  <li>VPN Concentrator on the AWS side of the VPN connection</li>
  <li>VGW is created and attached to the VPC from which you want to create the site to site VP connection</li>
  <li>Possibility to customize the ASN (Autonomous System Number)
    <h3 id="customer-gateway">Customer Gateway</h3>
  </li>
  <li>Software application or physical device onn customer side of the VPN connection</li>
  <li>https://docs.aws.amazon.com/vpn/latest/s2svpn/your-cgw.html
    <h2 id="site-to-site-vpn-connections">Site to Site VPN Connections</h2>
  </li>
  <li>Customer Gateway Device (On-premises)
    <ul>
      <li>What IP address to use?
        <ul>
          <li>Public Internet-routable IP address for your Customer Gateway device</li>
          <li>If it’s behind a NAT device that’s enabled for NAT traversal (NAT-T), use the public IP address of the NAT device</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Important step: enable Route Propagation for the Virtual Private Gateway inn route table that is associated with your subnets</li>
  <li>If you need yo ping your Ec2 instances from on-premises, make sure you add the ICMP protocol on the inbound of your security groups
    <h2 id="aws-vpn-cloudhub">AWS VPN CloudHub</h2>
  </li>
  <li>Provide secure communication between multiple sites, if you have multiple VPN connections</li>
  <li>Low-cost hub and spoke model for primary or secondary network connectivity between different locations(VPN only)</li>
  <li>It’s a VPN connection so it goes over the public internet</li>
  <li>To set it up, connect multiple VPN connection on the same VGW, setup dynamic routing and configure route tables
    <h2 id="direct-connectdx">Direct Connect(DX)</h2>
  </li>
  <li>Provides a dedicated <strong>private</strong> connection from a remote network to your VPC</li>
  <li>Dedicated connection must be setup between your DC and AWS Direct Connect locations</li>
  <li>You need to setup a Virtual Private Gateway on Your VPC</li>
  <li>Access public resources (S3) and private(EC2) on same connection</li>
  <li>Use cases:
    <ul>
      <li>Increase bandwidth throughput - working with large sets - lower cost</li>
      <li>More consistent network experience - application using real-time data feeds</li>
      <li>Hybrid Environments (on prem + cloud)</li>
    </ul>
  </li>
  <li>Support both IPv4 ad Ipv6
    <h2 id="direct-connect-gateway">Direct Connect Gateway</h2>
  </li>
  <li>If you want to setup a Direct Connect to one or more VPC in many different regions (same account), you must use a Direct Connect Gateway
    <h2 id="direct-connect--connection-types">Direct Connect – Connection Types</h2>
  </li>
  <li>Dedicated Connections:  1Gbps to 10 Gbps capacity
    <ul>
      <li>Physical ether port dedicated to a customer</li>
      <li>Request made to AWS first, then completed by AWS Direct Connect Partners</li>
    </ul>
  </li>
  <li>Hosted Connections: 50Mbps, 500Mbps, to 10 Gbps
    <ul>
      <li>Connection request are made via AWS Direct Connect Partners</li>
      <li>Capacity can be added or removed on demand</li>
      <li>1,2,5,10, Gbps available at select AWS Direct Connect Partners</li>
    </ul>
  </li>
  <li>Lead times are often longer than 1 month tto establish a new connection
    <h2 id="direct-connect--encryption">Direct Connect – Encryption</h2>
  </li>
  <li>Data inn transit is not encrypted but is private</li>
  <li>AWS Direct Connect + VPN provides an <strong>IPsec-encrypted private connection</strong></li>
  <li>Good for a extra level of security, but slightly more complex to put in place
    <h2 id="direct-connect---resiliency">Direct Connect - Resiliency</h2>
  </li>
  <li>High Resiliency Critical workloads (One connection at multiple locations)</li>
  <li>Maximum Resiliency for Critical Workloads
(Maximum resilience is achieved by separate connections
terminating on separate devices in more than one location.)
    <h2 id="exposing-services-in-yourvpc-to-othervpc">Exposing services in yourVPC to otherVPC</h2>
  </li>
  <li>Option1: make it public
    <ul>
      <li>Goes through the public www</li>
      <li>Tough to manage access</li>
    </ul>
  </li>
  <li>Option2: VPC peering
    <ul>
      <li>Must create many peering relations</li>
      <li>Open the whole
        <h2 id="aws-privatelink-vpc-endpoint-services">AWS PrivateLink (VPC Endpoint Services)</h2>
      </li>
    </ul>
  </li>
  <li>Most secure &amp; scalable way to expose a service to 1000s of VPC (ow or other accounts)</li>
  <li>Does not require VPC peering, internet gateway, NAT, route tables…</li>
  <li>Requires a network load balancer (service VPC) and ENI (CCustomer VPC) or GWLB</li>
  <li>If the NLB is inn multiple AZ, adn the ENIs inn multiple AZ, the solution is fault tolerant!
    <h2 id="aws-private-link--ecs">AWS Private Link &amp; ECS</h2>
    <h2 id="ec2-classic--classiclink">EC2-Classic &amp; ClassicLink</h2>
  </li>
  <li>EC2-classic: instances run in a single network shared with other customers</li>
  <li>Amazon VPC: your instances run logically isolated to your AWS account
    <ul>
      <li>Must associate a security group</li>
      <li>Enables communication using private IPv4 addresses</li>
      <li>Removes the need to make use of public IPv4 addresses or elastic IP address</li>
    </ul>
  </li>
  <li>Likely to be distract att the exam
    <h2 id="ec2-classic--aws-classiclik">EC2 Classic &amp; AWS ClassicLik</h2>
  </li>
  <li>Ec2-Classic: instance run in a single network shared with other customers</li>
  <li>Amazon VPC: your instances run logically isolated to your AWS account</li>
  <li>ClassicLink allows you to link EC2-Classic instances to a VPC i your account
    <ul>
      <li>Must associate a security group</li>
      <li>Enables communication using private Ipv4 addresses</li>
      <li>Remove the need to make use of public Ipv4 addresses or Elastic IP addresses</li>
    </ul>
  </li>
  <li>Likely to be distract at the exam
    <h2 id="network-topologies-can-become-complicated">Network topologies can become complicated</h2>
    <h2 id="transit-gateway">Transit Gateway</h2>
  </li>
  <li>For having transitive peering between thousands of VPC and on-premises, hub and spoke (star) connection</li>
  <li>Regional resource, can work cross-region</li>
  <li>Share cross account using Resource Access Manager (RAM)</li>
  <li>YOu can peer Transit Gateway across regions</li>
  <li>Route Tables limit which VPC can talk with other VPC</li>
  <li>Works with Direct Connect Gateway, VPN Connections</li>
  <li>Supports IP Multicast (not supported any other AWS service)
    <h2 id="transit-gateway-site-to-site-vpn-ecmp">Transit Gateway: Site to Site VPN ECMP</h2>
  </li>
  <li>ECMP = Equal-cost multi-path routing</li>
  <li>Routing strategy to allow to forward a packet over multiple best path</li>
  <li>Use case: create multiple Site-to-Site VP connection to increase the bandwidth of your connection to AWS
    <h2 id="transit-gateway-throughput-with-ecmptransit-gateway-throughput-with-ecmp">Transit Gateway: throughput with ECMPTransit Gateway: throughput with ECMP</h2>
  </li>
  <li>VPN to virtual private gateway</li>
  <li>VPN to transit gateway
    <h2 id="transit-gateway-share-direct-connect-between-multiple-accounts">Transit Gateway: Share Direct Connect between multiple accounts</h2>
    <h2 id="vpc---traffic-mirroring">VPC - Traffic Mirroring</h2>
  </li>
  <li>Allows you to capture and inspect network traffic in your VPC</li>
  <li>Route the traffic to security appliances that you manage</li>
  <li>Capture the traffic
    <ul>
      <li>From (Source) - ENIs</li>
      <li>To (Targets) - an ENI or a Network Load Balancer</li>
    </ul>
  </li>
  <li>Capture all packets of your interest (optionally, truncate packets)</li>
  <li>Source and Target can be in the same VPC or different VPCs (VPC Peering)</li>
  <li>Use cases: content inspection, threat monitoring, troubleshooting…
    <h2 id="what-is-ipvv6">What is IPvv6</h2>
  </li>
  <li>Ipv4 design for 4.3 billion addresses (they’ll be exhausted soon)</li>
  <li>IPv6 is successor of IPv4</li>
  <li>IPv6 is designed to provide 3.4^10 mu 38 unique IP addresses</li>
  <li>Every IPv6 address is public and internet-routable (no private range)</li>
  <li>Format è x.x.x.x.x.x.x.x (x is hexadecimal, range can be from 0000 to ffff)</li>
  <li>Examples:
    <ul>
      <li>2001:db8:3333:4444:5555:6666:7777:8888</li>
      <li>2001:db8:3333:4444:cccc:dddd:eeee:ffff</li>
      <li>::eall 8 segments are zero</li>
      <li>2001:db8::ethe last 6 segments are zero</li>
      <li>::1234:5678èthe first 6 segments are zero</li>
      <li>2001:db8::1234:5678èthe middle 4 segments are zero
        <h2 id="ipv6-in-vpc">IPv6 in VPC</h2>
      </li>
    </ul>
  </li>
  <li>Ipv4 cannot be disabled for your VPC and subnets</li>
  <li>You can enable IPv6 (they’re public IP addresses) to operate in dual-stack mode</li>
  <li>Your EC2 instances will get at least a private internal IPv4 ad a public IPv6</li>
  <li>They can communicate using either IPv4 or IPv66 to the internet through an Internet gateway
    <h2 id="ipv6-troubleshooting">IPv6 Troubleshooting</h2>
  </li>
  <li>IPv4 cannot be disabled for your VPC and subnets</li>
  <li>So, if you cannot launch an EC2 instance i your subnet
    <ul>
      <li>it’s not because it cannot acquire ann IPv6</li>
      <li>It’s because there are no available IPv4 in your subnet</li>
    </ul>
  </li>
  <li>Solution: create a new IPv4 CIDR in your subnet
    <h2 id="egress-only-internet-gateway">Egress-only Internet Gateway</h2>
  </li>
  <li>Used for IPv66 only</li>
  <li>(similar to a NAT Gateway but for IPv6)</li>
  <li>Allows instances in your VPC outbound connections over IPv6 while preventing the internet to initiate a Ipv6 connection</li>
  <li>You must update the route tables
    <h2 id="ipv6-routing">IPv6 Routing</h2>
  </li>
  <li>Internet gateway</li>
  <li>Egress-only Internet Gateway</li>
  <li>Destination, Target</li>
  <li>Nat Gateway
    <h2 id="vpc-section-summary-13">VPC Section Summary (1/3)</h2>
  </li>
  <li>CIDR - IP range</li>
  <li>VPC - Virtual Private Cloud =&gt; we define a list of IPv4 and IPv6 vCIDR</li>
  <li>Subnets - tied to an AZ, we define a CIDR</li>
  <li>Internet Gateway - at the VPC level, provide IPv4 &amp; IPv66 Internet Access</li>
  <li>Route Tables - Must be edited to add routes from subnets to the IGW, VPC Peering Connection, VPC Endpoints,…</li>
  <li>Bastion Host: Public EC2 instance to SSH into that has SSH connectivity to EC2 instances i private subnets</li>
  <li>NAT Instances: give internet access tto EC2 instances in private subnet. Old, must be setup in a public subnet, disable source / Destination check flag</li>
  <li>NAT Gateway: managed by  AWS, provides scalable internet access to private EC2 instances, IPv4 only</li>
  <li>Private DS + Route 53 :  enable DNS Resolution + DNS Hostnames (VPC)
    <h2 id="vpc-section-summary-23">VPC Section Summary (2/3)</h2>
  </li>
  <li>NACL: stateless, subnet rules for inbound and outbound, do’t forget Ephemeral Ports</li>
  <li>Security Groups - Stateful, operate at the Ec2 instance level</li>
  <li>Reachability Analyzer - perform network connectivity testing between AWS resources</li>
  <li>VPC Peering - connect two VPCs with non overlapping CIDR, non-transitive</li>
  <li>VPC Endpoints - Provide private access to AWS services(S3, DynamoDB, cloudFormation, SSM) within a VPC</li>
  <li>VPC Flow Logs - can be setup at the VPC / Subnet / ENI Level, for ACCEPT and REJECT traffic, helps identifying attacks, analyze using Athena or CloudWatch Logs Insights</li>
  <li>Site-to-Site VPC - Set up a Customer Gateway on DC, a Virtual Private Gateway on VPC, and site-to-site VPN over public Internet</li>
  <li>AWS VPN CloudHub: hub and spoke VPN model to connect your sites
    <h2 id="vpc-section-summary-33">VPC Section Summary (3/3)</h2>
  </li>
  <li>Direct Connect: Setup a Virtual Private Gateway on VPC, and establish a direct private connection to a AWS Direct Connect Location</li>
  <li>Direct Connect Gateway - Setup a Direct Connect to many VPCs in different AWS regions</li>
  <li>AWS PrivateLink / VPC Endpoint Services:
    <ul>
      <li>Connect services privately from your service VPC to customer VPC</li>
      <li>Doesn’t need VPC Peering, public Internet, AT Gateway, Route Tables</li>
      <li>Must be used with Network Load Balancer &amp; ENI</li>
    </ul>
  </li>
  <li>ClassicLink: Connect EC2 - classic EC2 instances privately to your VPC</li>
  <li>Transit Gateway - transitive peering connection for VPC, VPN, DX</li>
  <li>Traffic Mirroring - copy network traffic fromm ENIs for further analysis</li>
  <li>EEgress-only Internet Gateway - Like a NAT Gateway but for IPv6
    <h2 id="networking-costs-in-aws-per-gb---simplified">Networking Costs in AWS per GB - Simplified</h2>
  </li>
  <li>Use Private IP instead of Public IP for good savings and better network performance</li>
  <li>Use same AZ for maximum savings (at the cost of high availability)
    <h2 id="minimizing-egress-traffic-network-cost">Minimizing egress traffic network cost</h2>
  </li>
  <li>Egress traffic: outbound traffic (from AWS tto outside)</li>
  <li>Ingress traffic: inbound traffic - from outside too AWS</li>
  <li>Try to keep as much as internet traffic within AWS to minimize costs</li>
  <li>Direct Connect location that are co-located inn the same AWS Region result inn lower cost for egress network
    <h2 id="s3-data-transfer-pricing--analysis-for-usa">S3 Data Transfer Pricing – Analysis for USA</h2>
  </li>
  <li>S3ingress:free</li>
  <li>S3 to Internet: $0.09 per GB</li>
  <li>S3 Transfer Acceleration
    <ul>
      <li>Faster transfer times(50 to 500% better)</li>
      <li>Additional cost on top of Data transfer Pricing: +$0.04 per GB</li>
    </ul>
  </li>
  <li>S3 to CloudFront: $0.00 per GB</li>
  <li>CloudFront to Internet: $0.085 per GB(Slightly cheaper than S3)
    <ul>
      <li>Caching capability (lower latency)</li>
      <li>Reduce costs associated with S3 RRequests pricing (7x cheaper with CloudFront)</li>
    </ul>
  </li>
  <li>S3 Cross Region Replication: $0.02 per GB
    <h2 id="nat-gateway-vs-gateway-vpc-endpoint">NAT Gateway vs Gateway VPC Endpoint</h2>
    <p>Pricing:
NAT Gateway vs Gateway VPC Endpoint
Subnet 1 route table
Region (us-east-1)
VPC (10.0.0.0/16)
$0.045 NAT Gateway / hour
$0.045 NAT Gateway data processed / GB $0.09 Data transfer out to S3 (cross-region) $0.00 Data transfer out to S3 (same-region)</p>
    <h2 id="disaster-recovery-overview">Disaster Recovery Overview</h2>
  </li>
  <li>Any event that has a negative impact on a company’s business continuity or finances is a disaster</li>
  <li>Disaster recovery (DR) is about preparing for and recovering from a disaster</li>
  <li>What kind of disaster recovery?
    <ul>
      <li>On-premise =&gt; On-premise: traditional DR, and very expensive</li>
      <li>On-premise -&gt; AWS Cloud: hybrid recovery</li>
      <li>AWS Cloud Region A =&gt; AWS Cloud Region B</li>
    </ul>
  </li>
  <li>Need to define two terms
    <ul>
      <li>RPO: Recovery Point Objective</li>
      <li>RTO: Recovery Time Objective
        <h2 id="disaster-recovery-strategies">Disaster Recovery Strategies</h2>
      </li>
    </ul>
  </li>
  <li>Backup ad restore</li>
  <li>Pilot Light</li>
  <li>Warm Standby</li>
  <li>Hot Site / Multi Site Approach
    <h2 id="backup-and-restore-high-rpo">Backup and Restore (High RPO)</h2>
    <h2 id="disaster-recovery--pilot-light">Disaster Recovery – Pilot Light</h2>
  </li>
  <li>A small version of the app is always running in the cloud</li>
  <li>Useful for the critical core (pilot light)</li>
  <li>Very similar tto Backup and Restore</li>
  <li>Faster than backup and restore as critical systems are already up
    <h2 id="warm-standby">Warm Standby</h2>
  </li>
  <li>Full system is up and running, but at minimum size</li>
  <li>Upon disaster, we can scale to production load
    <h2 id="multi-site--hot-site-approach">Multi Site / Hot Site Approach</h2>
  </li>
  <li>Very low RTO (minutes or seconds) – very expensive</li>
  <li>Full Production Scale is running AWS and On Premise
    <h2 id="all-aws-multi-region">All AWS Multi Region</h2>
    <h2 id="disaster-recoverytips">Disaster RecoveryTips</h2>
  </li>
  <li>Backup
    <ul>
      <li>EBS snapshot, RDS automated backups / Snapshots, etc …</li>
      <li>Regular pushes to S3/ S3 IA/ Glacier, Lifecycle Policy, Cross Region Replication</li>
      <li>From O-premise: Snowball or Storage Gateway</li>
    </ul>
  </li>
  <li>High Availability
    <ul>
      <li>Use Route53 to migrate DNS over from Region to Region</li>
      <li>RDS Multi-AZ, ElasticCache Multi-AZ , EFS, S3</li>
      <li>Site to Site VPN as a recovery fromm Direct Connect</li>
    </ul>
  </li>
  <li>Replication
    <ul>
      <li>RDS Replication (Cross Region), AWS Aurora + Global Databases</li>
      <li>Database replication from on-promise to RDS</li>
      <li>Storage Gateway</li>
    </ul>
  </li>
  <li>Automation
    <ul>
      <li>CloudFormattion / Elastic Beantalk to re-create a whole new environment</li>
      <li>Recover / Reboot EC2 instances with CloudWatch iif alarm fail</li>
      <li>AWS Lambda function for customized  automations</li>
    </ul>
  </li>
  <li>Chaos
    <ul>
      <li>Netflix has a “simian-army” random terminating EC2
        <h2 id="dms--database-migration-service">DMS – Database Migration Service</h2>
      </li>
    </ul>
  </li>
  <li>Quickly and securely migrate databases to AWS, resilient, self healing</li>
  <li>The source database remains available during the migration</li>
  <li>Supports:
    <ul>
      <li>Homogeneous migration: ex Oracle to Oracle</li>
      <li>Heterogeneous migrations:  ex Microsoft SQL Server too Aurora</li>
    </ul>
  </li>
  <li>Continuous Data Replication using CDC</li>
  <li>You must create an EC2 instance too perform the replication tasks
    <h2 id="dms-sources-and-targets">DMS Sources and Targets</h2>
    <p>SOURCES:</p>
  </li>
  <li>On-Premise and EC2 instances database
Targets:</li>
  <li>DB
    <h2 id="aws-schema-conversiontool-sct">AWS Schema ConversionTool (SCT)</h2>
  </li>
  <li>Convert your Database’s Schema from one engine to another</li>
  <li>Example OLTP: (SQL Server or Oracle) to MYSQL, PostgresSQL, Aurora</li>
  <li>Example OLAP: (Teradata or Oracle) to Amazon Redshift</li>
  <li>Prefer computer-intensive instances to optimize data conversions</li>
  <li>You do not need to use SCT if you are migrating the same DB engine
    <ul>
      <li>Ex: On-premise PostgreSQL =&gt; RDS PostgreSQL</li>
      <li>The DB engine is still PostgreSQL (RDS is the platform)
        <h2 id="dms---continuous-replication">DMS - Continuous Replication</h2>
        <h2 id="on-premise-strategy-with-aws">On-Premise strategy with AWS</h2>
      </li>
    </ul>
  </li>
  <li>Ability to download Amazon Linux 2 AMI as a VM (.iso format)
    <ul>
      <li>• VMWare, KVM,VirtualBox (Oracle VM), Microsoft Hyper-V</li>
    </ul>
  </li>
  <li>• VM Import / Export
    <ul>
      <li>• Migrate existing applications into EC2</li>
      <li>• Create a DR repository strategy for your on-premisesVMs</li>
      <li>Can export back the VMs from EC2 to on-premises</li>
    </ul>
  </li>
  <li>AWS Application Discovery Service
    <ul>
      <li>Gather information about your o-premise servers to plan a migration</li>
      <li>Server utilization and dependency mappings</li>
      <li>Track with AWS Migration Hub</li>
    </ul>
  </li>
  <li>AWS Database Migration Service (DMS)
    <ul>
      <li>replicate On-premise =&gt; AWS, AWS =&gt; AWS , AWS =&gt; O-premise</li>
      <li>Work with various database technologies (Oracle, Mysql, DynamoDB, etc…)</li>
    </ul>
  </li>
  <li>AWS Server Migration Service (SMS)
    <ul>
      <li>Incremental replication of on-premise live servers to AWS
        <h2 id="aws-datasync">AWS DataSync</h2>
      </li>
    </ul>
  </li>
  <li>Move large amount of data from on-premises to AWS</li>
  <li>Can synchronize to: Amazon S3 (any storage classes – including Glacier), Amazon EFS, Amazon FSx (Windows, Lustre…)</li>
  <li>Move data from your NAS or file system via NFS or SMB</li>
  <li>Replication tasks can be scheduled hourly, daily, weekly</li>
  <li>Leverage the DataSync agent to connect to your systems</li>
  <li>Can setup a bandwidth limit
    <h2 id="aws-backup">AWS Backup</h2>
  </li>
  <li>Fully managed service</li>
  <li>Centrally manage and automate across AWS services</li>
  <li>No need to create custom script and manual process</li>
  <li>• Supported services:
    <ul>
      <li>EC2, EBS</li>
      <li>S3</li>
      <li>RDS</li>
      <li>EFS, DocumentDB, Neptune</li>
      <li>FSx</li>
      <li>Storage Gateway</li>
    </ul>
  </li>
  <li>• Supports cross-region backups</li>
  <li>• Supports cross-account backups
    <h2 id="aws-backup-1">AWS Backup</h2>
  </li>
  <li>• Supports PITR for supported services</li>
  <li>• On-Demand and Scheduled backups</li>
  <li>• Tag-based backup policies</li>
  <li>• You create backup policies known as Backup Plans
    <ul>
      <li>Backup frequency (every 12 hours, daily, weekly, monthly, cron expression)</li>
      <li>Backup window</li>
      <li>Transition to Cold Storage (Never, Days, Weeks, Months, Years)</li>
      <li>Retention Period (Always, Days, Weeks, Months, Years)
<img src="https://terabox.com/s/1vucCc2Fkjg8452UZcte1dw" alt="" />
        <h2 id="aws-backup-vault-lock">AWS Backup Vault Lock</h2>
      </li>
    </ul>
  </li>
  <li>Enforce a WORM (Write Once Read Many) state for all the backups that you store in your AWS Backup Vault</li>
  <li>Additional layer of defense to protect your backups against:
    <ul>
      <li>Inadvertent or malicious delete operations</li>
      <li>Updates that shorten or later retention periods</li>
    </ul>
  </li>
  <li>Even the root user cannot delete backups when enable
    <h2 id="transferring-large-amount-of-data-into-aws">Transferring large amount of data into AWS</h2>
  </li>
  <li>Example: transfer 200TB of data in the cloud. We have a 100 Mbps internet connection.</li>
  <li>Over the internet / Site-to-Site VPN:
    <ul>
      <li>Immediate to Setup</li>
      <li>Will take 200(TB) * 1000(GB) * 1000(MB) * 8(MB)/100 MBps = 16000000s = 185d</li>
    </ul>
  </li>
  <li>Over direct connect 1Gbps:
    <ul>
      <li>Log for the one time setup (over a month)</li>
      <li>Will take 200(TB) * 1000(GB) * 8(GB) / 1 Gbps = 18.5d</li>
    </ul>
  </li>
  <li>Over Snowball:
    <ul>
      <li>Will take 2 to 3 snowballs i parallel</li>
      <li>Takes about 1 week for the end-to-end transfer</li>
      <li>Ca be combined with DMS</li>
    </ul>
  </li>
  <li>For ongoing replication / transfer: Site - to - Site VP or DX with DMS or DataSync</li>
</ul>]]></content><author><name>Hardwork đẹp trai</name></author><category term="Fullstack" /><category term="Architect" /><category term="AWS" /><category term="aws" /><category term="vpc" /><category term="subnet" /><category term="DataSync" /><category term="Disaster Recovery Strategies" /><category term="PilotLight" /><category term="Database Migration Service" /><category term="Disaster Recovery" /><category term="DMS" /><summary type="html"><![CDATA[Virtual Private Cloud (VPC) VPC Components Diagram Understanding CIDR - IPv4 Classless Inter-Domain Routing - a method for allocating IP addresses Used in Security Groups rules and AWS networking in general They help to define an IP address range: We’ve seen WW.XX.YY.ZZ/32 =&gt; one IP We’ve seen 0.0.0.0/0 =&gt; all IPs But we can define 192.168.0.0/26 =&gt; 192.168.0.0 - 192.168.0.63 (64 IP addresses) A CIDR consists of two components Base IP Represents an IP contained in the range (XX.XX.XX.XX) Example: 1.0.0.0 192.168.0.0 Subnet Mask Defines how many bits can change in the IP Example: /0, /24, /32 Can take two forms: /8 =&gt; 255.0.0.0 /16 =&gt; 255.255.0.0 /24 =&gt; 255.255.255.0 /32 =&gt; 255.255.255.255 Understanding CIDR - Subnet Mask The subnet mask basically allows part of the underlying IP to get additional next values from the base IP 192.168.0.0 / 32 allows for 1 IP -&gt; 192.168.0.0 192.168.0.0 / 31 allows for 2 IP -&gt; 192.168.0.1 192.168.0.0 / 30 allows for 4 IP -&gt; 192.168.0.0 -&gt; 192.168.0.3 192.168.0.0 / 29 allows for 8 IP -&gt; 192.168.0.7 192.168.0.0 / 28 allows for 16 IP -&gt; 192.168.0.15 … 192.168.0.0 / 16 allows for 65.536 IP -&gt; 192.168.255.255 192.168.0.0 / 0 allows for all IPs Understanding CIDR – Little Exercise 192.168.0.0 / 24 = … ? 192.168.0.0 – 192.168.0.255 (256 IPs) 192.168.0.0/16 = … ? 192.168.0.0 – 192.168.255.255 (65,536 IPs) 134.56.78.123/32 = … ? Just 134.56.78.123 0.0.0.0/0 all ips When in doubt, use this website: https://www.ipaddressguide.com/cidr Public vs Private IP (IPv4) The internet assigned number authority (IANA) established certain blocks of IPv4 addresses for the use of private (LAN) and public (internet) addresses Private IP can only allow certain values 10.0.0.0 - 10.255.255.255 (10.0.0.0/8) &lt;- in big networks 172.16.0.0 - 172.31.255.255 (172.16.0.0/12) &lt;- AWS default VPC in that range 192.168.0.0 - 192.168.255.255 (192.168.0.0/16) &lt;- e.g, home networks All the rest of the IP address on the Internet are Public VPC in AWS – IPv4 VPC = Virtual Private Cloud You can have multiple VPCs inn an Ắ region (mã 5 pẻ region - soft limit) Max. CIDR per VPC is 5, for each CIDR: Min. size is /28 (16 ip) Max size is /16 (65536 ip) Because VP is private, only the Private IPv4 ranges are allowed: 10.0.0.0 - 10.255.255.255 (10.0.0.0/8) 172.16.0.0 - 172.31.255.255 (172.16.0.0/12) 192.168.0.0 - 192.168.255.255 (192.168.0.0/16) Your VPC CIDR should NOT overlap with your other network VPC – Subnet (IPv4) AWS reserves 5 IP addresses (first 4 &amp; last) inn each subnet These 5 IP addresses are not available for use and can’t be assigned to an EC2 instance Example: If IDR block 10.0.0.0/24, then reserved IP addresses are: 10.0.0.0 Network Address 10.0.0.1 reserved by AWS for the VPC router 10.0.0.2 reserved by AWS for mapping to Amazon-provided DNS 10.0.0.3 reserved by AWS for future use 10.0.0.255 Network Broadcast address. AWS doesn’t support broadcast in a VPC, therefore the address is reserved Example Tip: If you need 29 IP addresses for EC2 instances: You can’t choose a subnet of size /27 (32 IP addresses, 32 - 5 = 27 &lt; 29) YOu need to choose a subnet of size /26 (64 IP address, 64 - 5 = 59 &gt; 29) Internet Gateway (IGW) Allows resources (e.g EC2 instances) in a VP connect to the Internet It scales horizontally and is highly available and redundant Must be created separately from a VPC One VPC can only be attached to one IGW adn vice versa Internet Gateway in their own do not allow internet access… Route tables must also be edited! VPC - Subnet (IPv4) AWS reserves 5 IP addresses (first 4 &amp; last) in each subnet These 5 IP addresses are not available for use adn can’t be assigned to an EC2 instance Example if CIDR block 10.0.0.0/24, then reserved IP addresses are: 10.0.0.0 Network Address 10.0.0.1 reserved by AWS for VPC router 10.0.0.2 reserved by AWS mapping Amazon-provided DNS 10.0.0.3 reserved by AWS for future use 10.0.0,255 Network Broadcast Address AWS does not support broadcast inn a VPC therefore the address is reserved Example Tip: if you need 29 IP address for EC2 instances: You can’t choose a subnet of size /27 (32 IP address, 32-5 = 27 &lt; 29) You need to choose a subnet of size /26 (64 - 5 = 59 &gt; 29) Bastion Hosts We can use a Bastion Host to SSH into our private EC2 instances The bastion is in the public subnet which is then connected to all other private subnet Bastion Host security group must be tightened Example Tip: Make sure the bastion host oly has port 22 traffic from the IP address you need, not from the security groups of your other EC2 instances NAT Instance(outdated but still at the exam) NAT = Network Address Transaction Allows EC2 instances in private subnet to connect to the internet Must be launched in a public subnet Must disable EC2 setting: Source / destination check Must have Elastic IP attached to it Route Tables must be configured to route traffic from private subnet to the NAT instance NAT Instance - Comments Pre-configured Amazon Linux AMI is available Reached the end of standard support on December 31, 2020 Not highly available / resilient setup [ out of the box You need to create ann ASG inn multi-AZ + resilient user-data script Internet traffic bandwidth depends on EC2 instance type YOu must manage Security Groups &amp; rules Inbound : Allow HTTP/HTTPS coming from Private Subnet Allow SSH from your home network (access is provided through Internet Gateway) Outbound: Allow HTTP/HTTPS traffic to the internet NAT Gateway AWS-managed NAT, higher bandwidth, high availability, no administration Pay per hour for usage and bandwidth NATGW is created in a specific Availability Zone, uses an Elastic IP Can’t be used by EC2 instance in the same subnet (only from other subnets) Requires an IGW (Private Subnet =&gt; NATGW =&gt; IGW) 5Gbs of bandwidth with automatic scaling up to 45Gbps No Security Groups to manage / required NAT Gateway with high availability NAT Gateway is resilient within a single Availability Zone Must create multiple NAT Gateways inn multiple AZs for fault tolerance There is no cross-AZ failover needed because if an AZ goes down it doesn’t need NAT NAT Gateway vs. NAT Instance]]></summary></entry><entry><title type="html">AWS Virtual Private Cloud Overview (VPC) part 1</title><link href="http://localhost:4000/posts/aws-virtual-private-cloud-overview-vpc-part-1/" rel="alternate" type="text/html" title="AWS Virtual Private Cloud Overview (VPC) part 1" /><published>2024-02-07T00:00:00+07:00</published><updated>2024-02-07T00:00:00+07:00</updated><id>http://localhost:4000/posts/aws-virtual-private-cloud-overview-vpc-part-1</id><content type="html" xml:base="http://localhost:4000/posts/aws-virtual-private-cloud-overview-vpc-part-1/"><![CDATA[<h1 id="virtual-private-cloud-vpc">Virtual Private Cloud (VPC)</h1>
<h2 id="default-vpc-walkthrough">Default VPC Walkthrough</h2>
<ul>
  <li>All new AWS accounts have a default VPC</li>
  <li>New EC2 instances are launched into the default VPC of no subnet is specified</li>
  <li>Default VPC has Internet connectivity and all EC2 instances inside it have public IPv4 addresses</li>
  <li>We also get a public and a private IPv4 DNS names
    <h2 id="vpc-in-aws---ipv4">VPC in AWS - IPv4</h2>
  </li>
  <li>VPC = Virtual Private Cloud</li>
  <li>You can have multiple VPCs in an AWS region (max. 5 per region - soft limit)</li>
  <li>Max. CIDR per VPC is 5, for each CIDR
    <ul>
      <li>Min. size is /28 (16 addresses)</li>
      <li>Max. size is /16 (65536 IP addresses)</li>
    </ul>
  </li>
  <li>Because VPC is private, only the Private IPv4 tanges are allowed
    <ul>
      <li>10.0.0.0 – 10.255.255.255 (10.0.0.0/8)</li>
      <li>172.16.0.0 – 172.31.255.255 (172.16.0.0/12)</li>
      <li>192.168.0.0 – 192.168.255.255 (192.168.0.0/16)</li>
    </ul>
  </li>
  <li>Your VPC CIDR should NOT overlap with your other networks (e.g corporate)
    <h2 id="vpc--subnet-ipv4">VPC – Subnet (IPv4)</h2>
  </li>
  <li>AWS reserves 5 IP addresses (first 4 &amp; last 1) in each subnet</li>
  <li>These 5 IP addresses are not available for use and can’t be assigned to an EC2 instance</li>
  <li>Example; if CIDR block 10.0.0.0/24 then reserved IP addresses are:
    <ul>
      <li>10.0.0.0 - Network Address</li>
      <li>10.0.0.1 - reserved by AWS for the VPC router</li>
      <li>10.0.0.2 - reserved by AWS for mapping to mazon-provided DNS</li>
      <li>10.0.0.3 - reserved by AWS for future use</li>
      <li>10.0.0.255 - Network Broadcast Addressm AWS does not support broadcast in a VPC therefore the address is reserved</li>
    </ul>
  </li>
  <li>Exam tip:  if you need 29 IP addresses for EC2 instances:
    <ul>
      <li>You can’t choose a subnet of size /27 (32 IP addresses, 32-5 = 27 &lt; 29)</li>
      <li>you need to choose a subnet of size /26 (64 IP address, 64 - 5 = 59 &gt; 29)
        <h2 id="internet-gateway-igw">Internet Gateway (IGW)</h2>
      </li>
    </ul>
  </li>
  <li>Allows resources (e.g EC2 instances) in a VPC connect to the Internet</li>
  <li>It scales horizontally and is highly available and redudant</li>
  <li>Must be created separately from a VPC</li>
  <li>One VPC can only be attached to one IGW and vice versa</li>
  <li>Internet Gateways on their own do not allow Internet access…</li>
  <li>Route tables must also be edited!
    <h2 id="state-of-hands-on">State of Hands-on</h2>
    <h2 id="adding-subnets">Adding Subnets</h2>
    <h2 id="adding-internet-gateway">Adding Internet Gateway</h2>
    <h2 id="editing-route-tables">Editing Route Tables</h2>
    <p><img src="https://data.terabox.com/thumbnail/9fb62f1596e9ed4dc2fc7fefd6d03f32?fid=4401547290288-250528-267962913534974&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-4wpRmb5WiiClJEKWWac4tUx2jiQ%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=282799347026048208&amp;dp-callid=0&amp;time=1667786400&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" /></p>
    <h2 id="bastion-hosts">Bastion Hosts</h2>
  </li>
  <li>We can use a <strong>Bastion Host to SSH</strong> into our private EC2 instances</li>
  <li>The bastion is in the public subnet which is then connected to all other private subnets</li>
  <li>Basion Host security group must be tighened</li>
  <li>Exam Tip: Makesure the bastion host only has port 22 traffic from the IP address you need not from the security groups of your other EC2 instances
<img src="https://data.terabox.com/thumbnail/3cd2fd8a8573a1b98e48f214f0abc928?fid=4401547290288-250528-138276258724815&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-bjiEXYU1AD6mmSyDTPWdYPHBIzw%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=282846205064584510&amp;dp-callid=0&amp;time=1667786400&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
    <h2 id="nat-instance-outdated-but-still-at-the-exam">NAT Instance (outdated, but still at the exam)</h2>
  </li>
  <li>NAT = Network Address Translation</li>
  <li><strong>Allows EC2 instances in private subnet to connect to the Internet</strong></li>
  <li>Must be launched in a public subnet</li>
  <li>Must disable EC2 setting: Source / destination Check</li>
  <li>Must have <strong>Elastic IP</strong> attached to it</li>
  <li>Route Tables must be configured to route traffic from private subnets to the NAT instance
<img src="https://data.terabox.com/thumbnail/2a47b3cbc0164e6945f11e6243385c2a?fid=4401547290288-250528-992807556060211&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-%2bsDYOmzvE6jB2DfTtTq%2bd8cqQjY%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=282899231088131500&amp;dp-callid=0&amp;time=1667790000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
    <h2 id="nat-instance">NAT Instance</h2>
    <p><img src="https://data.terabox.com/thumbnail/9d130b0e5c42d1dee1983d51aec13d92?fid=4401547290288-250528-477603417274662&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-LB2%2f3mHMFxnxsrt6%2foQOz0qZ1%2fM%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=282930543950583860&amp;dp-callid=0&amp;time=1667790000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" /></p>
    <h2 id="nat-instance--comments">NAT Instance – Comments</h2>
  </li>
  <li>Pre-configured Amazon Linux AMI is available
    <ul>
      <li>Reached the end of standard support on December 31, 2020</li>
    </ul>
  </li>
  <li>Not highly available / <strong>resilient</strong> setup out of the box
    <ul>
      <li>You need to create an <strong>ASG</strong> in multi-AZ + resilient user-data script</li>
    </ul>
  </li>
  <li>Internet traffic bandwidth depends on EC2 instance type</li>
  <li>You must manage Security Groups &amp; Rules:
    <ul>
      <li>Inbound:
        <ul>
          <li>Allow <em>HTTP / HTTPS</em> traffic coming from Private Subnets</li>
          <li>Allow <em>SSH</em> from your <strong>home network</strong> (access is provided through Internet Gateway)</li>
        </ul>
      </li>
      <li>Outbound:
        <ul>
          <li>Allow <strong>HTTP / HTTPS</strong> traffic to the Internet
            <h2 id="nat-gateway">NAT Gateway</h2>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>AWS-managed NAT, higher bandwidth, high availability, no administration</li>
  <li><strong>Pay per hour</strong> for usage and bandwidth</li>
  <li>NATGW is created in a specific Availability Zone, uses an Elastic IP</li>
  <li>Can’t be used by EC2 instance in the same subnet (only from other subnets)</li>
  <li>Requires an <strong>IGW</strong> (Private Subnet =&gt; NATGW =&gt; IGW)</li>
  <li>5 Gbps of bandwidth with automatic scaling up to 45 Gbps</li>
  <li>No Security Groups to manage / required
<img src="https://data.terabox.com/thumbnail/823c0bf01053475124de6af869831d84?fid=4401547290288-250528-17275655260103&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-74CSI7l9idweuR%2fA43e1pCmHNHc%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=283163126554811121&amp;dp-callid=0&amp;time=1667790000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
    <h2 id="nat-gateway-with-high-availability">NAT Gateway with High Availability</h2>
  </li>
  <li>NAT Gateway is resilient within a single Availability Zone</li>
  <li>Must create multiple NAT Gateways in multiple AZs for fault-teolerance</li>
  <li>There is no cross-AZ failover needed because if an AZ goes down it doesn’t need NAT
<img src="https://data.terabox.com/thumbnail/70dd59287aa21bb7dfb8805327db6888?fid=4401547290288-250528-276097707808678&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-Ipk4hMI0JTUVmPuudtNmH454dls%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=283234449625563540&amp;dp-callid=0&amp;time=1667790000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
    <h2 id="nat-gateway-vs-nat-instance">NAT Gateway vs. NAT Instance</h2>
    <p><img src="https://data.terabox.com/thumbnail/656b0c4bb192c37c2ec5e1f4b0d9a408?fid=4401547290288-250528-50458833276319&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-NPu6m4bd9tj0eS54629%2bueSfwII%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=283259238658395034&amp;dp-callid=0&amp;time=1667790000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" /></p>
    <h2 id="dns-resolution-in-vpc">DNS Resolution in VPC</h2>
  </li>
  <li>DNS Resolution (enableDnsSupport)
    <ul>
      <li>Decides if DNS resolution from Route 53 Resolver server is supported for the VPC</li>
      <li>True (default): it queries the Amazon Provider DNS Server at 169.254.169.253 or the reserved IP address at the base of the VPC Ipv4 network range plus two
<img src="https://data.terabox.com/thumbnail/9ed3ff1f8756a32d2e2cfb63061bb4eb?fid=4401547290288-250528-1009614502455797&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-EbMYG0dsg3UDF%2b%2fU8lmoieXd%2bpw%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=283697272948062055&amp;dp-callid=0&amp;time=1667790000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
        <h2 id="dns-resolution-in-vpc-1">DNS Resolution in VPC</h2>
      </li>
    </ul>
  </li>
  <li>DNS Hostnames (<strong>enableDnsHostnames</strong>)
    <ul>
      <li>By default
        <ul>
          <li>True =&gt; default VPC</li>
          <li>False =&gt; newly created VPCs</li>
        </ul>
      </li>
      <li>Won’t do anything unless enableDnsSupport=true</li>
      <li>If True, assigns public hostname to EC2 instance if it has a public IPv4
<img src="https://data.terabox.com/thumbnail/a3a68fd61b3a887dc62b25e79d6a9d12?fid=4401547290288-250528-570743489931740&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-zkuc8UTTig4z0t4e9DuGV89f8oI%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=283736114576449515&amp;dp-callid=0&amp;time=1667790000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
        <h2 id="dns-resolution-in-vpc-2">DNS Resolution in VPC</h2>
      </li>
    </ul>
  </li>
  <li>If you use custom DNS domain names in a Private Hosted Zone in Route 53, you must set both these attributes (enableDnsSupport &amp; enableDnsHostname) to true
<img src="https://data.terabox.com/thumbnail/16bb289879e42b7553577efd09c1b903?fid=4401547290288-250528-986092333977002&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-2R151TZsc6%2bheEjyy%2byyVKcIrVk%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=283859264380443457&amp;dp-callid=0&amp;time=1667793600&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
    <h2 id="security-groups--nacls">Security Groups &amp; NACLs</h2>
    <h3 id="incoming-request">Incoming Request</h3>
    <p><img src="https://data.terabox.com/thumbnail/785a88a7064ba6bb2a5c7ba66def50f9?fid=4401547290288-250528-195470369874452&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-gOR6%2f0hrjDWBKbEUmC0P%2bbw2zv0%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=283899014333498181&amp;dp-callid=0&amp;time=1667793600&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" /></p>
    <h3 id="outgoing-request">Outgoing Request</h3>
    <p><img src="https://data.terabox.com/thumbnail/9f7acdce107e635c698de1e35f40a509?fid=4401547290288-250528-358988252706630&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-MvXgrPGpa9L6bl3ts4S2qhc9lxg%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=283917836417513624&amp;dp-callid=0&amp;time=1667793600&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" /></p>
    <h2 id="network-access-control-list-nacl">Network Access Control List (NACL)</h2>
  </li>
  <li>NACL are like a firewall which control traffic from and to subnet</li>
  <li>One NACL per subnet, new subnets are assigned the Default NACL</li>
  <li>You define NACL Rules:
    <ul>
      <li>Rules have a number (1-32766), higher precedence with a lower number</li>
      <li>First rule match will drive the decision</li>
      <li>Example: if you define #100 ALLOW 10.0.0.10/32 and #200 DENY 10.0.0.10/32, the IP address will be allowed because 100 has a higher precedence over 200</li>
      <li>The last rule is an asterisk (*) and denies a request in case of no rule match</li>
      <li>AWS recommends adding rules by increment of 100</li>
    </ul>
  </li>
  <li>Newly created NACLs will deny everything</li>
  <li>NACL are a great way of blocking a specific IP address at the subnet level
    <h2 id="nacls">NACLs</h2>
    <p><img src="https://data.terabox.com/thumbnail/4a8763fb6439eb2a4d8d2a1d8548a85c?fid=4401547290288-250528-602714999390062&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-uUHsNau0ehOD9cJvWbWPTAGNiaQ%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=284030649146595937&amp;dp-callid=0&amp;time=1667793600&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" /></p>
  </li>
  <li>default NACLs
    <ul>
      <li>Accepts everything inbound/outbound with the subnets it’s associated with</li>
      <li>Do NOT modify the Default NACL, instead create custom NACLs
<img src="https://data.terabox.com/thumbnail/8079963019e0e4a8f3ccda1ecd589685?fid=4401547290288-250528-198544445042386&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-9OBw%2fkfIi8O7rvIhb8EYs2wqmWk%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=284081867571416673&amp;dp-callid=0&amp;time=1667793600&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
        <h2 id="ephemeral-ports">Ephemeral Ports</h2>
      </li>
    </ul>
  </li>
  <li>For any two endpoints to establish a connection, they must use ports</li>
  <li>Clients connect to a defined port, and expect a response on an ephemeral port</li>
  <li>Different Operating Systems use different port ranges, examples:
    <ul>
      <li>IANA &amp; MS Windows 10 -&gt; 49152 - 65535</li>
      <li>Many Linux Kernels -&gt; 32768 - 60999
<img src="https://data.terabox.com/thumbnail/bf6db854885e7ecc341d59e1f1d831fe?fid=4401547290288-250528-1017307392113384&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-BOsDYjYjOzyh%2bAYPdmMBg2rjWwQ%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=284155829562810696&amp;dp-callid=0&amp;time=1667793600&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
        <h2 id="nacl-with-ephemeral-ports">NACL with Ephemeral Ports</h2>
        <p><img src="https://data.terabox.com/thumbnail/a684f552865130bdfd324e5fd6d5b3f8?fid=4401547290288-250528-266773662537168&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-EylWuZC01yHD4li7PdODPiFpiUg%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=284181500025740932&amp;dp-callid=0&amp;time=1667793600&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" /></p>
        <h2 id="create-nacl-rules-for-each-target-subnets-cidr">Create NACL rules for each target subnets CIDR</h2>
        <p><img src="https://data.terabox.com/thumbnail/5e6814c32300ccaf1e84bdfffdcf757d?fid=4401547290288-250528-446865333136786&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-yskDvGsIbINSx88EqVj%2bOHfDLw0%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=284296033448281598&amp;dp-callid=0&amp;time=1667793600&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" /></p>
        <h2 id="security-group-vs-nacls">Security Group vs. NACLs</h2>
        <p><img src="https://data.terabox.com/thumbnail/20a12ef137884ef313875ee5795c610f?fid=4401547290288-250528-215891567433945&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-cIe7%2ffBQpnB6C3xUpbxZA%2bl1TVw%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=284342840648945730&amp;dp-callid=0&amp;time=1667793600&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" /></p>
        <h2 id="vpc--reachability-analyzer">VPC – Reachability Analyzer</h2>
      </li>
    </ul>
  </li>
  <li><strong>A network diagnostics tool</strong> that troubleshoots network connectivity between two endpoints in your VPC(s)</li>
  <li>It builds a model of the network configuration, then checks the reachability based on these configurations (it doesn’t send packets)</li>
  <li>When the destination is
    <ul>
      <li>Reachable - It proceduces hop by hop details of the virtual network path</li>
      <li>Not reachable - It identifies the blocking components</li>
    </ul>
  </li>
  <li>Use cases: troubleshoot connectivity issues, ensure network configuration is as intended…
<img src="https://data.terabox.com/thumbnail/3934e36b9b6960f639760df6bfd046b3?fid=4401547290288-250528-288814259442807&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-ki9rYjz3XvOpUCgjAssoKZq21k4%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=284502339218381820&amp;dp-callid=0&amp;time=1667793600&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
    <h2 id="vpc-peering">VPC Peering</h2>
  </li>
  <li>Privately connect two VPCs using AWS network</li>
  <li>Make them behave as if they were in the same network</li>
  <li>Must not have overlapping CIDRs</li>
  <li>VPC Peering connection is NOT transitive (must be established for each VPC that need to communicate with one another)</li>
  <li>You must update route tables in each VPC’s subnets to ensure EC2 instances can communicate with each other
<img src="https://data.terabox.com/thumbnail/1b07a43aa0bf042e75f1ca524f7eb2df?fid=4401547290288-250528-757932012546600&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-J1ZequbycllRe0M0VNfHC92Rghc%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=284559647513922897&amp;dp-callid=0&amp;time=1667793600&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
    <h2 id="vpc-peering--good-to-know">VPC Peering – Good to know</h2>
  </li>
  <li>You can create VPC Peering connection between VPCs in different AWS accounts/regions</li>
  <li>You can reference a security group in a peered VPC (works cross – same region)
<img src="https://data.terabox.com/thumbnail/642836c478a88d3eb63a8b8c3d222c55?fid=4401547290288-250528-200380958320443&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-5Fzc1KHjTZ8hO3jBMlrHcpuR3tA%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=286179420412954340&amp;dp-callid=0&amp;time=1667800800&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
    <h2 id="vpc-peering-1">VPC Peering</h2>
    <p><img src="https://data.terabox.com/thumbnail/91a75cb525126c2077a94101cbcd1f10?fid=4401547290288-250528-104339546682393&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-J5XOK49QaYoimRvFRF0dtLv5yp8%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=286200908082051641&amp;dp-callid=0&amp;time=1667800800&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" /></p>
    <h2 id="vpc-endpoints">VPC Endpoints</h2>
    <p><img src="https://data.terabox.com/thumbnail/99dac4a7aced51e43b1330cb6f8d10b0?fid=4401547290288-250528-1042791383192014&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-Zmv64lxOhMurl1u%2fmXFxPu0q0bI%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=286372589493266339&amp;dp-callid=0&amp;time=1667800800&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" /></p>
    <h2 id="vpc-endpoints-aws-privatelink">VPC Endpoints (AWS PrivateLink)</h2>
  </li>
  <li>Every AWS service is publicly exposed (public URL)</li>
  <li>VPC Endpoints (powered by AWS PrivateLink) allows you to connect to AWS services using a private network instead of using the public Internet</li>
  <li>They’re redudant and scale horizontally</li>
  <li>They remove the need of IGW, NATGW,… to access AWS Services</li>
  <li>In case of issues
    <ul>
      <li>Check DNS Setting Resolution in your VPC</li>
      <li>Check Route Tables
<img src="https://data.terabox.com/thumbnail/6c502b46d55a17f5e4a86750854d7bf7?fid=4401547290288-250528-714661903672576&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-IxhZ3uYNO0oIVmbx8FIj6U2hDqc%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=286511696333427470&amp;dp-callid=0&amp;time=1667800800&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
        <h2 id="types-of-endpoints">Types of Endpoints</h2>
      </li>
    </ul>
  </li>
  <li>Interface Endpoints
    <ul>
      <li>Provisions an ENI (private IP address) as an entry point (must attach a Security Group)</li>
      <li>Supports most AWS services</li>
    </ul>
  </li>
  <li>Gateway endpoints
    <ul>
      <li>Provisions a gateway and must be used as a target in a route table</li>
      <li>Supports both S3 and DynamoDB
        <h2 id="vpc-flow-logs">VPC Flow Logs</h2>
      </li>
    </ul>
  </li>
  <li>Capture information about IP traffic going into your interfaces:
    <ul>
      <li>VPC Flow Logs</li>
      <li>Subnet Flow Logs</li>
      <li>Elastic Network Interface (ENI) FLow Logs</li>
    </ul>
  </li>
  <li>Helps To monitor &amp; troubleshoot connectivity issues</li>
  <li>Flow logs data can go to S3 / CLoudWatch Logs</li>
  <li>Captures network information from AWS managed interfaces too: ELB, RDS, ElastiCache, Redshift, Workspaces, NATGW, Transit Gateway…
    <h2 id="vpc-flow-logs-1">VPC Flow Logs</h2>
    <p><img src="https://data.terabox.com/thumbnail/4b028f9de2ce9b4818afbae77303f60e?fid=4401547290288-250528-792214063705990&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-X7hsVq5drjKnS6MgEMPHSvwCkDc%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=286663488675861018&amp;dp-callid=0&amp;time=1667800800&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" /></p>
    <h2 id="vpc-flow-logs-syntax">VPC Flow Logs Syntax</h2>
    <p><img src="https://data.terabox.com/thumbnail/6d8e611a920154fc11dddbe46fd105df?fid=4401547290288-250528-1018178524076876&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-p5gqnFvF%2bDDpdW1laGe5ZHYHB44%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=286730840888121535&amp;dp-callid=0&amp;time=1667800800&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" /></p>
  </li>
  <li>srcaddr &amp; dstaddr: help identify problematic IP</li>
  <li>srcport &amp; dstport: help identify problematic ports</li>
  <li>Action: success or failure of the request due to security group / NACL</li>
  <li>Can be used for analytics on usage patterns, or malicious behavior</li>
  <li>Query VPC flow logs using Athena on S3 or CloudWatch Logs Insights</li>
  <li>Flow Logs examples: https://docs.aws.amazon.com/vpc/latest/userguide/flow-logs-records-examples.html
    <h2 id="vpc-flow-logs--troubleshoot-sg--nacl-issues">VPC Flow Logs – Troubleshoot SG &amp; NACL issues</h2>
  </li>
  <li>Incoming Requests
    <ul>
      <li>Inbound REJECT =&gt; NACL or SG</li>
      <li>Inbound ACCEPT, Outbound REJECT =&gt; NACL</li>
    </ul>
  </li>
  <li>Outgoing Requests
    <ul>
      <li>Outbound REJECT =&gt; NACL or SG</li>
      <li>Outbound ACCEPT, Inbound REJECT =&gt; NACL
<img src="https://data.terabox.com/thumbnail/8e5f500ef0bf9a3cd692ba072d3137fb?fid=4401547290288-250528-225077615269248&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-QlAN1qrn7LBoR658ylUoYO7B1ok%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=286805394433838249&amp;dp-callid=0&amp;time=1667804400&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
        <h2 id="aws-site-to-site-vpn">AWS Site-to-Site VPN</h2>
        <p><img src="https://data.terabox.com/thumbnail/91c2faff8a3b1115541754f96205b753?fid=4401547290288-250528-356904733988475&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-bFEZe7mVxXZg%2fGqaGD%2f8lTNdARg%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=286908133371043706&amp;dp-callid=0&amp;time=1667804400&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" /></p>
        <h2 id="aws-site-to-site-vpn-1">AWS Site-to-Site VPN</h2>
      </li>
    </ul>
  </li>
  <li>Virtual Private Gateway (VGW)
    <ul>
      <li>VPN concentrator on the AWS side of the <strong>VPN connection</strong></li>
      <li>VGW is created and attached to the VPC from which you want to create the Site-to-site VPN connection</li>
      <li>Possibility to customize the ASN (Autonomous System Number)</li>
    </ul>
  </li>
  <li>Customer Gateway (CGW)
    <ul>
      <li>Software application or physical device on customer side of the VPN connection</li>
      <li>https://docs.aws.amazon.com/vpn/latest/s2svpn/your-cgw.html
        <h2 id="site-to-site-vpn-connections">Site-to-site VPN connections</h2>
      </li>
    </ul>
  </li>
  <li>Customer Gateway Device (On-premises)
    <ul>
      <li>What IP address to use?
        <ul>
          <li><strong>Public</strong> Internet routable IP address for your customer gateway device</li>
          <li>If it’s behind a NAt device that’s enabled for <strong>NAT traversal</strong> (NAT-T), use the public IP address of the NAT device</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>Important step</strong>: enable <strong>Route Propagation</strong> for the virtual private gateway in the route table that is associated with your subnets</li>
  <li>If you need to ping your EC2 instances from on-premise, make sure you ad the ICMP protocol on the inbound of your security groups
<img src="https://data.terabox.com/thumbnail/94373c9b4110180083a185ed7b5a2d75?fid=4401547290288-250528-422579053415839&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-gqfky3e%2fLR9ZoDXcPQHe7BXXSik%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=287893691826151050&amp;dp-callid=0&amp;time=1667808000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
    <h2 id="aws-vpn-cloudhub">AWS VPN CloudHub</h2>
  </li>
  <li>Provide secure communication between multiple sites, if you have multiple VPN connections</li>
  <li>Low cost hub and spoke model for primary or secondary network connectivity between diffrent locations (VPN only)</li>
  <li>It’s a VPN connection so it goes over the public internet</li>
  <li>To set it up, connect multiple VPN connections on the sam VGW, setup dynamic routing and configure route tables
<img src="https://data.terabox.com/thumbnail/5ae149b1e0d401daa96ab2bce8fe81f8?fid=4401547290288-250528-969713016236289&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-VKldoj3o12T1VMe97ryBEZQ8MiI%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=288292760496408384&amp;dp-callid=0&amp;time=1667808000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
    <h2 id="direct-connect-dx">Direct Connect (DX)</h2>
  </li>
  <li>Provides a <strong>dedicated private connection</strong> from a remote network to your VPC</li>
  <li>Dedicated connection must be setup between your DC and AWS Direct Connect locations</li>
  <li>You need to setup a Virtual Private Gateway on your VPC</li>
  <li>Access Public resources (S3) and private (EC2) on same connection</li>
  <li>Use Cases:
    <ul>
      <li>Increase bandwidth thoughtput - working with large data sets - lower cost</li>
      <li>More consistent network experience - application using real-time data feeds</li>
      <li>Hybrid environments (on-prem + cloud)</li>
    </ul>
  </li>
  <li>Supports both IPv4 and IPv6
    <h2 id="direct-connect-diagram">Direct Connect Diagram</h2>
    <p><img src="https://data.terabox.com/thumbnail/58350f1ff40d11a2c73b2c1fe1e7d220?fid=4401547290288-250528-344265522118998&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-0UPhqFKXAL0Y9zX9ReFtwkaLyOE%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=289177467370571966&amp;dp-callid=0&amp;time=1667811600&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" /></p>
    <h2 id="direct-connect-gateway">Direct Connect Gateway</h2>
  </li>
  <li>If you want to setup a Direct Connect to one or more VPC in many different regions (same account), you must use a Direct Connect Gateway
<img src="https://data.terabox.com/thumbnail/25f6b0c1fadb66040bf22b534d294907?fid=4401547290288-250528-376930071057630&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-Y9LzTcgmHLu3dXtT71Uq9YbnJfY%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=289254210436593044&amp;dp-callid=0&amp;time=1667811600&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
    <h2 id="direct-connect--connection-types">Direct Connect – Connection Types</h2>
  </li>
  <li>Dedicated Connections: 1Gbps and 10 Gps capacity
    <ul>
      <li>Physical ethernet port dedicated to a customer</li>
      <li>Request made to AWS first, then completed by AWS Direct Connect Partners</li>
    </ul>
  </li>
  <li>Hosted Connection: 50Mbs, 500 Mbps, to 10 Gbps</li>
  <li>Connection requests are made via AWS Direct Connect Partners</li>
  <li>Capacity can be added or removed on demand</li>
  <li>1, , 5, 10 Gbps available at select AWS Direct Connect Partners</li>
  <li>Lead times are often longer than 1 month to establish a new connection
    <h2 id="direct-connect--encryption">Direct Connect – Encryption</h2>
  </li>
  <li>Data in transit is not encrypted but is private</li>
  <li>AWS Direct Connect + VPN provides an IPsec-encrypted private connection</li>
  <li>Good for an extra level of security, but slightly more complex to put in place
<img src="https://data.terabox.com/thumbnail/4b37b0d874e5a9baa6089f6f306f2bf7?fid=4401547290288-250528-922957861536436&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-zFoJg1Z8L1goubMxuwNBjSKuPP4%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=289647769806591335&amp;dp-callid=0&amp;time=1667815200&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
    <h2 id="direct-connect---resiliency">Direct Connect - Resiliency</h2>
  </li>
  <li>High Resiliency for Critical Workloads
<img src="https://data.terabox.com/thumbnail/9ebc74712abfc78336b3dcc5daddee90?fid=4401547290288-250528-732693425135076&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-Sb4BjMOyAGzu9rYVtRLwcRHWP1k%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=289658859510790275&amp;dp-callid=0&amp;time=1667815200&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" /></li>
  <li>Maximum Resiliency for Critical Workloads
<img src="https://data.terabox.com/thumbnail/0ff6f5ca101713ad4f085f178238fc09?fid=4401547290288-250528-590578672481082&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-WPDoMuFHVZbv99mWE0eIDUExeHo%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=289665808302865451&amp;dp-callid=0&amp;time=1667815200&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
    <h2 id="exposing-services-in-your-vpc-to-other-vpc">Exposing services in your VPC to other VPC</h2>
  </li>
  <li>Option 1: make it public
    <ul>
      <li>Goes through the public www</li>
      <li>Tough to manage access</li>
    </ul>
  </li>
  <li>Option 2: VPC peering
    <ul>
      <li>Must create many perring relations</li>
      <li>Open the whole network
<img src="https://data.terabox.com/thumbnail/2e3f611cf5d0862e29b00098bd1e4abb?fid=4401547290288-250528-604279332886054&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-PAqCaq%2fKpyHXLSniCEEQPzECY8A%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=289701508352776293&amp;dp-callid=0&amp;time=1667815200&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
        <h2 id="aws-privatelink-vpc-endpoint-services">AWS PrivateLink (VPC Endpoint Services)</h2>
      </li>
    </ul>
  </li>
  <li>Most secure &amp; scalable way to expose a service to 1000s of VPC (own or other accounts)</li>
  <li>Does not require VPC peering, internet gateway, NAT, route tables…</li>
  <li>Requires a network load balancer (Service VPC) and ENI (Customer VPC) or GWLB</li>
  <li>If the NLB is in multiple AZ, and the ENIs in multiple AZ, the solution is fault tolerant!
<img src="https://data.terabox.com/thumbnail/6b56c5a7373cdbb703a37caa1888da5d?fid=4401547290288-250528-784347349490601&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-nz8x0%2fam3xpJDdBdWxJRe%2bKehY0%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=289750424838492290&amp;dp-callid=0&amp;time=1667815200&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
    <h2 id="aws-private-link--ecs">AWS Private Link &amp; ECS</h2>
    <p><img src="https://data.terabox.com/thumbnail/b2907eef3ee81cbbe562b757eebb0e93?fid=4401547290288-250528-965122680161330&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-BPxiLUFO4YppgD4SGGQ9x7Fgd1I%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=289771978701280078&amp;dp-callid=0&amp;time=1667815200&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" /></p>
    <h2 id="ec2-classic--aws-classiclink-deprecated">EC2-Classic &amp; AWS ClassicLink (deprecated)</h2>
  </li>
  <li>EC2-Classic: instances run in a single network shared with other customers</li>
  <li>AmazonVPC: your instances run logically isolated to your AWS account</li>
  <li>ClassicLink allows you to link EC2-Classic instances to a VPC in your account
    <ul>
      <li>Must associate a security group</li>
      <li>ENables communication using privte Upv3 addressess</li>
      <li>Removes the need to make use of public IPv4 addressess or Elastic IP addresses</li>
    </ul>
  </li>
  <li>Likely to be distractors at the exam
    <h2 id="network-topologies-can-become-complicated">Network topologies can become complicated</h2>
    <p><img src="https://data.terabox.com/thumbnail/49eea187ad7739d3b312f702ded8668a?fid=4401547290288-250528-63180888063251&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-wr8clngd7kKiXqX7fo9Wxczo1Uw%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=289855404093542558&amp;dp-callid=0&amp;time=1667815200&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" /></p>
    <h2 id="transit-gateway">Transit Gateway</h2>
  </li>
  <li>For having transitive peering between <strong>thousands</strong> of VPC and on-premise, hub and spoke <strong>(star) connection</strong></li>
  <li>Regional resource, can work cross region</li>
  <li>Share cross-account using Resource Access Manager (RAM)</li>
  <li>You can peer <strong>Transit Gateway</strong> across regions</li>
  <li>Route Tables: limit which VPC can talk with other VPC</li>
  <li>Works with ** Direct Connect Gateway, VPn connections**</li>
  <li>Supports <strong>Ip Multicast</strong> (not suppoerted by any other AWS service)
<img src="https://data.terabox.com/thumbnail/d551df493d8b171c13d926d072e873db?fid=4401547290288-250528-193820090315068&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-BkgkYsENcOMODxD9zzEhrTdSBH8%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=289907492255367657&amp;dp-callid=0&amp;time=1667815200&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
    <h2 id="transit-gateway-site-to-site-vpn-ecmp">Transit Gateway: Site-to-Site VPN ECMP</h2>
  </li>
  <li>ECMP = Equal - cost multi path routing</li>
  <li>Routing strategy to allow to forward a packet over multiple best path</li>
  <li>Use case: create multiple Site to site VPN connections to increase the bandwidth of your connection to AWS
<img src="https://data.terabox.com/thumbnail/a86d56ac578d8ac3128f5a81d20cde3e?fid=4401547290288-250528-413675193681665&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-lvnRPyOF%2fyzRj%2f%2femlXsYbkoIHE%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=289962096922569176&amp;dp-callid=0&amp;time=1667815200&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
    <h2 id="transit-gateway-throughput-with-ecmp">Transit Gateway: throughput with ECMP</h2>
    <p><img src="https://data.terabox.com/thumbnail/bb54da9db2e41de0ad4fe363dd70b5c8?fid=4401547290288-250528-1123455717811634&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-1GsbLtaYahwpRnlJQKD8wNR57BI%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=289980080171961953&amp;dp-callid=0&amp;time=1667815200&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
<img src="https://data.terabox.com/thumbnail/079318e194a8d85aa29f2eed1ff61dec?fid=4401547290288-250528-1023861835273441&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-f0HVYgg%2fXFuRx8Hb3%2foJh8T3C1w%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=289980080171961953&amp;dp-callid=0&amp;time=1667815200&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" /></p>
    <h2 id="transit-gateway--share-direct-connect-between-multiple-accounts">Transit Gateway – Share Direct Connect between multiple accounts</h2>
    <p><img src="https://data.terabox.com/thumbnail/0b3493220cc63dabb9c199e2ed81b80e?fid=4401547290288-250528-401096758763359&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-x%2bY4RgirSfJ%2fXTG5UgQhDWUqRn0%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=290014867337055451&amp;dp-callid=0&amp;time=1667815200&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" /></p>
  </li>
</ul>]]></content><author><name>Hardwork đẹp trai</name></author><category term="Fullstack" /><category term="Blogging" /><category term="AWS" /><category term="AWS" /><category term="VPC" /><category term="NACL" /><category term="Transit Gateway" /><category term="AWS Private Link" /><category term="Direct Connect" /><category term="VPC Flow Logs" /><category term="Ephemeral Ports" /><category term="VPC Peering" /><category term="Internet Gateway" /><category term="NAT" /><category term="AWS VPN CloudHub" /><category term="VPN" /><summary type="html"><![CDATA[Virtual Private Cloud (VPC) Default VPC Walkthrough All new AWS accounts have a default VPC New EC2 instances are launched into the default VPC of no subnet is specified Default VPC has Internet connectivity and all EC2 instances inside it have public IPv4 addresses We also get a public and a private IPv4 DNS names VPC in AWS - IPv4 VPC = Virtual Private Cloud You can have multiple VPCs in an AWS region (max. 5 per region - soft limit) Max. CIDR per VPC is 5, for each CIDR Min. size is /28 (16 addresses) Max. size is /16 (65536 IP addresses) Because VPC is private, only the Private IPv4 tanges are allowed 10.0.0.0 – 10.255.255.255 (10.0.0.0/8) 172.16.0.0 – 172.31.255.255 (172.16.0.0/12) 192.168.0.0 – 192.168.255.255 (192.168.0.0/16) Your VPC CIDR should NOT overlap with your other networks (e.g corporate) VPC – Subnet (IPv4) AWS reserves 5 IP addresses (first 4 &amp; last 1) in each subnet These 5 IP addresses are not available for use and can’t be assigned to an EC2 instance Example; if CIDR block 10.0.0.0/24 then reserved IP addresses are: 10.0.0.0 - Network Address 10.0.0.1 - reserved by AWS for the VPC router 10.0.0.2 - reserved by AWS for mapping to mazon-provided DNS 10.0.0.3 - reserved by AWS for future use 10.0.0.255 - Network Broadcast Addressm AWS does not support broadcast in a VPC therefore the address is reserved Exam tip: if you need 29 IP addresses for EC2 instances: You can’t choose a subnet of size /27 (32 IP addresses, 32-5 = 27 &lt; 29) you need to choose a subnet of size /26 (64 IP address, 64 - 5 = 59 &gt; 29) Internet Gateway (IGW) Allows resources (e.g EC2 instances) in a VPC connect to the Internet It scales horizontally and is highly available and redudant Must be created separately from a VPC One VPC can only be attached to one IGW and vice versa Internet Gateways on their own do not allow Internet access… Route tables must also be edited! State of Hands-on Adding Subnets Adding Internet Gateway Editing Route Tables Bastion Hosts We can use a Bastion Host to SSH into our private EC2 instances The bastion is in the public subnet which is then connected to all other private subnets Basion Host security group must be tighened Exam Tip: Makesure the bastion host only has port 22 traffic from the IP address you need not from the security groups of your other EC2 instances NAT Instance (outdated, but still at the exam) NAT = Network Address Translation Allows EC2 instances in private subnet to connect to the Internet Must be launched in a public subnet Must disable EC2 setting: Source / destination Check Must have Elastic IP attached to it Route Tables must be configured to route traffic from private subnets to the NAT instance NAT Instance NAT Instance – Comments Pre-configured Amazon Linux AMI is available Reached the end of standard support on December 31, 2020 Not highly available / resilient setup out of the box You need to create an ASG in multi-AZ + resilient user-data script Internet traffic bandwidth depends on EC2 instance type You must manage Security Groups &amp; Rules: Inbound: Allow HTTP / HTTPS traffic coming from Private Subnets Allow SSH from your home network (access is provided through Internet Gateway) Outbound: Allow HTTP / HTTPS traffic to the Internet NAT Gateway AWS-managed NAT, higher bandwidth, high availability, no administration Pay per hour for usage and bandwidth NATGW is created in a specific Availability Zone, uses an Elastic IP Can’t be used by EC2 instance in the same subnet (only from other subnets) Requires an IGW (Private Subnet =&gt; NATGW =&gt; IGW) 5 Gbps of bandwidth with automatic scaling up to 45 Gbps No Security Groups to manage / required NAT Gateway with High Availability NAT Gateway is resilient within a single Availability Zone Must create multiple NAT Gateways in multiple AZs for fault-teolerance There is no cross-AZ failover needed because if an AZ goes down it doesn’t need NAT NAT Gateway vs. NAT Instance DNS Resolution in VPC DNS Resolution (enableDnsSupport) Decides if DNS resolution from Route 53 Resolver server is supported for the VPC True (default): it queries the Amazon Provider DNS Server at 169.254.169.253 or the reserved IP address at the base of the VPC Ipv4 network range plus two DNS Resolution in VPC DNS Hostnames (enableDnsHostnames) By default True =&gt; default VPC False =&gt; newly created VPCs Won’t do anything unless enableDnsSupport=true If True, assigns public hostname to EC2 instance if it has a public IPv4 DNS Resolution in VPC If you use custom DNS domain names in a Private Hosted Zone in Route 53, you must set both these attributes (enableDnsSupport &amp; enableDnsHostname) to true Security Groups &amp; NACLs Incoming Request Outgoing Request Network Access Control List (NACL) NACL are like a firewall which control traffic from and to subnet One NACL per subnet, new subnets are assigned the Default NACL You define NACL Rules: Rules have a number (1-32766), higher precedence with a lower number First rule match will drive the decision Example: if you define #100 ALLOW 10.0.0.10/32 and #200 DENY 10.0.0.10/32, the IP address will be allowed because 100 has a higher precedence over 200 The last rule is an asterisk (*) and denies a request in case of no rule match AWS recommends adding rules by increment of 100 Newly created NACLs will deny everything NACL are a great way of blocking a specific IP address at the subnet level NACLs default NACLs Accepts everything inbound/outbound with the subnets it’s associated with Do NOT modify the Default NACL, instead create custom NACLs Ephemeral Ports For any two endpoints to establish a connection, they must use ports Clients connect to a defined port, and expect a response on an ephemeral port Different Operating Systems use different port ranges, examples: IANA &amp; MS Windows 10 -&gt; 49152 - 65535 Many Linux Kernels -&gt; 32768 - 60999 NACL with Ephemeral Ports Create NACL rules for each target subnets CIDR Security Group vs. NACLs VPC – Reachability Analyzer A network diagnostics tool that troubleshoots network connectivity between two endpoints in your VPC(s) It builds a model of the network configuration, then checks the reachability based on these configurations (it doesn’t send packets) When the destination is Reachable - It proceduces hop by hop details of the virtual network path Not reachable - It identifies the blocking components Use cases: troubleshoot connectivity issues, ensure network configuration is as intended… VPC Peering Privately connect two VPCs using AWS network Make them behave as if they were in the same network Must not have overlapping CIDRs VPC Peering connection is NOT transitive (must be established for each VPC that need to communicate with one another) You must update route tables in each VPC’s subnets to ensure EC2 instances can communicate with each other VPC Peering – Good to know You can create VPC Peering connection between VPCs in different AWS accounts/regions You can reference a security group in a peered VPC (works cross – same region) VPC Peering VPC Endpoints VPC Endpoints (AWS PrivateLink) Every AWS service is publicly exposed (public URL) VPC Endpoints (powered by AWS PrivateLink) allows you to connect to AWS services using a private network instead of using the public Internet They’re redudant and scale horizontally They remove the need of IGW, NATGW,… to access AWS Services In case of issues Check DNS Setting Resolution in your VPC Check Route Tables Types of Endpoints Interface Endpoints Provisions an ENI (private IP address) as an entry point (must attach a Security Group) Supports most AWS services Gateway endpoints Provisions a gateway and must be used as a target in a route table Supports both S3 and DynamoDB VPC Flow Logs Capture information about IP traffic going into your interfaces: VPC Flow Logs Subnet Flow Logs Elastic Network Interface (ENI) FLow Logs Helps To monitor &amp; troubleshoot connectivity issues Flow logs data can go to S3 / CLoudWatch Logs Captures network information from AWS managed interfaces too: ELB, RDS, ElastiCache, Redshift, Workspaces, NATGW, Transit Gateway… VPC Flow Logs VPC Flow Logs Syntax srcaddr &amp; dstaddr: help identify problematic IP srcport &amp; dstport: help identify problematic ports Action: success or failure of the request due to security group / NACL Can be used for analytics on usage patterns, or malicious behavior Query VPC flow logs using Athena on S3 or CloudWatch Logs Insights Flow Logs examples: https://docs.aws.amazon.com/vpc/latest/userguide/flow-logs-records-examples.html VPC Flow Logs – Troubleshoot SG &amp; NACL issues Incoming Requests Inbound REJECT =&gt; NACL or SG Inbound ACCEPT, Outbound REJECT =&gt; NACL Outgoing Requests Outbound REJECT =&gt; NACL or SG Outbound ACCEPT, Inbound REJECT =&gt; NACL AWS Site-to-Site VPN AWS Site-to-Site VPN Virtual Private Gateway (VGW) VPN concentrator on the AWS side of the VPN connection VGW is created and attached to the VPC from which you want to create the Site-to-site VPN connection Possibility to customize the ASN (Autonomous System Number) Customer Gateway (CGW) Software application or physical device on customer side of the VPN connection https://docs.aws.amazon.com/vpn/latest/s2svpn/your-cgw.html Site-to-site VPN connections Customer Gateway Device (On-premises) What IP address to use? Public Internet routable IP address for your customer gateway device If it’s behind a NAt device that’s enabled for NAT traversal (NAT-T), use the public IP address of the NAT device Important step: enable Route Propagation for the virtual private gateway in the route table that is associated with your subnets If you need to ping your EC2 instances from on-premise, make sure you ad the ICMP protocol on the inbound of your security groups AWS VPN CloudHub Provide secure communication between multiple sites, if you have multiple VPN connections Low cost hub and spoke model for primary or secondary network connectivity between diffrent locations (VPN only) It’s a VPN connection so it goes over the public internet To set it up, connect multiple VPN connections on the sam VGW, setup dynamic routing and configure route tables Direct Connect (DX) Provides a dedicated private connection from a remote network to your VPC Dedicated connection must be setup between your DC and AWS Direct Connect locations You need to setup a Virtual Private Gateway on your VPC Access Public resources (S3) and private (EC2) on same connection Use Cases: Increase bandwidth thoughtput - working with large data sets - lower cost More consistent network experience - application using real-time data feeds Hybrid environments (on-prem + cloud) Supports both IPv4 and IPv6 Direct Connect Diagram Direct Connect Gateway If you want to setup a Direct Connect to one or more VPC in many different regions (same account), you must use a Direct Connect Gateway Direct Connect – Connection Types Dedicated Connections: 1Gbps and 10 Gps capacity Physical ethernet port dedicated to a customer Request made to AWS first, then completed by AWS Direct Connect Partners Hosted Connection: 50Mbs, 500 Mbps, to 10 Gbps Connection requests are made via AWS Direct Connect Partners Capacity can be added or removed on demand 1, , 5, 10 Gbps available at select AWS Direct Connect Partners Lead times are often longer than 1 month to establish a new connection Direct Connect – Encryption Data in transit is not encrypted but is private AWS Direct Connect + VPN provides an IPsec-encrypted private connection Good for an extra level of security, but slightly more complex to put in place Direct Connect - Resiliency High Resiliency for Critical Workloads Maximum Resiliency for Critical Workloads Exposing services in your VPC to other VPC Option 1: make it public Goes through the public www Tough to manage access Option 2: VPC peering Must create many perring relations Open the whole network AWS PrivateLink (VPC Endpoint Services) Most secure &amp; scalable way to expose a service to 1000s of VPC (own or other accounts) Does not require VPC peering, internet gateway, NAT, route tables… Requires a network load balancer (Service VPC) and ENI (Customer VPC) or GWLB If the NLB is in multiple AZ, and the ENIs in multiple AZ, the solution is fault tolerant! AWS Private Link &amp; ECS EC2-Classic &amp; AWS ClassicLink (deprecated) EC2-Classic: instances run in a single network shared with other customers AmazonVPC: your instances run logically isolated to your AWS account ClassicLink allows you to link EC2-Classic instances to a VPC in your account Must associate a security group ENables communication using privte Upv3 addressess Removes the need to make use of public IPv4 addressess or Elastic IP addresses Likely to be distractors at the exam Network topologies can become complicated Transit Gateway For having transitive peering between thousands of VPC and on-premise, hub and spoke (star) connection Regional resource, can work cross region Share cross-account using Resource Access Manager (RAM) You can peer Transit Gateway across regions Route Tables: limit which VPC can talk with other VPC Works with ** Direct Connect Gateway, VPn connections** Supports Ip Multicast (not suppoerted by any other AWS service) Transit Gateway: Site-to-Site VPN ECMP ECMP = Equal - cost multi path routing Routing strategy to allow to forward a packet over multiple best path Use case: create multiple Site to site VPN connections to increase the bandwidth of your connection to AWS Transit Gateway: throughput with ECMP Transit Gateway – Share Direct Connect between multiple accounts]]></summary></entry><entry><title type="html">AWS Router 53</title><link href="http://localhost:4000/posts/aws-router-53/" rel="alternate" type="text/html" title="AWS Router 53" /><published>2024-02-07T00:00:00+07:00</published><updated>2024-02-07T00:00:00+07:00</updated><id>http://localhost:4000/posts/aws-router-53</id><content type="html" xml:base="http://localhost:4000/posts/aws-router-53/"><![CDATA[<h1 id="route-53-section">Route 53 Section</h1>
<h2 id="what-is-dns">What is DNS</h2>
<ul>
  <li>Domain Name System which translates the human friendly hostnames into the machine IP address</li>
  <li>www.google.com =&gt; 172.2.17.18.36</li>
  <li>DNS is the backbone of the internet</li>
  <li>DNS uses hierachical naming structure
    <h2 id="dns-terminologies">DNS Terminologies</h2>
  </li>
  <li>Domain Registrar: Amazon Route 53, GoDaddy, …</li>
  <li>DNS Records: A, AAAA, CNAME, NS, …</li>
  <li>Zone file: contains DNS records</li>
  <li>Name Server: resolves DNS queries (Authoritative or Non- Authoritative)</li>
  <li>Top Level Domain (TLD): .com, .us, .in, .gov, .org, …</li>
  <li>Second Level Domain (SLD): amazon.com, google.com, …
    <h2 id="how-dns-works">How DNS works</h2>
  </li>
  <li>Web browser -&gt; Local DNS Server:
    <ul>
      <li>Root DNS Server managed by ICANN (res: .com NS 1.2.3.4)</li>
      <li>TLD DNS Server managed by IANA (res: domain NS 5.6.7.8)</li>
      <li>SLD DNS Server managed by Domain Registrar (res: domain IP)
<img src="https://imgdb.net/storage/uploads/00a27e53f531ebe25a7f7e29d35226b74a74666736a41b6b671c1e56e0a33a6c.png" alt="How DNS Work" title="How DNS Work" />
        <h2 id="amazon-route-53">Amazon Route 53</h2>
      </li>
    </ul>
  </li>
  <li>A highly available, scalable, fully managed and Authoritative DNS
    <ul>
      <li>Authoritative = the customer (you) can update the DNS records</li>
    </ul>
  </li>
  <li>Route 53 is also a <strong>Domain Registrar</strong></li>
  <li>Ability to check the health of your resources</li>
  <li>The only AWS service which provide 100% availability SLA</li>
  <li>Why Route 53? 53 is a reference to the traditional DNS port
    <h2 id="route53---records">Route53 - Records</h2>
  </li>
  <li>How you want to route traffic for a domain</li>
  <li>Each record contains:
    <ul>
      <li>Domain/subdomain Name: example.com</li>
      <li>RecordType: e.g A or AAAA</li>
      <li>Value: 12.34.56.78</li>
      <li>Routing Policy: How Route 53 responds to queries</li>
      <li>TTL: amount of time the record cached at DNS resolvers</li>
    </ul>
  </li>
  <li>Route 53 supports the following DNS record types:
    <ul>
      <li>A / AAAA / CNAME / NS</li>
      <li>CAA / DS / MX / NAPTR / PTR / SOA / TXT / SPF / SRV
        <h2 id="route-53---record-types">Route 53 - Record Types</h2>
      </li>
    </ul>
  </li>
  <li>A: maps a hostname to Ipv4</li>
  <li>AAAA: maps a hostname to IPv6</li>
  <li>CNAME: maps a hostname to another hostname
    <ul>
      <li>The target is a domain name which must have an A or AAAA record</li>
      <li>Can’t create a CNAME record for the top node of a DNS namespace (Zone Apex)</li>
      <li>Exmaple: you can’t create for example.com but you create for www.example.com</li>
    </ul>
  </li>
  <li>NS: name Server for the hosted zone
    <ul>
      <li>Control how traffic is routed for a domain
        <h2 id="route-53---hosted-zones">Route 53 - Hosted Zones</h2>
      </li>
    </ul>
  </li>
  <li>A container for records that define how to route traffic to a domain and its subdomains</li>
  <li>Public Hosted Zone: contains records that specfy how to route traffic on the Internet (public domain names)</li>
  <li>Private Hosted Zones: contain records that specify how you route traffic within one or more VPCs (private domain names) application 1.company.internal</li>
  <li>You pay $0.50 per month  per hosted zone
    <h2 id="route-53-public-vs-private-hosted-zone">Route 53: Public vs. Private Hosted Zone</h2>
  </li>
  <li>Public Hosted Zone: internet access</li>
  <li>Private Hosted Zone: unable to access from internet: EC2 instances, RDS instance
    <h2 id="route-53---records-ttl-time-to-live">Route 53 - Records TTL (Time To Live)</h2>
  </li>
  <li>High TTL - e.g 24 hr
    <ul>
      <li>less traffic on Route 53</li>
      <li>Possibily outdated records</li>
    </ul>
  </li>
  <li>Low TTL - e.g 60 sec
    <ul>
      <li>More traffics on Route 53 ($$)</li>
      <li>Records are outdated for less time</li>
      <li>Easy to change records</li>
    </ul>
  </li>
  <li>Except for Alias records, TTL is mandatory for each DNS record
    <h2 id="cname-vs-alias">CNAME vs Alias</h2>
  </li>
  <li>AWS Resources (Load Balancer, CloudFront…) expose an AWS hostname:
    <ul>
      <li>b1-1234.us-east-2.elb.amazonaws.com and you want myapp.mydomain.com</li>
    </ul>
  </li>
  <li>CNAME:
    <ul>
      <li>Points a hostname to any other hostname. (app.mydomain.com =&gt; bla.bla.anything.com)</li>
      <li>Only for non root domain (aka. something.mydomain.com)</li>
    </ul>
  </li>
  <li>Alias:
    <ul>
      <li>Points a hostname to an AWS Resource</li>
      <li>Works for Root domain and non root domain (aka mydomain.com)</li>
      <li>Free of charge</li>
      <li>Native health check
        <h2 id="route-53---alias-records">Route 53 - Alias Records</h2>
      </li>
    </ul>
  </li>
  <li>Maps a hostname to an AWS resource</li>
  <li>An extension to DNS functionality</li>
  <li>Automatically recognizes changes in the resource’s IP addresses</li>
  <li>Unlike CNAME, it can be used for the top node of a DNS namespace (zone Apex), e.g: example.com</li>
  <li>Alias Record is always of type A/AAAA for AWS resources (IPv4/IPv6)</li>
  <li>You can’t set the TTL
    <h2 id="route-53---alias-records-target">Route 53 - Alias REcords target</h2>
  </li>
  <li>Elastic Load Balancers</li>
  <li>CloudFront Distributions</li>
  <li>API Gateway</li>
  <li>Elastic Beantalk environments</li>
  <li>S3 Websites</li>
  <li>VPC Interface Endpoints</li>
  <li>Global Accelerator accelerator</li>
  <li>Route 53 record in the same hosted zone</li>
  <li>You cannot set an ALIAS record for an EC2 DNS name
<img src="https://imgdb.net/storage/uploads/6c961263367d0b206788eea8ad425e630759ad225eb18754163ee366e50aa615.png" alt="Alias Record target" title="Alias Record target" />
    <h2 id="route-53---routing-policies">Route 53 - Routing policies</h2>
  </li>
  <li>Define how Route 53 responds to DNS queries</li>
  <li>Don’t get confused by the word “Routing”
    <ul>
      <li>It’s not the same as load balancer routing which routes the traffic</li>
      <li>DNS does not route any traffic, it only responds to the DNS queries</li>
    </ul>
  </li>
  <li>Route 53 support the following Routing policies
    <ul>
      <li>Simple</li>
      <li>Weighted</li>
      <li>Failover</li>
      <li>Latency based</li>
      <li>GeoLocation</li>
      <li>Multi-Value Answer</li>
      <li>Geoproximity (using Route 53 Traffic Flow feature)
        <h2 id="routing-policies---simple">Routing Policies - Simple</h2>
      </li>
    </ul>
  </li>
  <li>Typically route traffic to a single resource</li>
  <li>Can specify multiple values in the same record</li>
  <li>If multiple values are returned, a random one is chosen be the client</li>
  <li>When Alias enabled, specify only one AWS resource</li>
  <li>Can’t be associated with Health Checks
<img src="https://imgdb.net/storage/uploads/4884255131af7b8e1c20b85ac61bed9d3c2758647f177f258cc9d404c6abcad4.png" alt="Routing policices" title="Routing policies Simple" />
    <h2 id="routing-policies--weighted">Routing Policies – Weighted</h2>
  </li>
  <li>Control the % of the requests that go to each specific resource</li>
  <li>Assign each record a relative weight
    <ul>
      <li>traffic(%) = Weight for a specific record / sum all the weights for all records</li>
      <li>Weights don’t need to sum up to 100</li>
    </ul>
  </li>
  <li>DNS records must have the same name and type</li>
  <li>Can be associated with Health Checks</li>
  <li>Use cases: Load balancing between regions, testing new application versions…</li>
  <li>Assign a weight of 0 to a record to stop sending traffic to a resource</li>
  <li>If all records have weight of 0, then all records will be returned equally
<img src="https://imgdb.net/storage/uploads/485743df9a027b3d167ae6146cd21d334e04c9c6e7aae508fa07eb9a3d21d88a.png" alt="Routing Policies Weighted" />
    <h2 id="routing-policies---latency-based">Routing Policies - Latency based</h2>
  </li>
  <li>Redirected to the resource that has the least latency close to us</li>
  <li>Super helpful when latency for users is a priority</li>
  <li>Latency is based on traffic betwwen users and AWS Regions</li>
  <li>Germany users may be directed to be the US (if that’s the lowest latency)</li>
  <li>Can be associated with Health Checks (has a failover capability)
    <h2 id="route-53---health-checks">Route 53 - Health Checks</h2>
  </li>
  <li>HTTP Health Checks are only for public resources</li>
  <li>Health Check =&gt; Automated DNS Failover:
    <ul>
      <li>Health checks that monitor an endpoint (application, server, other AWS resource)</li>
      <li>Health checks that monitor other health checks (Calculated Health Checks)</li>
      <li>Health checks that monitor CloudWatch Alarms (full control !!) - e.g throttles of DynamoDB, alarms on RDS, custom metrics, … (helpful for private resources)</li>
    </ul>
  </li>
  <li>Health Checks are integrated with CW metrics
    <h2 id="health-checks--monitor-an-endpoint">Health Checks – Monitor an Endpoint</h2>
  </li>
  <li>About 15 global health checkers will check the endpoint health
    <ul>
      <li>Health/Unhealthy Threshold - 3 (default)</li>
      <li>Interval - 30 sec (can set to 10 sec - higher cost)</li>
      <li>Supported protocol: HTTP, HTTPS and TCP</li>
      <li>If &gt; 18% of health checkers report the endpoint is health, Route 53 considers it Health. Otherwise, it’s Unhealty</li>
      <li>Ability to choose which locations you want Route 53 to use</li>
    </ul>
  </li>
  <li>Health Checks pass only when the endpoint respond with the 2xx and 3xx status codes</li>
  <li>Health Checks can be setup to pass / fail based on the text in the first 5120 bytes of the response</li>
  <li>Configure you router/firewall to allow incoming requests from Route 53 Health Checkers
    <h2 id="route-53---calculated-health-checks">Route 53 - Calculated health checks</h2>
  </li>
  <li>Combine the results of multiple Health Checks into a single Health Check</li>
  <li>You can use Or, AND, or NOT</li>
  <li>Can monitor up to 256 Child Health Checks</li>
  <li>Specify how many of the health checks need to pass to make the parent pass</li>
  <li>Usage: perform maintenance to your website without causing all health check to fail
<img src="https://imgdb.net/storage/uploads/39a6d176165780da3abb2e4bbb50fe49c505610a4546c4879913ad0ce52edb8c.png" alt="Calculate health checks" title="calculate health check" />
    <h2 id="health-checks--private-hosted-zones">Health Checks – Private Hosted Zones</h2>
  </li>
  <li>Route 53 health checkers are outside the VPC</li>
  <li>They can’t access private endpoints (private VPC or on-premises resource)</li>
  <li>You can create a CloudWatch Metric and associate a CloudWatch Alarm, then create a Health Check that checks the alarm itself
<img src="https://imgdb.net/storage/uploads/00463594265312d25b1de8cd1a7e99cf9adcf72c0447ed2562883f5ce88eb146.png" alt="Privated Hosted Zones" title="Private Hosted Zone" />
    <h2 id="routing-policies---failover-active---passive">Routing Policies - Failover (Active - Passive)</h2>
    <p><img src="https://imgdb.net/storage/uploads/01014d3db6296577fe8b27a7366eccd7c34a9ef56854e7dd8a8251a3d94ddf55.png" alt="Routing Policies – Failover" title="Routing Policies Failover" /></p>
    <h2 id="routing-policies-geolocation">Routing Policies Geolocation</h2>
  </li>
  <li>Different from latency-based!</li>
  <li>This routing is based on user location</li>
  <li>Specify location by COntinent, Country or by US State (if there’s overlaping, most precise location selected)</li>
  <li>Should create a “Default” record (in case there’s no match on location)</li>
  <li>Use cases: website localization, restrict content distribution, load balancing, …</li>
  <li>Can be associated with Health Checks
    <h2 id="routing-policies--geoproximity">Routing Policies – Geoproximity</h2>
  </li>
  <li>Route traffic to your resources based on the geographic location of users and resources</li>
  <li>Ability to shift more traffic to resources based on the defined bias</li>
  <li>To change the size of the geographic region, specify bias values
    <ul>
      <li>To expand ( 1 to 99): more traffic to resource</li>
      <li>To shrink (-1 to -99): less traffic to the resource</li>
    </ul>
  </li>
  <li>Resources can be:
    <ul>
      <li>AWS resources (specify AWS region)</li>
      <li>Non-AWS resources (specify latitude and longitude)</li>
    </ul>
  </li>
  <li>You must use Route 53 traffic flow to use this feature
    <h2 id="routing-policies---geoproximity">Routing Policies - Geoproximity</h2>
    <p><img src="https://imgdb.net/storage/uploads/ba6c513a1cdf1d394384356cba5223927a883019264e71b0712b02fdc52e16b4.png" alt="Geoproximity" />
<img src="https://imgdb.net/storage/uploads/ac09a509e13b75fee0288bde2e8c64fda773ec8a5b2cc3a05a0c5d13aae36cff.png" alt="Geoproximity" /></p>
    <h2 id="routing-53---traffic-flow">Routing 53 - Traffic flow</h2>
  </li>
  <li>Simplify the process of creating and maintaining records in large and complex configurations</li>
  <li><strong>Visual editor</strong> to manage complex routing decision trees</li>
  <li>Configurations can be saved as TRaffic Flow Policy
    <ul>
      <li>Can be applied to different Route 53 Hosted Zones (different domain names)</li>
      <li>Supports versioning
        <h2 id="routing-policies---multi-value">Routing Policies - Multi value</h2>
      </li>
    </ul>
  </li>
  <li>Use when routing traffic to multiple resources</li>
  <li>Route 53 return multiple value/resources</li>
  <li>Can be associated with Health Checks (return only values for healthy resources)</li>
  <li>Up to 8 healthy records are returned for each Multi-Value query</li>
  <li>Multi-value is not a substitude for having an ELB
    <h2 id="domain-registar-vs-dns-service">Domain Registar vs DNS Service</h2>
  </li>
  <li>You buy or register you domain name with a Domain Registar typically by paying annual charges (e.g GoDaddy, Amazone Registar Inc, …)</li>
  <li>The Domain Registar ussually provides you with a DNS service to manage your DNS records</li>
  <li>But you can use another DNS service to manage your DNS records</li>
  <li>Example: purchase the domain from GoDaddy and use Route 53 manage your DNS records
<img src="https://imgdb.net/storage/uploads/631e7d131943832677528a4ee3110911123ca55414554900b5e5f79c362d6797.png" alt="AWS DNS" />
    <h2 id="godaddy-as-registrar--route-53-as-dns-service">GoDaddy as Registrar &amp; Route 53 as DNS Service</h2>
    <p><img src="https://imgdb.net/storage/uploads/f275c0eb7f25353a67ef12df2491fd5ff7f1ecfe8e5873726717137207b19bae.png" alt="" /></p>
    <h2 id="3rd-party-registrar-with-amazon-route-53">3rd Party Registrar with Amazon Route 53</h2>
  </li>
  <li>If you buy your domain on a 3rd party registrar, you can still use Route 53 as the DNS Service provider
    <ol>
      <li>Create a Hosted Zone in Route 53</li>
      <li>Update NS Records on 3rd party website to use Route 53 Name Servers</li>
      <li>Domain Registar != DNS Service</li>
      <li>But every Domain Registrar usually comes with some DNS features</li>
    </ol>
  </li>
  <li>A record mapping to IPv4</li>
  <li>AAAA record mapping to IPv6</li>
  <li>CNAME records shortcuts to hostname</li>
  <li>CNAME ftp</li>
  <li>CNAME mail</li>
  <li>CNAME wwww google.com zone</li>
  <li>MX records how email work</li>
  <li>MX 10 mail</li>
  <li>MX 20 mail.other.domain</li>
  <li>TXT records — query txt, spam</li>
  <li>TTL 3600 Time to live , numeric value in seconds authoritative</li>
  <li>TTL 3600 Non-Authoritative</li>
  <li>TTL The time for which a DNS resolver caches a response is set by a value called the time to live (TTL) associated with every record. Amazon Route 53 does not have a default TTL for any record type.</li>
  <li>NS: how the root zone delegates control of .org to the .org registry</li>
</ul>]]></content><author><name>Hardwork đẹp trai</name></author><category term="Fullstack" /><category term="Blogging" /><category term="AWS" /><category term="aws" /><category term="router53" /><category term="DNS" /><category term="A" /><category term="AA" /><category term="CNAME" /><category term="MX" /><category term="TXT" /><category term="TTL" /><category term="NS" /><category term="Hosted Zones" /><category term="Geoproximity" /><category term="Traffic flow" /><category term="Routing Policies" /><category term="Geolocation" /><category term="Failover(Active - Passive)" /><category term="PrivateHosted Zones" /><category term="Health Checks" /><summary type="html"><![CDATA[Route 53 Section What is DNS Domain Name System which translates the human friendly hostnames into the machine IP address www.google.com =&gt; 172.2.17.18.36 DNS is the backbone of the internet DNS uses hierachical naming structure DNS Terminologies Domain Registrar: Amazon Route 53, GoDaddy, … DNS Records: A, AAAA, CNAME, NS, … Zone file: contains DNS records Name Server: resolves DNS queries (Authoritative or Non- Authoritative) Top Level Domain (TLD): .com, .us, .in, .gov, .org, … Second Level Domain (SLD): amazon.com, google.com, … How DNS works Web browser -&gt; Local DNS Server: Root DNS Server managed by ICANN (res: .com NS 1.2.3.4) TLD DNS Server managed by IANA (res: domain NS 5.6.7.8) SLD DNS Server managed by Domain Registrar (res: domain IP) Amazon Route 53 A highly available, scalable, fully managed and Authoritative DNS Authoritative = the customer (you) can update the DNS records Route 53 is also a Domain Registrar Ability to check the health of your resources The only AWS service which provide 100% availability SLA Why Route 53? 53 is a reference to the traditional DNS port Route53 - Records How you want to route traffic for a domain Each record contains: Domain/subdomain Name: example.com RecordType: e.g A or AAAA Value: 12.34.56.78 Routing Policy: How Route 53 responds to queries TTL: amount of time the record cached at DNS resolvers Route 53 supports the following DNS record types: A / AAAA / CNAME / NS CAA / DS / MX / NAPTR / PTR / SOA / TXT / SPF / SRV Route 53 - Record Types A: maps a hostname to Ipv4 AAAA: maps a hostname to IPv6 CNAME: maps a hostname to another hostname The target is a domain name which must have an A or AAAA record Can’t create a CNAME record for the top node of a DNS namespace (Zone Apex) Exmaple: you can’t create for example.com but you create for www.example.com NS: name Server for the hosted zone Control how traffic is routed for a domain Route 53 - Hosted Zones A container for records that define how to route traffic to a domain and its subdomains Public Hosted Zone: contains records that specfy how to route traffic on the Internet (public domain names) Private Hosted Zones: contain records that specify how you route traffic within one or more VPCs (private domain names) application 1.company.internal You pay $0.50 per month per hosted zone Route 53: Public vs. Private Hosted Zone Public Hosted Zone: internet access Private Hosted Zone: unable to access from internet: EC2 instances, RDS instance Route 53 - Records TTL (Time To Live) High TTL - e.g 24 hr less traffic on Route 53 Possibily outdated records Low TTL - e.g 60 sec More traffics on Route 53 ($$) Records are outdated for less time Easy to change records Except for Alias records, TTL is mandatory for each DNS record CNAME vs Alias AWS Resources (Load Balancer, CloudFront…) expose an AWS hostname: b1-1234.us-east-2.elb.amazonaws.com and you want myapp.mydomain.com CNAME: Points a hostname to any other hostname. (app.mydomain.com =&gt; bla.bla.anything.com) Only for non root domain (aka. something.mydomain.com) Alias: Points a hostname to an AWS Resource Works for Root domain and non root domain (aka mydomain.com) Free of charge Native health check Route 53 - Alias Records Maps a hostname to an AWS resource An extension to DNS functionality Automatically recognizes changes in the resource’s IP addresses Unlike CNAME, it can be used for the top node of a DNS namespace (zone Apex), e.g: example.com Alias Record is always of type A/AAAA for AWS resources (IPv4/IPv6) You can’t set the TTL Route 53 - Alias REcords target Elastic Load Balancers CloudFront Distributions API Gateway Elastic Beantalk environments S3 Websites VPC Interface Endpoints Global Accelerator accelerator Route 53 record in the same hosted zone You cannot set an ALIAS record for an EC2 DNS name Route 53 - Routing policies Define how Route 53 responds to DNS queries Don’t get confused by the word “Routing” It’s not the same as load balancer routing which routes the traffic DNS does not route any traffic, it only responds to the DNS queries Route 53 support the following Routing policies Simple Weighted Failover Latency based GeoLocation Multi-Value Answer Geoproximity (using Route 53 Traffic Flow feature) Routing Policies - Simple Typically route traffic to a single resource Can specify multiple values in the same record If multiple values are returned, a random one is chosen be the client When Alias enabled, specify only one AWS resource Can’t be associated with Health Checks Routing Policies – Weighted Control the % of the requests that go to each specific resource Assign each record a relative weight traffic(%) = Weight for a specific record / sum all the weights for all records Weights don’t need to sum up to 100 DNS records must have the same name and type Can be associated with Health Checks Use cases: Load balancing between regions, testing new application versions… Assign a weight of 0 to a record to stop sending traffic to a resource If all records have weight of 0, then all records will be returned equally Routing Policies - Latency based Redirected to the resource that has the least latency close to us Super helpful when latency for users is a priority Latency is based on traffic betwwen users and AWS Regions Germany users may be directed to be the US (if that’s the lowest latency) Can be associated with Health Checks (has a failover capability) Route 53 - Health Checks HTTP Health Checks are only for public resources Health Check =&gt; Automated DNS Failover: Health checks that monitor an endpoint (application, server, other AWS resource) Health checks that monitor other health checks (Calculated Health Checks) Health checks that monitor CloudWatch Alarms (full control !!) - e.g throttles of DynamoDB, alarms on RDS, custom metrics, … (helpful for private resources) Health Checks are integrated with CW metrics Health Checks – Monitor an Endpoint About 15 global health checkers will check the endpoint health Health/Unhealthy Threshold - 3 (default) Interval - 30 sec (can set to 10 sec - higher cost) Supported protocol: HTTP, HTTPS and TCP If &gt; 18% of health checkers report the endpoint is health, Route 53 considers it Health. Otherwise, it’s Unhealty Ability to choose which locations you want Route 53 to use Health Checks pass only when the endpoint respond with the 2xx and 3xx status codes Health Checks can be setup to pass / fail based on the text in the first 5120 bytes of the response Configure you router/firewall to allow incoming requests from Route 53 Health Checkers Route 53 - Calculated health checks Combine the results of multiple Health Checks into a single Health Check You can use Or, AND, or NOT Can monitor up to 256 Child Health Checks Specify how many of the health checks need to pass to make the parent pass Usage: perform maintenance to your website without causing all health check to fail Health Checks – Private Hosted Zones Route 53 health checkers are outside the VPC They can’t access private endpoints (private VPC or on-premises resource) You can create a CloudWatch Metric and associate a CloudWatch Alarm, then create a Health Check that checks the alarm itself Routing Policies - Failover (Active - Passive) Routing Policies Geolocation Different from latency-based! This routing is based on user location Specify location by COntinent, Country or by US State (if there’s overlaping, most precise location selected) Should create a “Default” record (in case there’s no match on location) Use cases: website localization, restrict content distribution, load balancing, … Can be associated with Health Checks Routing Policies – Geoproximity Route traffic to your resources based on the geographic location of users and resources Ability to shift more traffic to resources based on the defined bias To change the size of the geographic region, specify bias values To expand ( 1 to 99): more traffic to resource To shrink (-1 to -99): less traffic to the resource Resources can be: AWS resources (specify AWS region) Non-AWS resources (specify latitude and longitude) You must use Route 53 traffic flow to use this feature Routing Policies - Geoproximity Routing 53 - Traffic flow Simplify the process of creating and maintaining records in large and complex configurations Visual editor to manage complex routing decision trees Configurations can be saved as TRaffic Flow Policy Can be applied to different Route 53 Hosted Zones (different domain names) Supports versioning Routing Policies - Multi value Use when routing traffic to multiple resources Route 53 return multiple value/resources Can be associated with Health Checks (return only values for healthy resources) Up to 8 healthy records are returned for each Multi-Value query Multi-value is not a substitude for having an ELB Domain Registar vs DNS Service You buy or register you domain name with a Domain Registar typically by paying annual charges (e.g GoDaddy, Amazone Registar Inc, …) The Domain Registar ussually provides you with a DNS service to manage your DNS records But you can use another DNS service to manage your DNS records Example: purchase the domain from GoDaddy and use Route 53 manage your DNS records GoDaddy as Registrar &amp; Route 53 as DNS Service 3rd Party Registrar with Amazon Route 53 If you buy your domain on a 3rd party registrar, you can still use Route 53 as the DNS Service provider Create a Hosted Zone in Route 53 Update NS Records on 3rd party website to use Route 53 Name Servers Domain Registar != DNS Service But every Domain Registrar usually comes with some DNS features A record mapping to IPv4 AAAA record mapping to IPv6 CNAME records shortcuts to hostname CNAME ftp CNAME mail CNAME wwww google.com zone MX records how email work MX 10 mail MX 20 mail.other.domain TXT records — query txt, spam TTL 3600 Time to live , numeric value in seconds authoritative TTL 3600 Non-Authoritative TTL The time for which a DNS resolver caches a response is set by a value called the time to live (TTL) associated with every record. Amazon Route 53 does not have a default TTL for any record type. NS: how the root zone delegates control of .org to the .org registry]]></summary></entry><entry><title type="html">AWS Question and Answer Practice</title><link href="http://localhost:4000/posts/aws-question-and-answer-practice/" rel="alternate" type="text/html" title="AWS Question and Answer Practice" /><published>2024-02-06T00:00:00+07:00</published><updated>2024-02-06T00:00:00+07:00</updated><id>http://localhost:4000/posts/aws-question-and-answer-practice</id><content type="html" xml:base="http://localhost:4000/posts/aws-question-and-answer-practice/"><![CDATA[<ul>
  <li>What is ACM?
    <ul>
      <li>The AWS certtificates manager is a service which allow the creation, managerment and renewable of certificates. It allow deployment certificcatte onto support AWS service such as CloudFront and ALB.</li>
    </ul>
  </li>
  <li>What is CloudFronnt Security OAI and CCustom origin
    <ul>
      <li>OAI is features where virtual identities can be created, associatted with a CCloudFront Distributionn and deployed to edge locations.
Access to ann S3 buckket cann be connttrolled by using these OAI’s allowinng access from an OAI, and usinnng an implicit DENY for everythinng else. They are generally used to esure o direct access tto S3 objecct is allowed when usinng preivate CF Distributions</li>
    </ul>
  </li>
  <li>What is Lambda@edge
    <ul>
      <li>Lambda@edge allows cloudfront to run lambda functionn at CCloudFront edge loccations to modify traffic between the viewer and edge locations and origins</li>
    </ul>
  </li>
  <li>What is Global Accelerator?
    <ul>
      <li>AWS Global Acccelerator is designed to improve global network performance by offerinng entry point on to thhe global AWS transit network as close to ccustomers as possible using Anycast IP addresses</li>
    </ul>
  </li>
  <li>Which type of S3 encryption shows as AES256?
    <ul>
      <li>SSE-S3</li>
    </ul>
  </li>
  <li>Which S3 Storage class is suitable for data which is easily replaced (choose the most cost effective)?
    <ul>
      <li>S3 One Zone-IA</li>
    </ul>
  </li>
  <li>Which Object class in S3 is ideal for uncertain access and low admin overhead?
    <ul>
      <li>S3 inteligent tiering</li>
    </ul>
  </li>
  <li>What is the cheapest S3 storage class for important data which need to be retained for long periods and is rarely accessed?
    <ul>
      <li>S3 Glacier</li>
    </ul>
  </li>
  <li>Which steps are required to allow an S3 bucket to operate as a website (choose all which apply) ?
    <ol>
      <li>Upload Web file</li>
      <li>Set index and error documents</li>
      <li>Enable static web hosting</li>
      <li>Disable block public access setting</li>
      <li>Add a bucket policy</li>
    </ol>
  </li>
  <li>What S3 feature allows objects storage classes to be changed and objects deleted automatically?
    <ul>
      <li>S3 Lifecycle policy</li>
    </ul>
  </li>
  <li>What is the default limit of the number of S3 buckets in an AWS account?
    <ul>
      <li>100</li>
    </ul>
  </li>
  <li>How large can an object in S3 be ? and what (if any) limits are there on the number of objects in a bucket?
    <ul>
      <li>5TB, no limit object bucket</li>
    </ul>
  </li>
  <li>What S3 feature needs to be enabled to allow Cross-Region Replication (CRR)?
    <ul>
      <li>Versioning</li>
    </ul>
  </li>
  <li>What S3 feature can be used to grant external accounts access to an S3 bucket?
    <ul>
      <li>Resource Policy</li>
    </ul>
  </li>
  <li>Which type of encryption allows for role separation where an S3 Full Admin might not be able to decrypt objects?
    <ul>
      <li>SSE-KMS</li>
    </ul>
  </li>
  <li>Which type of encryption is where AWS perform encryption operations but DON’T hold any keys?
    <ul>
      <li>SSE-C</li>
    </ul>
  </li>
  <li>What type of encryption means AWS perform the encryption operations and handle key creation &amp; management?
    <ul>
      <li>SSE-S3</li>
    </ul>
  </li>
  <li>What feature is required to allow CRR to function?
    <ul>
      <li>Versioning</li>
    </ul>
  </li>
  <li>What happens when an object is deleted in a bucket with versioning enabled?
    <ul>
      <li>A delete maker is added</li>
    </ul>
  </li>
  <li>What is Network access control list(ACL) ?
    <ul>
      <li>NACL: is optional layer of security for your VPC that acts as a firewall for controlling traffic in and out on one or more subnet. You might setup network ACLs with rules similar to your security groups in order to add an additional layer of security to your VPC.(stateless)</li>
    </ul>
  </li>
  <li>What is Seccurity Group(stateful)?
    <ul>
      <li>Are another seccurity feature of AWS VPC … only unlike NACL they are attached to AWS Resources, nnot VPC subnets
SG offer a few advagesvs NACLs in that they can recognize AWS resources and filter based on them, they can reference other SGs and also themselves
But SG are not cappable of explicy traffic - often rquire assistance NACL</li>
    </ul>
  </li>
</ul>]]></content><author><name>Hardwork đẹp trai</name></author><category term="Fullstack" /><category term="Architect" /><category term="AWS" /><category term="aws" /><category term="FAQ" /><summary type="html"><![CDATA[What is ACM? The AWS certtificates manager is a service which allow the creation, managerment and renewable of certificates. It allow deployment certificcatte onto support AWS service such as CloudFront and ALB. What is CloudFronnt Security OAI and CCustom origin OAI is features where virtual identities can be created, associatted with a CCloudFront Distributionn and deployed to edge locations. Access to ann S3 buckket cann be connttrolled by using these OAI’s allowinng access from an OAI, and usinnng an implicit DENY for everythinng else. They are generally used to esure o direct access tto S3 objecct is allowed when usinng preivate CF Distributions What is Lambda@edge Lambda@edge allows cloudfront to run lambda functionn at CCloudFront edge loccations to modify traffic between the viewer and edge locations and origins What is Global Accelerator? AWS Global Acccelerator is designed to improve global network performance by offerinng entry point on to thhe global AWS transit network as close to ccustomers as possible using Anycast IP addresses Which type of S3 encryption shows as AES256? SSE-S3 Which S3 Storage class is suitable for data which is easily replaced (choose the most cost effective)? S3 One Zone-IA Which Object class in S3 is ideal for uncertain access and low admin overhead? S3 inteligent tiering What is the cheapest S3 storage class for important data which need to be retained for long periods and is rarely accessed? S3 Glacier Which steps are required to allow an S3 bucket to operate as a website (choose all which apply) ? Upload Web file Set index and error documents Enable static web hosting Disable block public access setting Add a bucket policy What S3 feature allows objects storage classes to be changed and objects deleted automatically? S3 Lifecycle policy What is the default limit of the number of S3 buckets in an AWS account? 100 How large can an object in S3 be ? and what (if any) limits are there on the number of objects in a bucket? 5TB, no limit object bucket What S3 feature needs to be enabled to allow Cross-Region Replication (CRR)? Versioning What S3 feature can be used to grant external accounts access to an S3 bucket? Resource Policy Which type of encryption allows for role separation where an S3 Full Admin might not be able to decrypt objects? SSE-KMS Which type of encryption is where AWS perform encryption operations but DON’T hold any keys? SSE-C What type of encryption means AWS perform the encryption operations and handle key creation &amp; management? SSE-S3 What feature is required to allow CRR to function? Versioning What happens when an object is deleted in a bucket with versioning enabled? A delete maker is added What is Network access control list(ACL) ? NACL: is optional layer of security for your VPC that acts as a firewall for controlling traffic in and out on one or more subnet. You might setup network ACLs with rules similar to your security groups in order to add an additional layer of security to your VPC.(stateless) What is Seccurity Group(stateful)? Are another seccurity feature of AWS VPC … only unlike NACL they are attached to AWS Resources, nnot VPC subnets SG offer a few advagesvs NACLs in that they can recognize AWS resources and filter based on them, they can reference other SGs and also themselves But SG are not cappable of explicy traffic - often rquire assistance NACL]]></summary></entry><entry><title type="html">AWS Monitoring, Audit, and Performance</title><link href="http://localhost:4000/posts/aws-monitoring-audit-and-performance/" rel="alternate" type="text/html" title="AWS Monitoring, Audit, and Performance" /><published>2024-02-06T00:00:00+07:00</published><updated>2024-02-06T00:00:00+07:00</updated><id>http://localhost:4000/posts/aws-monitoring-audit-and-performance</id><content type="html" xml:base="http://localhost:4000/posts/aws-monitoring-audit-and-performance/"><![CDATA[<h1 id="aws-monitoring-audit-and-performance">AWS Monitoring, Audit and Performance</h1>
<h2 id="aws-cloudwatch-metrics">AWS CloudWatch Metrics</h2>
<ul>
  <li>Cloudwatch provides metrics for every services in AWS</li>
  <li>Metric is a variable to monitor (CPUUtilization, NetworkIn…)</li>
  <li>Metrics belong to namespaces</li>
  <li>Dimension is an attribute of a metric (instance id, environment, etc…)</li>
  <li>Up to 10 dimensions per metric</li>
  <li>Metrics have timestamps</li>
  <li>Can create CloudWatch dashboards of metrics
    <h2 id="ec2-detailed-monitoring">EC2 Detailed monitoring</h2>
  </li>
  <li>EC2 instance metrics have metrics “every 5 minutes”</li>
  <li>With detailed monitoring (for a cost), you get data “every 1 minute”</li>
  <li>Use detailed monitoring if you want to scale faster for you ASG!</li>
  <li>The AWS tier allows us to have 10 detailed monitoring metrics</li>
  <li>Note: EC2 Memory usage is by default not pushed (must be pushed from inside the instance as a custom metric)
    <h2 id="cloudwatch-custom-metrics">CloudWatch Custom Metrics</h2>
  </li>
  <li>Possibility to define and send your own custom metrics to CloudWatch</li>
  <li>Example: memory (RAM) usage, disk space, number of logged in users …</li>
  <li>Use API call PutMetricData</li>
  <li>Ability to use dimensions (attributes) to segment metrics
    <ul>
      <li>Instance.id</li>
      <li>Environment.name</li>
    </ul>
  </li>
  <li>Metric resolution (StorageResolution API parameter - two possible value):
    <ul>
      <li>Standard: 1 minute (60 seconds)</li>
      <li>High Resolution: 1/5/10/30 second(s) - Highr cost</li>
    </ul>
  </li>
  <li>Important: Accepts metric data points two weeks in the past and two hours in the future (make sure to configure your EC@ instance time corectly)
    <h2 id="cloudwatch-dashboards">CloudWatch Dashboards</h2>
  </li>
  <li>Great way to setup custom dashboards for quick access to key metrics and alarms</li>
  <li>Dashboards are global</li>
  <li>Dashboards can include graphs from different AWS accounts and regions</li>
  <li>You can change the time zone &amp; time range of dashboards</li>
  <li>You can setup automatic refresh (10s, 1m, 2m, 5m, 15m)</li>
  <li>Dashboards can be shared with people who don’t have an AWS account (public, email address, 3rd party SSO provider through Amazon Cognito)</li>
  <li>Pricing
    <ul>
      <li>3 dashboards (up to 50metrics) for free</li>
      <li>$3/dashboard/month afterwards
        <h2 id="cloudwatch-logs">CloudWatch Logs</h2>
      </li>
    </ul>
  </li>
  <li>Log groups: arbitrary name, usually representing an application</li>
  <li>Log stream: instances within application / log files / containers</li>
  <li>Can define log expiration policies (never expire, 30 days, etc..)</li>
  <li>CloudWatch Logs can send logs to:
    <ul>
      <li>Amazon S3 (exports)</li>
      <li>Kinesis Data Streams</li>
      <li>Kinesis Data Firehose</li>
      <li>AWS Lambda</li>
      <li>ElasticSearch
        <h2 id="cloudwatch-logs---sources">CloudWatch Logs - Sources</h2>
      </li>
    </ul>
  </li>
  <li>SDK, CloudWatch Logs Agent, CloudWatch Unified Agent</li>
  <li>Elastic Beanstalk: collection of logs from application</li>
  <li>ECS: collection from containers</li>
  <li>AWS Lambda: collection from function logs</li>
  <li>VPC Flow Logs: VPC specific logs</li>
  <li>API Gateway</li>
  <li>CloudTrail based on filter</li>
  <li>Route53: Log DNS queries
    <h2 id="cloudwatch-logs-metric-filter--insights">CloudWatch Logs Metric Filter &amp; Insights</h2>
  </li>
  <li>CloudWatch Logs can use filter expressions
    <ul>
      <li>For example, find a specific IP inside of a log</li>
      <li>Or count occurrences of “ERROR” in your logs</li>
    </ul>
  </li>
  <li>Metric filters can be used to triggr CloudWatch alarms</li>
  <li>Cloudwatch Logs Insights can be used to query logs and add queries to CloudWatch Dashboards
    <h2 id="cloudwatch-logs--s3-export">CloudWatch Logs – S3 Export</h2>
  </li>
  <li>Log data can take up to 12 hours to become available for export</li>
  <li>The API call is CreateExportTask</li>
  <li>Not near-real time or real-time… use Logs Subscriptions instead
    <h2 id="cloudwatch-logs-subscriptions">CloudWatch Logs Subscriptions</h2>
    <p><img src="https://data.terabox.com/thumbnail/04abc5033f62ea9559263837c91802af?fid=4401547290288-250528-654347901904295&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-onXs40WxMS4HewLr0eNfRXPOyCI%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=214382886743684890&amp;dp-callid=0&amp;time=1667534400&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" /></p>
    <h2 id="cloudwatch-logs-aggregation-multi-account--multi-region">CloudWatch Logs Aggregation Multi-Account &amp; Multi Region</h2>
    <p><img src="https://data.terabox.com/thumbnail/e8fd758c11e0bf1d1e7e19899638dc31?fid=4401547290288-250528-564143060683598&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-3piASJj%2fo9lfq5mCGzX6e9gghjQ%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=214454843239863206&amp;dp-callid=0&amp;time=1667534400&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" /></p>
    <h2 id="cloudwatch-logs-for-ec2">CloudWatch Logs for EC2</h2>
  </li>
  <li>By default, no logs from your EC2 machine will go to CloudWatch</li>
  <li>You need to run a CloudWatch agent on EC2 to push the log files you want</li>
  <li>Make sure IAM permissions are correct</li>
  <li>The CloudWatch log agent can be setup on premises too
<img src="https://data.terabox.com/thumbnail/94bbe0b65ca286890f346b574f151f34?fid=4401547290288-250528-696868206928029&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-aS1mqiv8UdNHkdyIrcSC9kGELD4%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=214502317154085731&amp;dp-callid=0&amp;time=1667534400&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
    <h2 id="cloudwatch-logs-agent--unified-agent">CloudWatch Logs Agent &amp; Unified Agent</h2>
  </li>
  <li>For virtual servers (EC2 instances, on-premises servers…)</li>
  <li>CloudWatch Logs Agent
    <ul>
      <li>Old version of the agent</li>
      <li>Can only send to CloudWatch Logs</li>
    </ul>
  </li>
  <li>CloudWatch Unified Agent
    <ul>
      <li>Collect additional system-level metrics such as RAM, processes, etc…</li>
      <li>Collect logs to send to CloudWatch Logs</li>
      <li>Centralized configuration using SSM Parameter Store
        <h2 id="cloudwatch-unified-agent--metrics">CloudWatch Unified Agent – Metrics</h2>
      </li>
    </ul>
  </li>
  <li>Collected directly on your Linux server / EC2 instance</li>
  <li>CPU (active, guest, idle, system, user, steal)</li>
  <li>Disk metrics (free, used, total), Disk IO (writes, reads, bytes, iops)</li>
  <li>RAM (free, inactive, used, total, cached)</li>
  <li>Netstat (number of TCP and UDP connections, net packets, bytes)</li>
  <li>Processes (total, dead, bloqued, idle, running, sleep)</li>
  <li>Swap Space (free, used, used %)</li>
  <li>Reminder: out-of-the box metrics for EC2 – disk, CPU, network (high level)
    <h2 id="cloudwatch-alarms">CloudWatch Alarms</h2>
  </li>
  <li>Alarms are used to trigger notifications for any metric</li>
  <li>Various options (sampling, %, max, min, etc…)</li>
  <li>Alarm States:
    <ul>
      <li>OK</li>
      <li>INSUFFICIENT_DATA</li>
      <li>ALARM</li>
    </ul>
  </li>
  <li>Period:
    <ul>
      <li>Length of time in seconds to evaluate the metric</li>
      <li>High resolution custom metrics: 10 sec, 30 sec or multiples of 60 sec
        <h2 id="cloudwatch-alarm-targets">CloudWatch Alarm Targets</h2>
      </li>
    </ul>
  </li>
  <li>Stop, Terminate, Reboot, or Recover an EC2 Instance</li>
  <li>Trigger Auto Scaling Action</li>
  <li>Send notification to SNS (from which you can do pretty much anything)
<img src="https://data.terabox.com/thumbnail/ddbaea3f8ded408a8f0653c3d65c0a71?fid=4401547290288-250528-797778510712352&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-98bL1hXiVpkLZUcaHUSmZ0PhaCk%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=214613010955798462&amp;dp-callid=0&amp;time=1667534400&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
    <h2 id="ec2-instance-recovery">EC2 Instance Recovery</h2>
  </li>
  <li>Status Check:
    <ul>
      <li>Instance status = check the EC2 VM</li>
      <li>System status = check the underlying hardware</li>
    </ul>
  </li>
  <li>Recovery: Same Private, Public, Elastic IP, metadata, placement group
<img src="https://data.terabox.com/thumbnail/e2f4b6e0be6f860bba4ae42014d37403?fid=4401547290288-250528-247094783744706&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-qqAWhdFvYxfoxtPL%2fawDafGEceM%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=214633180891749929&amp;dp-callid=0&amp;time=1667534400&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
    <h2 id="cloudwatch-events">CloudWatch Events</h2>
  </li>
  <li>Event pattern: Interceot events from AWS services (Sources)
    <ul>
      <li>Example sources: EC2 instance start, CodeBuild Failre, S3, Trusted Advisor</li>
      <li>Can intercept any API call with CloudTrai integration</li>
    </ul>
  </li>
  <li>Schedule or Cron (example: create an event every 4 hours)</li>
  <li>A JSON payload is created from the event and passed to a target…
    <ul>
      <li>Compute: Lambda, Batch, ECS task</li>
      <li>Integration: SQS, SNS, Kinesis Data Streams, Kinesis Data Firehose</li>
      <li>Orchestration: Step functions, CodePipeline, CodeBuild</li>
      <li>Maintenance: SSM, EC2 Actions
        <h2 id="amazon-eventbridge">Amazon EventBridge</h2>
      </li>
    </ul>
  </li>
  <li>EventBridge is the next evolution of CloudWatch Events</li>
  <li>Default Event Bus - generated by AWS services (CloudWatch Events)</li>
  <li>Partner Event Bus: receive events from SaaS service or applications (Zendesk, DataDog, Segment, Auth0…)</li>
  <li>Custom Event Buses: for your own applications</li>
  <li>Event Buses can be accessed by other AWS accounts</li>
  <li>You can archive events (all/filter) sent to an event bus (indefinitely or set period)</li>
  <li>Ability to replay archived events</li>
  <li>Rules: how to process the events (like couldwatch events)
    <h2 id="amazon-evntbridge---schema-registry">Amazon EvntBridge - Schema Registry</h2>
  </li>
  <li>EventBridge can analyze the events in your bus and infer the schema</li>
  <li>The Schema Registry allows you to generate code for your application, that will know in advance how data is structured in the event bus</li>
  <li>Schema can be versioned
    <h2 id="amazon-eventbridge--resource-based-policy">Amazon EventBridge – Resource-based Policy</h2>
  </li>
  <li>Manage permissions for a specific Event Bus</li>
  <li>Example: allow/deny events from another AWS account or AWS region</li>
  <li>Use case: aggregate all events from your AWS Organization in a single AWS account or AWS region
<img src="https://data.terabox.com/thumbnail/1062a56fc93b25be661215f52fb713c6?fid=4401547290288-250528-732538512753138&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-jMuvWqMrK%2f9ZdDpnpE8OFOQzuGI%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=215098522923733259&amp;dp-callid=0&amp;time=1667534400&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
    <h2 id="amazon-eventbridge-vs-cloudwatch-events">Amazon EventBridge vs CloudWatch Events</h2>
  </li>
  <li>Amazon EventBridge builds upon and extends CloudWatch Events.</li>
  <li>It uses the same service API and endpoint, and the same undrlying service infrastructure</li>
  <li>EventBridge allows extension to add event buses for your custom applications and your third-party SaaS apps.</li>
  <li>Event Bridge has the Schema registry capability</li>
  <li>EventBridge has a different name to mark the new capabilities</li>
  <li>Over time, the CloudWatch Events name will be replaced with EventBridge
    <h2 id="aws-cloudtrail">AWS CloudTrail</h2>
  </li>
  <li>Provides governance, compliance and audit for your AWS Account</li>
  <li>CloudTrail is enabled by default!</li>
  <li>Get an history of events / API calls made within your AWS Account by:
    <ul>
      <li>Console</li>
      <li>SDK</li>
      <li>CLI</li>
      <li>AWS Services</li>
    </ul>
  </li>
  <li>Can put logs from CloudTrail into Cloud</li>
  <li>A trail can be applied to All Regions (default) or a single Region</li>
  <li>If a resource is deleted in AWS, investigate CloudTrail first!
    <h2 id="cloudtrail-diagram">CloudTrail Diagram</h2>
    <p><img src="https://data.terabox.com/thumbnail/02bbac5944dd32497977380a03adc90a?fid=4401547290288-250528-214387842489131&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-xgqy9yQh980wuzWUNLu%2brYoNwFs%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=216773946963548255&amp;dp-callid=0&amp;time=1667541600&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" /></p>
    <h2 id="cloudtrail-events">CloudTrail Events</h2>
  </li>
  <li>Management Events:
    <ul>
      <li>Operations that are performed on resources in your AWS account</li>
      <li>Examples:
        <ul>
          <li>Configuring security (IAM AttachRolePolicy)</li>
          <li>Configuring rules for routing data (Amazon EC2 CreateSubnet)</li>
          <li>Setting up logging (AWS CloudTrail CreateTrail)</li>
        </ul>
      </li>
      <li>By default, trails are configured to log management events.</li>
      <li>Can separate Read Events (that don’t modify resources) from Write Events (that may modify resources)</li>
    </ul>
  </li>
  <li>Data Events:
    <ul>
      <li>By default, data events are not logged (because high volume operations)</li>
      <li>Amazon S3 object-level activity (ex: GetObject, DeleteObject, PutObject ): can separate Read and Write Events</li>
      <li>AWS Lambda function execution activity (the Invoke API)</li>
    </ul>
  </li>
  <li>CloudTrail Insights Events
    <ul>
      <li>See next slide
        <h2 id="cloudtrail-insights">CloudTrail Insights</h2>
      </li>
    </ul>
  </li>
  <li>Enable CloudTrail Insights to detect unusual activity in your account:
    <ul>
      <li>inaccurate resource provisioning</li>
      <li>hitting service limits</li>
      <li>Bursts of AWS IAM actions</li>
      <li>Gaps in periodic maintenance activity</li>
    </ul>
  </li>
  <li>CloudTrail Insights analyzes normal management events to create a baseline</li>
  <li>And then continuously analyzes write events to detect unusual patterns
    <ul>
      <li>Anomalies appear in the CloudTrail console</li>
      <li>Event is sent to Amazon S3</li>
      <li>An EventBridge event is generated (for automation needs)
<img src="https://data.terabox.com/thumbnail/d03d0805fe9fb0bc9c6875db29411916?fid=4401547290288-250528-921135651322767&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-aC53BeSg0dRKxConuj%2bWytxh1%2b4%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=216881216511701042&amp;dp-callid=0&amp;time=1667541600&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
        <h2 id="cloudtrail-events-retention">CloudTrail Events Retention</h2>
      </li>
    </ul>
  </li>
  <li>Events are stored for 90 days in CloudTrail</li>
  <li>To keep events beyond this period, log them to S3 and use Athena
<img src="https://data.terabox.com/thumbnail/57a5f83744cba9eda0a2b025deb798e0?fid=4401547290288-250528-975671270385073&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-OeWjkd5je8R2SHJ3yp3V0Di%2b6xo%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=216898217029829320&amp;dp-callid=0&amp;time=1667541600&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
    <h2 id="aws-config">AWS Config</h2>
  </li>
  <li>Helps with auditing and recording compliance of your AWS resources</li>
  <li>Helps record configurations and changes over time</li>
  <li>Questions that can be solved by AWS Config:
    <ul>
      <li>Is there unrestricted SSH access to my security groups?</li>
      <li>Do my buckets have any public access?</li>
      <li>How has my ALB configuration changed over time?</li>
    </ul>
  </li>
  <li>You can receive alerts (SNS notifications) for any changes</li>
  <li>AWS Config is a per-region service</li>
  <li>Can be aggregated across regions and accounts</li>
  <li>Possibility of storing the configuration data into S3 (analyzed by Athena)
    <h2 id="config-rules">Config Rules</h2>
  </li>
  <li>Can use AWS managed config rules (over 75)</li>
  <li>Can make custom config rules (must be defined in AWS Lambda)
    <ul>
      <li>Ex: evaluate if each EBS disk is of type gp2</li>
      <li>Ex: evaluate if each EC2 instance is t2.micro</li>
    </ul>
  </li>
  <li>Rules can be evaluated / triggered:
    <ul>
      <li>For each config change</li>
      <li>And / or: at regular time intervals</li>
    </ul>
  </li>
  <li>AWS Config Rules does not prevent actions from happening (no deny)</li>
  <li>Pricing: no free tier, $0.003 per configuration item recorded per region,
$0.001 per config rule evaluation per region
    <h2 id="aws-config-resource">AWS Config Resource</h2>
  </li>
  <li>View compliance of a resource over time</li>
  <li>View configuration of a resource over time</li>
  <li>View CloudTrail API calls of a resource over time
<img src="https://data.terabox.com/thumbnail/0b03aa61f9308e33d2a4f29ed032b8e8?fid=4401547290288-250528-126345804289668&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-9tlYGB3a2lXlNx6tpxGU33Gyfzk%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=216970130579784745&amp;dp-callid=0&amp;time=1667541600&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
    <h2 id="config-rules--remediations">Config Rules – Remediations</h2>
  </li>
  <li>Automate remediation of non-compliant resources using SSM Automation
Documents</li>
  <li>Use AWS-Managed Automation Documents or create custom Automation
Documents
    <ul>
      <li>Tip: you can create custom Automation Documents that invokes Lambda function</li>
    </ul>
  </li>
  <li>You can set Remediation Retries if the resource is still non-compliant after auto-remediation
    <h2 id="config-rules--notifications">Config Rules – Notifications</h2>
  </li>
  <li>Use EventBridge to trigger notifications when AWS resources are non-compliant
<img src="https://data.terabox.com/thumbnail/a8cc45b5f21a7b84a2572d25bb429135?fid=4401547290288-250528-103163448512458&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-xK%2bhzEo83usxGVgyMZ90qzk1Yc0%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=217017174480331262&amp;dp-callid=0&amp;time=1667541600&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" /></li>
  <li>Ability to send configuration changes and compliance state notifications
to SNS (all events – use SNS Filtering or filter at client-side)
<img src="https://data.terabox.com/thumbnail/62129b58c7d62f89ce9a2babea056a9b?fid=4401547290288-250528-559254806949063&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-nBO5AgojcgZ2CnjrswOMU39KuJw%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=217030677069452616&amp;dp-callid=0&amp;time=1667541600&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
    <h2 id="cloudwatch-vs-cloudtrail-vs-config">CloudWatch vs CloudTrail vs Config</h2>
  </li>
  <li>CloudWatch
    <ul>
      <li>Performance monitoring (metrics, CPU, network, etc…) &amp; dashboards</li>
      <li>Events &amp; Alerting</li>
      <li>Log Aggregation &amp; Analysis</li>
    </ul>
  </li>
  <li>CloudTrail
    <ul>
      <li>Record API calls made within your Account by everyone</li>
      <li>Can define trails for specific resources</li>
      <li>Global Service</li>
    </ul>
  </li>
  <li>Config
    <ul>
      <li>Record configuration changes</li>
      <li>Evaluate resources against compliance rules</li>
      <li>Get timeline of changes and compliance
        <h2 id="for-an-elastic-load-balancer">For an Elastic Load Balancer</h2>
      </li>
    </ul>
  </li>
  <li>CloudWatch:
    <ul>
      <li>Monitoring Incoming connections metric</li>
      <li>Visualize error codes as % over time</li>
      <li>Make a dashboard to get an idea of your load balancer performance</li>
    </ul>
  </li>
  <li>Config:
    <ul>
      <li>Track security group rules for the Load Balancer</li>
      <li>Track configuration changes for the Load Balancer</li>
      <li>Ensure an SSL certificate is always assigned to the Load Balancer (compliance)</li>
    </ul>
  </li>
  <li>CloudTrail:
    <ul>
      <li>Track who made any changes to the Load Balancer with API calls
        <h2 id="aws-sts--security-token-service">AWS STS – Security Token Service</h2>
      </li>
    </ul>
  </li>
  <li>Allows to grant limited and temporary access to AWS resources.</li>
  <li>Token is valid for up to one hour (must be refreshed)</li>
  <li>AssumeRole
    <ul>
      <li>Within your own account: for enhanced security</li>
      <li>Cross Account Access: assume role in target account to perform actions there</li>
    </ul>
  </li>
  <li>AssumeRoleWithSAML
    <ul>
      <li>return credentials for users logged with SAML</li>
    </ul>
  </li>
  <li>AssumeRoleWithWebIdentity
    <ul>
      <li>return creds for users logged with an IdP (Facebook Login, Google Login, OIDC compatible…)</li>
      <li>AWS recommends against using this, and using Cognito instead</li>
    </ul>
  </li>
  <li>GetSessionToken
    <ul>
      <li>for MFA, from a user or AWS account root user
        <h2 id="using-sts-to-assume-a-role">Using STS to Assume a Role</h2>
      </li>
    </ul>
  </li>
  <li>Define an IAM Role within your account or cross-account</li>
  <li>Define which principals can access this IAM Role</li>
  <li>Use AWS STS (Security Token Service) to retrieve credentials and impersonate the IAM Role you have access to (AssumeRole API)</li>
  <li>Temporary credentials can be valid between 15 minutes to 1 hour
<img src="https://data.terabox.com/thumbnail/f1d2c1be6986a81036eac50b1bcc816d?fid=4401547290288-250528-586507772444246&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-dQeHKjTxRALscaP17oqmSwEGKB8%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=217154853426255026&amp;dp-callid=0&amp;time=1667541600&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
    <h2 id="cross-account-access-with-sts">Cross account access with STS</h2>
    <p><img src="https://data.terabox.com/thumbnail/dd93815065652baf5575c1edf5d2b9ff?fid=4401547290288-250528-106028331143318&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-c5%2bFMH%2bj6jKHB3fUlFbfzxrUSiI%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=217170673819591883&amp;dp-callid=0&amp;time=1667545200&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" /></p>
    <h2 id="identity-federation-in-aws">Identity Federation in AWS</h2>
  </li>
  <li>Federation lets users outside of AWS to assume temporary role for accessing AWS resources.</li>
  <li>These users assume identity provided access role.</li>
  <li>Federations can have many flavors:
    <ul>
      <li>SAML 2.0</li>
      <li>Custom Identity Broker</li>
      <li>Web Identity Federation with Amazon Cognito</li>
      <li>Web Identity Federation without Amazon Cognito</li>
      <li>Single Sign On</li>
      <li>Non-SAML with AWS Microsoft AD</li>
    </ul>
  </li>
  <li>Using federation, you don’t need to create IAM users (user management is outside of AWS)
<img src="https://data.terabox.com/thumbnail/b7b593e9b55d8eb96e9bc621ccb6658e?fid=4401547290288-250528-334549767703471&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-PLQKzuPbp1gY%2fht9WBM2zq5gd6U%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=217204789707972375&amp;dp-callid=0&amp;time=1667545200&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
    <h2 id="saml-20-federation">SAML 2.0 Federation</h2>
  </li>
  <li>To integrate Active Directory / ADFS with AWS (or any SAML 2.0)</li>
  <li>Provides access to AWS Console or CLI (through temporary creds)</li>
  <li>No need to create an IAM user for each of your employees
<img src="https://data.terabox.com/thumbnail/c7b6d0d32fb9325fa79378ae2db95960?fid=4401547290288-250528-392525858093714&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-N7xJnVPKomz6%2bzW4X3V59PFjECQ%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=218333761575233277&amp;dp-callid=0&amp;time=1667548800&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
    <h2 id="saml-20-federation--active-directory-fs">SAML 2.0 Federation – Active Directory FS</h2>
  </li>
  <li>Same process as with any SAML 2.0 compatible IdP
<img src="https://data.terabox.com/thumbnail/8d166b5f5668aaaaf8afb53e2a1f7ac0?fid=4401547290288-250528-886776048673321&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-OE2vKD3%2fQ88rJyhXCWF0zxrtBOc%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=218375574990367700&amp;dp-callid=0&amp;time=1667548800&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
    <h2 id="saml-20-federation-1">SAML 2.0 Federation</h2>
  </li>
  <li>Needs to setup a trust between AWS IAM and SAML (both ways)</li>
  <li>SAML 2.0 enables web-based, cross domain SSO</li>
  <li>Uses the STS API: AssumeRoleWithSAML</li>
  <li>Note federation through SAML is the “old way” of doing things</li>
  <li>Amazon Single Sign On (SSO) Federation is the new managed and
simpler way
    <ul>
      <li>Read more here: https://aws.amazon.com/blogs/security/enabling-federation-to-aws-using-windows-active-directory-adfs-and-saml-2-0/
        <h2 id="custom-identity-broker-application">Custom Identity Broker Application</h2>
      </li>
    </ul>
  </li>
  <li>Use only if identity provider is not compatible with SAML 2.0</li>
  <li>The identity broker must determine the appropriate IAM policy</li>
  <li>Uses the STS API: AssumeRole or GetFederationToken
<img src="https://data.terabox.com/thumbnail/c84c5765074b7152eaaf54c23a13230e?fid=4401547290288-250528-529214597819384&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-rzChLMVt0SwfeP2szURmVug0YF0%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=218515452911764723&amp;dp-callid=0&amp;time=1667548800&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
    <h2 id="web-identity-federation--assumerolewithwebidentity">Web Identity Federation – AssumeRoleWithWebIdentity</h2>
  </li>
  <li>Not recommended by AWS – use Cognito instead (allows for anonymous users, data synchronization, MFA)
<img src="https://data.terabox.com/thumbnail/b422116600cfe161f80bddce9e993c50?fid=4401547290288-250528-291953383498164&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-Ffo0tucrBoAmDnukDQ%2bz7YTSy%2bE%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=218568517770816282&amp;dp-callid=0&amp;time=1667548800&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
    <h2 id="aws-cognito">AWS Cognito</h2>
  </li>
  <li>Goal:
    <ul>
      <li>Provide direct access to AWS Resources from the Client Side (mobile, web app)</li>
    </ul>
  </li>
  <li>Example:
    <ul>
      <li>provide (temporary) access to write to S3 bucket using Facebook Login</li>
    </ul>
  </li>
  <li>Problem:
    <ul>
      <li>We don’t want to create IAM users for our app users</li>
    </ul>
  </li>
  <li>How:
    <ul>
      <li>Log in to federated identity provider – or remain anonymous</li>
      <li>Get temporary AWS credentials back from the Federated Identity Pool</li>
      <li>These credentials come with a pre-defined IAM policy stating their permissions
        <h2 id="what-is-microsoft-active-directory-ad">What is Microsoft Active Directory (AD)?</h2>
      </li>
    </ul>
  </li>
  <li>Found on any Windows Server with AD Domain Services</li>
  <li>Database of objects: User Accounts, Computers, Printers, File Shares, Security Groups</li>
  <li>Centralized security management, create account, assign permissions</li>
  <li>Objects are organized in trees</li>
  <li>A group of trees is a forest
    <h2 id="aws-directory-services">AWS Directory Services</h2>
  </li>
  <li>AWS Managed Microsoft AD
    <ul>
      <li>Create your own AD in AWS, manage users locally, supports MFA</li>
      <li>Establish “trust” connections with your on-premises AD</li>
    </ul>
  </li>
  <li>AD Connector
    <ul>
      <li>Directory Gateway (proxy) to redirect to on-premises AD, supports MFA</li>
      <li>Users are managed on the on-premises AD</li>
    </ul>
  </li>
  <li>Simple AD
    <ul>
      <li>AD-compatible managed directory on AWS</li>
      <li>Cannot be joined with on-premises AD
        <h2 id="aws-organizations">AWS Organizations</h2>
      </li>
    </ul>
  </li>
  <li>Global service</li>
  <li>Allows to manage multiple AWS accounts</li>
  <li>The main account is the master account – you can’t change it</li>
  <li>Other accounts are member accounts</li>
  <li>Member accounts can only be part of one organiztion</li>
  <li>Consolidated Billing across all accounts - single payment method</li>
  <li>Pricing benefits from aggregated usage (volume discount for EC2, S3…)</li>
  <li>API is available to automate AWS account creation
    <h2 id="multi-account-strategies">Multi Account Strategies</h2>
  </li>
  <li>Create accounts per department, per cost center, per dev / test / prod, based on regulatory restrictions (using SCP), for better resource isolation (ex: VPC), to have separate per-account service limit, isolated account for logging</li>
  <li>Multi Account vs One Account Multi VPC</li>
  <li>Use tagging standards for billing purposes</li>
  <li>Enable CloudTrail on all accounts, send logs to central S3 account</li>
  <li>Send CloudWatch logs to central logging account</li>
  <li>Establish cross account roles for admin purposes
    <h2 id="organizational-units-ou---examples">Organizational Units (OU) - Examples</h2>
    <p><img src="https://data.terabox.com/thumbnail/35165b599028b6e66b8ff3c68261e234?fid=4401547290288-250528-100081827684100&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-Js5vxsrebBtVLAyN1KJuw9elCNw%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=219979697638906354&amp;dp-callid=0&amp;time=1667552400&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" /></p>
    <h2 id="aws-organization">AWS Organization</h2>
    <p><img src="https://data.terabox.com/thumbnail/0d68a0e813e6cbf2d725939349d08c5f?fid=4401547290288-250528-167070688745664&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-eyL115l79CGrrkXSambKyQM6iyo%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=219991520664672598&amp;dp-callid=0&amp;time=1667552400&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" /></p>
    <h2 id="service-control-policies-scp">Service Control Policies (SCP)</h2>
  </li>
  <li>Whitelist or blacklist IAM actions</li>
  <li>Applied at the OU or Account level</li>
  <li>Does not apply to the Master Account</li>
  <li>SCP is applied to all the Users and Roles of the Account, including Root user</li>
  <li>The SCP does not affect service-linked roles
    <ul>
      <li>Service-linked roles enable other AWS services to integrate with AWS Organizations and can’t be restricted by SCPs.</li>
    </ul>
  </li>
  <li>SCP must have an explicit Allow (does not allow anything by default)</li>
  <li>Use cases:
    <ul>
      <li>Restrict access to certain services (for example: can’t use EMR)</li>
      <li>Enforce PCI compliance by explicitly disabling services
        <h2 id="scp-hierarchy">SCP Hierarchy</h2>
        <p><img src="https://data.terabox.com/thumbnail/2285cc827173fd732d8454786920cc49?fid=4401547290288-250528-35219311130830&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-1OE9aXOfPDhIAxYgMKQgnmgH8Cc%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220027427804734668&amp;dp-callid=0&amp;time=1667552400&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
<img src="https://data.terabox.com/thumbnail/48227a166faffa2f5c5f45c81bd7467f?fid=4401547290288-250528-432741673575103&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-pAm%2bVCEHq5be4n1u9sP0KMfz%2f6M%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220050632987484899&amp;dp-callid=0&amp;time=1667552400&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" /></p>
        <h2 id="aws-organization--moving-accounts">AWS Organization – Moving Accounts</h2>
      </li>
    </ul>
  </li>
  <li>To migrate accounts from one organization to another
    <ol>
      <li>Remove the member account from the old organization</li>
      <li>Send an invite to the new organiztion</li>
      <li>Accept the invite to the new organization from the member account</li>
    </ol>
  </li>
  <li>If you want the master account of the old organization to also join the new organization, do the following:
    <ol>
      <li>Remove the member accounts from the organizations using procedure above</li>
      <li>Delete the old organization</li>
      <li>Repeat the process above to invite the old master account to the new org
<img src="https://data.terabox.com/thumbnail/154626f7672f7594c5d62c0131cf55be?fid=4401547290288-250528-983569818853867&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-bClV8%2fOV0ZZkv9zPkrgyrnQBttY%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220109457588015889&amp;dp-callid=0&amp;time=1667556000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
        <h2 id="iam-conditions">IAM Conditions</h2>
        <p><img src="https://data.terabox.com/thumbnail/594cb3e1dc8410385d534845e0d73ca0?fid=4401547290288-250528-611246829116890&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-bMgtu1lDQq4KL2K4wvDaaJ%2bHg9U%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220124888680246170&amp;dp-callid=0&amp;time=1667556000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
<img src="https://data.terabox.com/thumbnail/9316e2704af9e607c6581b35775bf39d?fid=4401547290288-250528-481221424643039&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-uj17NK53LhttIQCy4LdYSmaVvog%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220148473480242532&amp;dp-callid=0&amp;time=1667556000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" /></p>
        <h2 id="iam-for-s3">IAM for S3</h2>
      </li>
    </ol>
  </li>
  <li>ListBucket permission applies to arn:aws:s3:::test</li>
  <li>=&gt; bucket level permission</li>
  <li>GetObject, PutObject, DeleteObject applies to arn:awn:s3:::test/*</li>
  <li>=&gt; object level permission
<img src="https://data.terabox.com/thumbnail/9316e2704af9e607c6581b35775bf39d?fid=4401547290288-250528-318631966680319&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-pPIbv91WNwmdpjXtkvtyTA2HRnk%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220150227236216663&amp;dp-callid=0&amp;time=1667556000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
    <h2 id="iam-roles-vs-resource-based-policies">IAM Roles vs Resource Based Policies</h2>
  </li>
  <li>Attach a policy to a resource (example: S3 bucket policy) versus attaching of a using a role as a proxy
<img src="https://data.terabox.com/thumbnail/d6407a4bade989333c0c629856786ecb?fid=4401547290288-250528-286178952248615&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-K7KCAsw1asrNk7ejANhyVv8fBik%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220195210904642544&amp;dp-callid=0&amp;time=1667556000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
    <h2 id="iam-roles-vs-resource-based-policies-1">IAM Roles vs Resource Based Policies</h2>
  </li>
  <li>When you assume a role (user, application or service), you give up your
original permissions and take the permissions assigned to the role</li>
  <li>When using a resource based policy, the principal doesn’t have to give
up his permissions</li>
  <li>Example: User in account A needs to scan a DynamoDB table in Account A and dump it in an S3 bucket in Account B</li>
  <li>Supported by: Amazon S3 buckets, SNS topics, SQS queues, etc…
    <h2 id="iam-permission-boundaries">IAM Permission Boundaries</h2>
  </li>
  <li>IAM Permission Boundaries are supported for users and roles (not groups)</li>
  <li>Advanced feature to use a managed policy to set the maximum permissions
an IAM entity can get.
<img src="https://data.terabox.com/thumbnail/790035040f5cd2bdf957df2feedf0f03?fid=4401547290288-250528-417917140952444&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-m7HDIuD1g1xNxmySEv%2fBENobQ8A%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220242801437375018&amp;dp-callid=0&amp;time=1667556000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
    <h2 id="iam-permission-boundaries-1">IAM Permission Boundaries</h2>
  </li>
  <li>Can be used in combinations of AWS Organizations SCP
<img src="https://data.terabox.com/thumbnail/a911c7832b93e96f4702d05a584c65dc?fid=4401547290288-250528-992783932441151&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-UHskvAwCs2aD5LAyT%2bx0tdun8E8%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220260884841035928&amp;dp-callid=0&amp;time=1667556000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" /></li>
  <li>Use cases
    <ul>
      <li>Delegate responsibilities to non administrators within their permission</li>
      <li>Allow developers to self-assign policies and manage their own permissions, while making sure they can’t escalate their privileges (= make themselves admin)</li>
      <li>Useful to restrict one specific user (instead of a whole account using Organizations &amp; SCP)
        <h2 id="iam-policy-evaluation-logic">IAM Policy Evaluation Logic</h2>
        <p><img src="https://data.terabox.com/thumbnail/afe0378f0df5690b80975a28c7ae4af8?fid=4401547290288-250528-801969616342204&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-RF04bAkcQ9z%2f9XG9aZMfGKJW4ic%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220365060183320422&amp;dp-callid=0&amp;time=1667556000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" /></p>
        <h2 id="example-iam-policy">Example IAM Policy</h2>
      </li>
    </ul>
  </li>
  <li>Can you perform sqs:CreateQueue?</li>
  <li>Can you perform sqs:DeleteQueue?</li>
  <li>Can you perform ec2:DescribeInstances?
    <h2 id="aws-resource-access-manager-ram">AWS Resource Access Manager (RAM)</h2>
  </li>
  <li>Share AWS resources that you own with other AWS accounts</li>
  <li>Share with any account or within your Organization</li>
  <li>Avoid resource duplication!</li>
  <li>VPC Subnets:
    <ul>
      <li>allow to have all the resources launched in the same subnets</li>
      <li>must be from the same AWS Organizations.</li>
      <li>Cannot share security groups and default VPC</li>
      <li>Participants can manage their own resources in there</li>
      <li>Participants can’t view, modify, delete resources that belong to other participants or the owner</li>
    </ul>
  </li>
  <li>AWS Transit Gateway</li>
  <li>Route53 Resolver Rules</li>
  <li>License Manager Configurations
    <h2 id="resource-access-manager--vpc-example">Resource Access Manager – VPC example</h2>
    <p><img src="https://data.terabox.com/thumbnail/d42dc3700f48b3c0ed035a53dbb3eea4?fid=4401547290288-250528-1097540045173168&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-HHVgvb4r7b3a2hAaZ93qUkpzplc%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220415791121398441&amp;dp-callid=0&amp;time=1667556000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" /></p>
  </li>
  <li>Each account…
    <ul>
      <li>is responsible for its own resources</li>
      <li>cannot view, modify or delete other resources in other accounts</li>
    </ul>
  </li>
  <li>Network is shared so…
    <ul>
      <li>Anything deployed in the VPC can talk to other resources in  the VPC</li>
      <li>Applications are accessed easily across accounts, using private IP!</li>
      <li>Security groups from other accounts can be referenced for maximum security
        <h2 id="aws-single-sign-on-sso">AWS Single Sign-On (SSO)</h2>
      </li>
    </ul>
  </li>
  <li>Centrally manage Single Sign-On to access multiple accounts and 3rd -party business applications.</li>
  <li>Integrated with AWS Organizations</li>
  <li>Supports SAML 2.0 markup</li>
  <li>Integration with on-premises Active Directory</li>
  <li>Centralized permission management</li>
  <li>Centralized a auditing with CloudTrail
<img src="https://data.terabox.com/thumbnail/51d7fae9d4fc55bcbfec6e74926e0666?fid=4401547290288-250528-678752735626691&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-3OX3fEJJzW6aaJ1%2fnTg0E2u%2bVUs%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220471516869484801&amp;dp-callid=0&amp;time=1667556000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
    <h2 id="aws-single-sign-on-sso--setup-with-ad">AWS Single Sign-On (SSO) – Setup with AD</h2>
    <p><img src="https://data.terabox.com/thumbnail/80a455cfed4ab80ff3825dc97a13f051?fid=4401547290288-250528-476059878497071&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-ELAR6fn%2fjySBywKunKtB6sGaJX8%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220490648943574061&amp;dp-callid=0&amp;time=1667556000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" /></p>
    <h2 id="sso--vs-assumerolewithsaml">SSO – vs AssumeRoleWithSAML</h2>
    <p><img src="https://data.terabox.com/thumbnail/22ceba706f9b6b5542266f20edd2a3d7?fid=4401547290288-250528-688792890826970&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-0N45qASqeo41kR4D3ocicPGOfhE%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=220508371845466250&amp;dp-callid=0&amp;time=1667556000&amp;size=c1920_u1080&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" /></p>
  </li>
</ul>]]></content><author><name>Hardwork đẹp trai</name></author><category term="Fullstack" /><category term="Architect" /><category term="AWS" /><category term="aws" /><category term="cloud Watch" /><category term="SSO" /><category term="AWS Resource Access Manager" /><category term="SCP" /><category term="IAM" /><category term="Could Trailt" /><category term="EventBridge" /><summary type="html"><![CDATA[AWS Monitoring, Audit and Performance AWS CloudWatch Metrics Cloudwatch provides metrics for every services in AWS Metric is a variable to monitor (CPUUtilization, NetworkIn…) Metrics belong to namespaces Dimension is an attribute of a metric (instance id, environment, etc…) Up to 10 dimensions per metric Metrics have timestamps Can create CloudWatch dashboards of metrics EC2 Detailed monitoring EC2 instance metrics have metrics “every 5 minutes” With detailed monitoring (for a cost), you get data “every 1 minute” Use detailed monitoring if you want to scale faster for you ASG! The AWS tier allows us to have 10 detailed monitoring metrics Note: EC2 Memory usage is by default not pushed (must be pushed from inside the instance as a custom metric) CloudWatch Custom Metrics Possibility to define and send your own custom metrics to CloudWatch Example: memory (RAM) usage, disk space, number of logged in users … Use API call PutMetricData Ability to use dimensions (attributes) to segment metrics Instance.id Environment.name Metric resolution (StorageResolution API parameter - two possible value): Standard: 1 minute (60 seconds) High Resolution: 1/5/10/30 second(s) - Highr cost Important: Accepts metric data points two weeks in the past and two hours in the future (make sure to configure your EC@ instance time corectly) CloudWatch Dashboards Great way to setup custom dashboards for quick access to key metrics and alarms Dashboards are global Dashboards can include graphs from different AWS accounts and regions You can change the time zone &amp; time range of dashboards You can setup automatic refresh (10s, 1m, 2m, 5m, 15m) Dashboards can be shared with people who don’t have an AWS account (public, email address, 3rd party SSO provider through Amazon Cognito) Pricing 3 dashboards (up to 50metrics) for free $3/dashboard/month afterwards CloudWatch Logs Log groups: arbitrary name, usually representing an application Log stream: instances within application / log files / containers Can define log expiration policies (never expire, 30 days, etc..) CloudWatch Logs can send logs to: Amazon S3 (exports) Kinesis Data Streams Kinesis Data Firehose AWS Lambda ElasticSearch CloudWatch Logs - Sources SDK, CloudWatch Logs Agent, CloudWatch Unified Agent Elastic Beanstalk: collection of logs from application ECS: collection from containers AWS Lambda: collection from function logs VPC Flow Logs: VPC specific logs API Gateway CloudTrail based on filter Route53: Log DNS queries CloudWatch Logs Metric Filter &amp; Insights CloudWatch Logs can use filter expressions For example, find a specific IP inside of a log Or count occurrences of “ERROR” in your logs Metric filters can be used to triggr CloudWatch alarms Cloudwatch Logs Insights can be used to query logs and add queries to CloudWatch Dashboards CloudWatch Logs – S3 Export Log data can take up to 12 hours to become available for export The API call is CreateExportTask Not near-real time or real-time… use Logs Subscriptions instead CloudWatch Logs Subscriptions CloudWatch Logs Aggregation Multi-Account &amp; Multi Region CloudWatch Logs for EC2 By default, no logs from your EC2 machine will go to CloudWatch You need to run a CloudWatch agent on EC2 to push the log files you want Make sure IAM permissions are correct The CloudWatch log agent can be setup on premises too CloudWatch Logs Agent &amp; Unified Agent For virtual servers (EC2 instances, on-premises servers…) CloudWatch Logs Agent Old version of the agent Can only send to CloudWatch Logs CloudWatch Unified Agent Collect additional system-level metrics such as RAM, processes, etc… Collect logs to send to CloudWatch Logs Centralized configuration using SSM Parameter Store CloudWatch Unified Agent – Metrics Collected directly on your Linux server / EC2 instance CPU (active, guest, idle, system, user, steal) Disk metrics (free, used, total), Disk IO (writes, reads, bytes, iops) RAM (free, inactive, used, total, cached) Netstat (number of TCP and UDP connections, net packets, bytes) Processes (total, dead, bloqued, idle, running, sleep) Swap Space (free, used, used %) Reminder: out-of-the box metrics for EC2 – disk, CPU, network (high level) CloudWatch Alarms Alarms are used to trigger notifications for any metric Various options (sampling, %, max, min, etc…) Alarm States: OK INSUFFICIENT_DATA ALARM Period: Length of time in seconds to evaluate the metric High resolution custom metrics: 10 sec, 30 sec or multiples of 60 sec CloudWatch Alarm Targets Stop, Terminate, Reboot, or Recover an EC2 Instance Trigger Auto Scaling Action Send notification to SNS (from which you can do pretty much anything) EC2 Instance Recovery Status Check: Instance status = check the EC2 VM System status = check the underlying hardware Recovery: Same Private, Public, Elastic IP, metadata, placement group CloudWatch Events Event pattern: Interceot events from AWS services (Sources) Example sources: EC2 instance start, CodeBuild Failre, S3, Trusted Advisor Can intercept any API call with CloudTrai integration Schedule or Cron (example: create an event every 4 hours) A JSON payload is created from the event and passed to a target… Compute: Lambda, Batch, ECS task Integration: SQS, SNS, Kinesis Data Streams, Kinesis Data Firehose Orchestration: Step functions, CodePipeline, CodeBuild Maintenance: SSM, EC2 Actions Amazon EventBridge EventBridge is the next evolution of CloudWatch Events Default Event Bus - generated by AWS services (CloudWatch Events) Partner Event Bus: receive events from SaaS service or applications (Zendesk, DataDog, Segment, Auth0…) Custom Event Buses: for your own applications Event Buses can be accessed by other AWS accounts You can archive events (all/filter) sent to an event bus (indefinitely or set period) Ability to replay archived events Rules: how to process the events (like couldwatch events) Amazon EvntBridge - Schema Registry EventBridge can analyze the events in your bus and infer the schema The Schema Registry allows you to generate code for your application, that will know in advance how data is structured in the event bus Schema can be versioned Amazon EventBridge – Resource-based Policy Manage permissions for a specific Event Bus Example: allow/deny events from another AWS account or AWS region Use case: aggregate all events from your AWS Organization in a single AWS account or AWS region Amazon EventBridge vs CloudWatch Events Amazon EventBridge builds upon and extends CloudWatch Events. It uses the same service API and endpoint, and the same undrlying service infrastructure EventBridge allows extension to add event buses for your custom applications and your third-party SaaS apps. Event Bridge has the Schema registry capability EventBridge has a different name to mark the new capabilities Over time, the CloudWatch Events name will be replaced with EventBridge AWS CloudTrail Provides governance, compliance and audit for your AWS Account CloudTrail is enabled by default! Get an history of events / API calls made within your AWS Account by: Console SDK CLI AWS Services Can put logs from CloudTrail into Cloud A trail can be applied to All Regions (default) or a single Region If a resource is deleted in AWS, investigate CloudTrail first! CloudTrail Diagram CloudTrail Events Management Events: Operations that are performed on resources in your AWS account Examples: Configuring security (IAM AttachRolePolicy) Configuring rules for routing data (Amazon EC2 CreateSubnet) Setting up logging (AWS CloudTrail CreateTrail) By default, trails are configured to log management events. Can separate Read Events (that don’t modify resources) from Write Events (that may modify resources) Data Events: By default, data events are not logged (because high volume operations) Amazon S3 object-level activity (ex: GetObject, DeleteObject, PutObject ): can separate Read and Write Events AWS Lambda function execution activity (the Invoke API) CloudTrail Insights Events See next slide CloudTrail Insights Enable CloudTrail Insights to detect unusual activity in your account: inaccurate resource provisioning hitting service limits Bursts of AWS IAM actions Gaps in periodic maintenance activity CloudTrail Insights analyzes normal management events to create a baseline And then continuously analyzes write events to detect unusual patterns Anomalies appear in the CloudTrail console Event is sent to Amazon S3 An EventBridge event is generated (for automation needs) CloudTrail Events Retention Events are stored for 90 days in CloudTrail To keep events beyond this period, log them to S3 and use Athena AWS Config Helps with auditing and recording compliance of your AWS resources Helps record configurations and changes over time Questions that can be solved by AWS Config: Is there unrestricted SSH access to my security groups? Do my buckets have any public access? How has my ALB configuration changed over time? You can receive alerts (SNS notifications) for any changes AWS Config is a per-region service Can be aggregated across regions and accounts Possibility of storing the configuration data into S3 (analyzed by Athena) Config Rules Can use AWS managed config rules (over 75) Can make custom config rules (must be defined in AWS Lambda) Ex: evaluate if each EBS disk is of type gp2 Ex: evaluate if each EC2 instance is t2.micro Rules can be evaluated / triggered: For each config change And / or: at regular time intervals AWS Config Rules does not prevent actions from happening (no deny) Pricing: no free tier, $0.003 per configuration item recorded per region, $0.001 per config rule evaluation per region AWS Config Resource View compliance of a resource over time View configuration of a resource over time View CloudTrail API calls of a resource over time Config Rules – Remediations Automate remediation of non-compliant resources using SSM Automation Documents Use AWS-Managed Automation Documents or create custom Automation Documents Tip: you can create custom Automation Documents that invokes Lambda function You can set Remediation Retries if the resource is still non-compliant after auto-remediation Config Rules – Notifications Use EventBridge to trigger notifications when AWS resources are non-compliant Ability to send configuration changes and compliance state notifications to SNS (all events – use SNS Filtering or filter at client-side) CloudWatch vs CloudTrail vs Config CloudWatch Performance monitoring (metrics, CPU, network, etc…) &amp; dashboards Events &amp; Alerting Log Aggregation &amp; Analysis CloudTrail Record API calls made within your Account by everyone Can define trails for specific resources Global Service Config Record configuration changes Evaluate resources against compliance rules Get timeline of changes and compliance For an Elastic Load Balancer CloudWatch: Monitoring Incoming connections metric Visualize error codes as % over time Make a dashboard to get an idea of your load balancer performance Config: Track security group rules for the Load Balancer Track configuration changes for the Load Balancer Ensure an SSL certificate is always assigned to the Load Balancer (compliance) CloudTrail: Track who made any changes to the Load Balancer with API calls AWS STS – Security Token Service Allows to grant limited and temporary access to AWS resources. Token is valid for up to one hour (must be refreshed) AssumeRole Within your own account: for enhanced security Cross Account Access: assume role in target account to perform actions there AssumeRoleWithSAML return credentials for users logged with SAML AssumeRoleWithWebIdentity return creds for users logged with an IdP (Facebook Login, Google Login, OIDC compatible…) AWS recommends against using this, and using Cognito instead GetSessionToken for MFA, from a user or AWS account root user Using STS to Assume a Role Define an IAM Role within your account or cross-account Define which principals can access this IAM Role Use AWS STS (Security Token Service) to retrieve credentials and impersonate the IAM Role you have access to (AssumeRole API) Temporary credentials can be valid between 15 minutes to 1 hour Cross account access with STS Identity Federation in AWS Federation lets users outside of AWS to assume temporary role for accessing AWS resources. These users assume identity provided access role. Federations can have many flavors: SAML 2.0 Custom Identity Broker Web Identity Federation with Amazon Cognito Web Identity Federation without Amazon Cognito Single Sign On Non-SAML with AWS Microsoft AD Using federation, you don’t need to create IAM users (user management is outside of AWS) SAML 2.0 Federation To integrate Active Directory / ADFS with AWS (or any SAML 2.0) Provides access to AWS Console or CLI (through temporary creds) No need to create an IAM user for each of your employees SAML 2.0 Federation – Active Directory FS Same process as with any SAML 2.0 compatible IdP SAML 2.0 Federation Needs to setup a trust between AWS IAM and SAML (both ways) SAML 2.0 enables web-based, cross domain SSO Uses the STS API: AssumeRoleWithSAML Note federation through SAML is the “old way” of doing things Amazon Single Sign On (SSO) Federation is the new managed and simpler way Read more here: https://aws.amazon.com/blogs/security/enabling-federation-to-aws-using-windows-active-directory-adfs-and-saml-2-0/ Custom Identity Broker Application Use only if identity provider is not compatible with SAML 2.0 The identity broker must determine the appropriate IAM policy Uses the STS API: AssumeRole or GetFederationToken Web Identity Federation – AssumeRoleWithWebIdentity Not recommended by AWS – use Cognito instead (allows for anonymous users, data synchronization, MFA) AWS Cognito Goal: Provide direct access to AWS Resources from the Client Side (mobile, web app) Example: provide (temporary) access to write to S3 bucket using Facebook Login Problem: We don’t want to create IAM users for our app users How: Log in to federated identity provider – or remain anonymous Get temporary AWS credentials back from the Federated Identity Pool These credentials come with a pre-defined IAM policy stating their permissions What is Microsoft Active Directory (AD)? Found on any Windows Server with AD Domain Services Database of objects: User Accounts, Computers, Printers, File Shares, Security Groups Centralized security management, create account, assign permissions Objects are organized in trees A group of trees is a forest AWS Directory Services AWS Managed Microsoft AD Create your own AD in AWS, manage users locally, supports MFA Establish “trust” connections with your on-premises AD AD Connector Directory Gateway (proxy) to redirect to on-premises AD, supports MFA Users are managed on the on-premises AD Simple AD AD-compatible managed directory on AWS Cannot be joined with on-premises AD AWS Organizations Global service Allows to manage multiple AWS accounts The main account is the master account – you can’t change it Other accounts are member accounts Member accounts can only be part of one organiztion Consolidated Billing across all accounts - single payment method Pricing benefits from aggregated usage (volume discount for EC2, S3…) API is available to automate AWS account creation Multi Account Strategies Create accounts per department, per cost center, per dev / test / prod, based on regulatory restrictions (using SCP), for better resource isolation (ex: VPC), to have separate per-account service limit, isolated account for logging Multi Account vs One Account Multi VPC Use tagging standards for billing purposes Enable CloudTrail on all accounts, send logs to central S3 account Send CloudWatch logs to central logging account Establish cross account roles for admin purposes Organizational Units (OU) - Examples AWS Organization Service Control Policies (SCP) Whitelist or blacklist IAM actions Applied at the OU or Account level Does not apply to the Master Account SCP is applied to all the Users and Roles of the Account, including Root user The SCP does not affect service-linked roles Service-linked roles enable other AWS services to integrate with AWS Organizations and can’t be restricted by SCPs. SCP must have an explicit Allow (does not allow anything by default) Use cases: Restrict access to certain services (for example: can’t use EMR) Enforce PCI compliance by explicitly disabling services SCP Hierarchy AWS Organization – Moving Accounts To migrate accounts from one organization to another Remove the member account from the old organization Send an invite to the new organiztion Accept the invite to the new organization from the member account If you want the master account of the old organization to also join the new organization, do the following: Remove the member accounts from the organizations using procedure above Delete the old organization Repeat the process above to invite the old master account to the new org IAM Conditions IAM for S3 ListBucket permission applies to arn:aws:s3:::test =&gt; bucket level permission GetObject, PutObject, DeleteObject applies to arn:awn:s3:::test/* =&gt; object level permission IAM Roles vs Resource Based Policies Attach a policy to a resource (example: S3 bucket policy) versus attaching of a using a role as a proxy IAM Roles vs Resource Based Policies When you assume a role (user, application or service), you give up your original permissions and take the permissions assigned to the role When using a resource based policy, the principal doesn’t have to give up his permissions Example: User in account A needs to scan a DynamoDB table in Account A and dump it in an S3 bucket in Account B Supported by: Amazon S3 buckets, SNS topics, SQS queues, etc… IAM Permission Boundaries IAM Permission Boundaries are supported for users and roles (not groups) Advanced feature to use a managed policy to set the maximum permissions an IAM entity can get. IAM Permission Boundaries Can be used in combinations of AWS Organizations SCP Use cases Delegate responsibilities to non administrators within their permission Allow developers to self-assign policies and manage their own permissions, while making sure they can’t escalate their privileges (= make themselves admin) Useful to restrict one specific user (instead of a whole account using Organizations &amp; SCP) IAM Policy Evaluation Logic Example IAM Policy Can you perform sqs:CreateQueue? Can you perform sqs:DeleteQueue? Can you perform ec2:DescribeInstances? AWS Resource Access Manager (RAM) Share AWS resources that you own with other AWS accounts Share with any account or within your Organization Avoid resource duplication! VPC Subnets: allow to have all the resources launched in the same subnets must be from the same AWS Organizations. Cannot share security groups and default VPC Participants can manage their own resources in there Participants can’t view, modify, delete resources that belong to other participants or the owner AWS Transit Gateway Route53 Resolver Rules License Manager Configurations Resource Access Manager – VPC example Each account… is responsible for its own resources cannot view, modify or delete other resources in other accounts Network is shared so… Anything deployed in the VPC can talk to other resources in the VPC Applications are accessed easily across accounts, using private IP! Security groups from other accounts can be referenced for maximum security AWS Single Sign-On (SSO) Centrally manage Single Sign-On to access multiple accounts and 3rd -party business applications. Integrated with AWS Organizations Supports SAML 2.0 markup Integration with on-premises Active Directory Centralized permission management Centralized a auditing with CloudTrail AWS Single Sign-On (SSO) – Setup with AD SSO – vs AssumeRoleWithSAML]]></summary></entry><entry><title type="html">AWS Machine Learning</title><link href="http://localhost:4000/posts/aws-machine-learning/" rel="alternate" type="text/html" title="AWS Machine Learning" /><published>2024-02-06T00:00:00+07:00</published><updated>2024-02-06T00:00:00+07:00</updated><id>http://localhost:4000/posts/aws-machine-learning</id><content type="html" xml:base="http://localhost:4000/posts/aws-machine-learning/"><![CDATA[<h1 id="machine-learning">Machine Learning</h1>
<h2 id="amazon-rekognition">Amazon Rekognition</h2>
<ul>
  <li>Find objects, people, text, scenes in images and videos using ML</li>
  <li>Facial analysis and facial search to do user verification, people counting</li>
  <li>Create a database of “familiar faces” or compare against celebrities</li>
  <li>Use case:
    <ul>
      <li>Labeling</li>
      <li>Content Moderation</li>
      <li>Text Detection</li>
      <li>Face Detection and Analysis (gender, age, range, emotions…)</li>
      <li>Face Search and Verification</li>
      <li>Celebrity Recognition</li>
      <li>Pathing (ex: for sports game analysis)
        <h2 id="amazon-transcribe">Amazon Transcribe</h2>
      </li>
    </ul>
  </li>
  <li>Automatic convert speech to text</li>
  <li>Uses a deep learning process called automatic speech recognition(ASR) to convert speech to text quickly and accurately</li>
  <li>Use cases:
    <ul>
      <li>Transcribe customer service calls</li>
      <li>automate closed caption and subtitling</li>
      <li>generate metadata for media assets to create a fully searchable archive
        <h2 id="amazon-polly">Amazon Polly</h2>
      </li>
    </ul>
  </li>
  <li>Turn text into lifelike speech using deep learning</li>
  <li>Allowing you to create application that talk
    <h2 id="amazon-translate">Amazon Translate</h2>
  </li>
  <li>Nature and accurate language translation</li>
  <li>Amazon Translate allows you to localize content - such as website and applications - for internation users, and to easily translate large volume of text efficiently
    <h2 id="amazon-lex--connect">Amazon Lex &amp; Connect</h2>
  </li>
  <li>Amazon Lex: (Same technology that powers Alexa)
    <ul>
      <li>Automatic Speech Recognition (ASR) to convert speech to text</li>
      <li>Natural Language Understanding to recognize the intent of text, callers</li>
      <li>Helps build chatbots, call center bots</li>
    </ul>
  </li>
  <li>Amazon Connect:
    <ul>
      <li>Receive calls, create contact flows, cloud-based virtual contact center</li>
      <li>Can integrate with  other CRM systems  or AWS</li>
      <li>No upfront payment, 80% cheaper than traditional contact center solutions
        <h2 id="amazon-comprehend">Amazon Comprehend</h2>
      </li>
    </ul>
  </li>
  <li>For Nature language Processing - NLP</li>
  <li>Fully managed and serverless service</li>
  <li>Uses machine learning to find insight and relationship in text
    <ul>
      <li>Language of the text</li>
      <li>Extracts key phrases, places, people, brands, or events</li>
      <li>Understanding how positive or negative the text is</li>
      <li>Analysis text using tokenization and parts of speech</li>
      <li>Automatically organizes a collection of text files by topic</li>
    </ul>
  </li>
  <li>Sample use cases:
    <ul>
      <li>analyze customer interaction (email) to find what leads to a positive or negative experience</li>
      <li>Create and groups articles by topics that Comprehend will uncover
        <h2 id="amazon-sagemaker">Amazon SageMaker</h2>
      </li>
    </ul>
  </li>
  <li>Fully managed service for developers / data scientists to build ML models</li>
  <li>Typically, difficult to do all the processes in one place + provision  servers</li>
  <li>Machine learning process (simplified):  predicting your exam score
    <h2 id="amazon-forecast">Amazon Forecast</h2>
  </li>
  <li>Fully managed service  that uses ML to deliver highly accurate  forecasts</li>
  <li>Example: predict the future sales of a raincoat</li>
  <li>50% more accurate than looking at the data itself</li>
  <li>Reduce forecasting time from months to hours</li>
  <li>Use cases: Product Demand Planning, Financial Planning, Resource Planning,…
    <h2 id="amazon-kendra">Amazon Kendra</h2>
  </li>
  <li>Fully managed document search service powered by Machine Learning</li>
  <li>Extract answer from within a document (text, pdf, HTML, MS Word, …)</li>
  <li>Natural language search capabilities</li>
  <li>Learn from user interactions/feedback tto promote preferred results (Incremental learning)</li>
  <li>Ability to manually fine-tune search results (importance of data, freshness, custom, …)
    <h2 id="amazon-personalize">Amazon Personalize</h2>
  </li>
  <li>Fully managed ML-service to build apps with real-time personalized recommendations</li>
  <li>Example: personalized product recommendations/re-ranking, customized direct marketing
    <ul>
      <li>Example: User bought gardening tools, provide recommendations on the next one tto buy</li>
    </ul>
  </li>
  <li>Same technology  used by Amazon.com</li>
  <li>Integrates into existing website, applications, SMS, email marketing systems,…</li>
  <li>Implement in days, ot months (you don’t need to build, train, and deploy ML solutions)</li>
  <li>Use cases retail stores, media, and entertainment…
    <h2 id="amazon-textract">Amazon Textract</h2>
  </li>
  <li>Automatically extract  text,  handwriting, and data from ay scanned document using AI ad ML</li>
  <li>Extract data from forms and tables</li>
  <li>Read and  process any type of documents (PDFs, images, …)</li>
  <li>Use cases:
    <ul>
      <li>Financial Service (e.g invoice, financial reports)</li>
      <li>Healthcare (e.g medical records, insurance claims)</li>
      <li>Public Sector (e.g tax forms, ID documents, passports)
        <h2 id="aws-machine-learning---summary">AWS Machine Learning - Summary</h2>
      </li>
    </ul>
  </li>
  <li>Rekognition: face detection, labeling, celebrity recognition</li>
  <li>Transcribe: audio to text</li>
  <li>Polly: text to audio</li>
  <li>Translate: translation</li>
  <li>Lex: build conversation bots - chatbots</li>
  <li>Connect: cloud contact  center</li>
  <li>Comprehend: natural language processing</li>
  <li>SageMaker: machine learning for every developer and data scientist</li>
  <li>Forecast: build highly accurate forecast</li>
  <li>Kendra: ML-powered search engine</li>
  <li>Personalize:  real-time personalized recommendation</li>
  <li>Textract: detect text and data in  documents</li>
</ul>]]></content><author><name>Hardwork đẹp trai</name></author><category term="Fullstack" /><category term="Architect" /><category term="AWS" /><category term="aws" /><category term="Rekognition" /><category term="Transcribe" /><category term="Polly" /><category term="Translate" /><category term="Lex&amp; Connect" /><category term="Comprehend" /><category term="Sage Maker" /><category term="Forecast" /><category term="Kendra" /><category term="Personalize" /><category term="Textract" /><summary type="html"><![CDATA[Machine Learning Amazon Rekognition Find objects, people, text, scenes in images and videos using ML Facial analysis and facial search to do user verification, people counting Create a database of “familiar faces” or compare against celebrities Use case: Labeling Content Moderation Text Detection Face Detection and Analysis (gender, age, range, emotions…) Face Search and Verification Celebrity Recognition Pathing (ex: for sports game analysis) Amazon Transcribe Automatic convert speech to text Uses a deep learning process called automatic speech recognition(ASR) to convert speech to text quickly and accurately Use cases: Transcribe customer service calls automate closed caption and subtitling generate metadata for media assets to create a fully searchable archive Amazon Polly Turn text into lifelike speech using deep learning Allowing you to create application that talk Amazon Translate Nature and accurate language translation Amazon Translate allows you to localize content - such as website and applications - for internation users, and to easily translate large volume of text efficiently Amazon Lex &amp; Connect Amazon Lex: (Same technology that powers Alexa) Automatic Speech Recognition (ASR) to convert speech to text Natural Language Understanding to recognize the intent of text, callers Helps build chatbots, call center bots Amazon Connect: Receive calls, create contact flows, cloud-based virtual contact center Can integrate with other CRM systems or AWS No upfront payment, 80% cheaper than traditional contact center solutions Amazon Comprehend For Nature language Processing - NLP Fully managed and serverless service Uses machine learning to find insight and relationship in text Language of the text Extracts key phrases, places, people, brands, or events Understanding how positive or negative the text is Analysis text using tokenization and parts of speech Automatically organizes a collection of text files by topic Sample use cases: analyze customer interaction (email) to find what leads to a positive or negative experience Create and groups articles by topics that Comprehend will uncover Amazon SageMaker Fully managed service for developers / data scientists to build ML models Typically, difficult to do all the processes in one place + provision servers Machine learning process (simplified): predicting your exam score Amazon Forecast Fully managed service that uses ML to deliver highly accurate forecasts Example: predict the future sales of a raincoat 50% more accurate than looking at the data itself Reduce forecasting time from months to hours Use cases: Product Demand Planning, Financial Planning, Resource Planning,… Amazon Kendra Fully managed document search service powered by Machine Learning Extract answer from within a document (text, pdf, HTML, MS Word, …) Natural language search capabilities Learn from user interactions/feedback tto promote preferred results (Incremental learning) Ability to manually fine-tune search results (importance of data, freshness, custom, …) Amazon Personalize Fully managed ML-service to build apps with real-time personalized recommendations Example: personalized product recommendations/re-ranking, customized direct marketing Example: User bought gardening tools, provide recommendations on the next one tto buy Same technology used by Amazon.com Integrates into existing website, applications, SMS, email marketing systems,… Implement in days, ot months (you don’t need to build, train, and deploy ML solutions) Use cases retail stores, media, and entertainment… Amazon Textract Automatically extract text, handwriting, and data from ay scanned document using AI ad ML Extract data from forms and tables Read and process any type of documents (PDFs, images, …) Use cases: Financial Service (e.g invoice, financial reports) Healthcare (e.g medical records, insurance claims) Public Sector (e.g tax forms, ID documents, passports) AWS Machine Learning - Summary Rekognition: face detection, labeling, celebrity recognition Transcribe: audio to text Polly: text to audio Translate: translation Lex: build conversation bots - chatbots Connect: cloud contact center Comprehend: natural language processing SageMaker: machine learning for every developer and data scientist Forecast: build highly accurate forecast Kendra: ML-powered search engine Personalize: real-time personalized recommendation Textract: detect text and data in documents]]></summary></entry><entry><title type="html">AWS Integration &amp;amp; Messaginng</title><link href="http://localhost:4000/posts/aws-integration-messaginng/" rel="alternate" type="text/html" title="AWS Integration &amp;amp; Messaginng" /><published>2024-02-06T00:00:00+07:00</published><updated>2024-02-06T00:00:00+07:00</updated><id>http://localhost:4000/posts/aws-integration-messaginng</id><content type="html" xml:base="http://localhost:4000/posts/aws-integration-messaginng/"><![CDATA[<h1 id="aws-integration--messaginng">AWS Integration &amp; Messaginng</h1>
<p>SQS, SNS &amp; Kinesis</p>
<ul>
  <li>When we start deploying multiple applications, they will inevitably need to communicate with one another</li>
  <li>There are two patterns of application communication
    <ul>
      <li>Synchromous communication (app to app)</li>
      <li>Asynchronous / Evenbased (app to queue to app)
        <h2 id="introdution">Introdution</h2>
      </li>
    </ul>
  </li>
  <li>Synchronnous between applications can be problematic if there are sudden spikes of traffic</li>
  <li>What if you need to suddenly encode 1000 videos but usually it’s 10?</li>
  <li>in that case, it better to decouple your applications,
    <ul>
      <li>SQS: queue model</li>
      <li>SNS: pub/sub model</li>
      <li>Kinesis: real-time streaming model</li>
    </ul>
  </li>
  <li>These services can scale independently from our application!
    <h2 id="amazon-sqs-whats-a-queue">Amazon SQS, What’s a queue?</h2>
    <p><img src="https://data.terabox.com/thumbnail/e19ff69d211fc1e51950db00c82dca33?fid=4401547290288-250528-572541249214972&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-LxKWvtxa2erWuhJObtVehWte5ts%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=100591921571805435&amp;dp-callid=0&amp;time=1667109600&amp;size=c1680_u1050&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" /></p>
    <h2 id="sqs---standard-queue">SQS - Standard queue</h2>
  </li>
  <li>Oldest offering (over 10 years old)</li>
  <li>Fully managed service, used to decouple applications</li>
  <li>Attributes:
    <ul>
      <li>unlimited throughput, unlimited number of messages in queue</li>
      <li>Default retention of message: 4 days, maxximum of 14 days</li>
      <li>Low latenccy (&lt; 10ms on publish and receive)</li>
      <li>Limitation of 256kb per message sent</li>
    </ul>
  </li>
  <li>Can have duplicate messages (at least once delivery, occasionally)</li>
  <li>Can have out of order messages (best effort ordering)
    <h2 id="sqs---product-messages">SQS - product messages</h2>
  </li>
  <li>Produced to SQS using the SDK (SendMessage API)</li>
  <li>The message is persited in SQS until consumer deletes it</li>
  <li>Message retention: default 4 days, upto 14days</li>
  <li>Example:
    <ul>
      <li>order id</li>
      <li>customer id</li>
      <li>any attributes you want</li>
    </ul>
  </li>
  <li>SQS standard: unlimited throughput
    <h2 id="sqs---consuming-messages">SQS - Consuming messages</h2>
  </li>
  <li>Consumes (running on EC2 instances, Servers, or AWS lambda)…</li>
  <li>Poll SQS for messages (receive up to 10 messages at a time)</li>
  <li>Process the messages (example: insert the message inyo an RDS database)</li>
  <li>Delete the messages using thhe deleteMessage API
    <h2 id="sqs---mutiple-ec2-innstances-consumers">SQS - Mutiple EC2 Innstances Consumers</h2>
  </li>
  <li>Consumers receive and process messages in parallel</li>
  <li>At least once delivery</li>
  <li>Best effort message ordering</li>
  <li>Consumers delete messages after processig them</li>
  <li>We can scale consumers horzontally to improve throughput of processing
    <h2 id="sqs-with-auto-scaling-group-asg">SQS with auto scaling group (ASG)</h2>
    <p><img src="https://data.terabox.com/thumbnail/60fc2bdc059922b8468ef20723f6a421?fid=4401547290288-250528-497477940432260&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-Nog0tlOFfrcPULlinQcUmAysrrs%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=102362295374213231&amp;dp-callid=0&amp;time=1667116800&amp;size=c1680_u1050&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" /></p>
    <h2 id="sqs-to-decouple-between-appliccation-tiers">SQS to decouple between appliccation tiers</h2>
    <p><img src="https://data.terabox.com/thumbnail/f80aa192a0a4dcfaa593961f079adb61?fid=4401547290288-250528-626847050172989&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-qMHNmkaZ9U%2bU7%2f%2bMan0PbbkXzV4%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=103471156007648684&amp;dp-callid=0&amp;time=1667120400&amp;size=c1680_u1050&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" /></p>
    <h2 id="amazon-sqs---security">Amazon SQS - Security</h2>
  </li>
  <li>Encryption
    <ul>
      <li>In-flight encryption using HTTPS API</li>
      <li>At rest encryption using KMS keys</li>
      <li>Client side encrytion if the client wants to perform encryptioon/decrytion itself</li>
    </ul>
  </li>
  <li>Access Controls: IAM policies too regulate access to SQS API</li>
  <li>SQS Access Policies (similiar to S3 bucket policies)
    <ul>
      <li>Useful for cross account access to SQS queues</li>
      <li>Useful for allowinng other services (SNS, S3…) to write to an SQS queue
        <h2 id="sqs-queue-access-policy">SQS Queue Access Policy</h2>
      </li>
    </ul>
  </li>
  <li>Cross Acccount Access</li>
  <li>Publish S3 Event Notifications to SQS Queue
    <h2 id="sqs-message-visiblity-timeout">SQS Message Visiblity Timeout</h2>
  </li>
  <li>After a message is polled by a consumer, it becomes invisible to other consumers</li>
  <li>By default, the “message visibility timeout” is 30 seconds</li>
  <li>That means the message has 30 seconnds to be processed</li>
  <li>After the message visibility timeout is over, the message is “visible” in SQS
<img src="https://data.terabox.com/thumbnail/f756fc00768fa969d676b2666a2d9de8?fid=4401547290288-250528-188833361974328&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-qcnvC0XfBAT35K3DEt7WJH5vSDY%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=132004244208837930&amp;dp-callid=0&amp;time=1667224800&amp;size=c1680_u1050&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" /></li>
  <li>If a message is not processed within the visibility timeout, it will be processed twice</li>
  <li>A consumer could call the ChangelMessageVisibility API tto get more time</li>
  <li>If visibility timeout is high (hours), and consumer crashes, re-processing will take ttime</li>
  <li>If visiblity ttimeouut is too low (seconds), we may get duplicates
<img src="https://data.terabox.com/thumbnail/d47c49082dec86f2e22da592a865975e?fid=4401547290288-250528-638498077057569&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-jdlltFCiGrHAJHxoyKhoPQyKWKE%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=132070613337514410&amp;dp-callid=0&amp;time=1667224800&amp;size=c1680_u1050&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
    <h2 id="amazon-sqs---dead-letter-queue">Amazon SQS - Dead Letter Queue</h2>
  </li>
  <li>If a consumer fails to process a message within the visibility timeout… the message goes back to the queue!</li>
  <li>We can set a threshold of how manny times a message can go back to the queue</li>
  <li>After tthe mmaximumreceivves tthreshold is exceeded, the message goes intto a dead lettter queue (DLQ)</li>
  <li>Userful for debugginng!</li>
  <li>Make sure to process the messages in the DLQ before they expire:
    <ul>
      <li>Good to sett a rettenttion oof 14days in the DLQ
<img src="https://data.terabox.com/thumbnail/4716a6d1bd945f1672018cecc0dc3c19?fid=4401547290288-250528-253963689416032&amp;rt=pr&amp;sign=FDTAER-DCb740ccc5511e5e8fedcff06b081203-V4lCvzDh%2byKWkokdmrzD%2fFpcPWE%3d&amp;expires=8h&amp;chkbd=0&amp;chkv=0&amp;dp-logid=132196486098997097&amp;dp-callid=0&amp;time=1667228400&amp;size=c1680_u1050&amp;quality=90&amp;vuk=4401547290288&amp;ft=image&amp;autopolicy=1" alt="" />
        <h2 id="sqs-dlq---redrive-to-source">SQS DLQ - Redrive to Source</h2>
      </li>
    </ul>
  </li>
  <li>Feature to help consume messages in the DLQ to understand what is wrong with them.</li>
  <li>When our code is fixed, we can redrive the messages from the DLQ backk into the source queue (or any otther queue) inn batches without writing custtom code
    <h2 id="amazon-sqs---delay-queue">Amazon SQS - Delay Queue</h2>
  </li>
  <li>Delay a message (consummers don’t see it immediately) up to 15 minuttes</li>
  <li>Defaultt is 0 secconnds (message is available rightt away)</li>
  <li>Can set a defaultt at queue level</li>
  <li>Can override tthe defaultt o sennd using the DelaySecccond parameters
    <h2 id="amazon-sqs---long-polling">Amazon SQS - Long Polling</h2>
  </li>
  <li>When a consumer requests messages from the queue, it can optioally “wait” for messages to arrive if tthere are nonne in the queue</li>
  <li>This is called long pollinng</li>
  <li>LongPolling dereases the nuumber of API calls made tto SQS while increasign tthe efficiency and reduinng lattenccy of your applicationn</li>
  <li>The wait time can be between 1 se tto 20 sec (20 sec preferable)</li>
  <li>Lonng polling is preferable to short polling</li>
  <li>long polling level using waittimeseconnds</li>
</ul>]]></content><author><name>Hardwork đẹp trai</name></author><category term="Fullstack" /><category term="Blogging" /><category term="AWS" /><category term="sqs" /><category term="SQS" /><category term="Queue" /><category term="Long Polling" /><category term="decouple" /><summary type="html"><![CDATA[AWS Integration &amp; Messaginng SQS, SNS &amp; Kinesis When we start deploying multiple applications, they will inevitably need to communicate with one another There are two patterns of application communication Synchromous communication (app to app) Asynchronous / Evenbased (app to queue to app) Introdution Synchronnous between applications can be problematic if there are sudden spikes of traffic What if you need to suddenly encode 1000 videos but usually it’s 10? in that case, it better to decouple your applications, SQS: queue model SNS: pub/sub model Kinesis: real-time streaming model These services can scale independently from our application! Amazon SQS, What’s a queue? SQS - Standard queue Oldest offering (over 10 years old) Fully managed service, used to decouple applications Attributes: unlimited throughput, unlimited number of messages in queue Default retention of message: 4 days, maxximum of 14 days Low latenccy (&lt; 10ms on publish and receive) Limitation of 256kb per message sent Can have duplicate messages (at least once delivery, occasionally) Can have out of order messages (best effort ordering) SQS - product messages Produced to SQS using the SDK (SendMessage API) The message is persited in SQS until consumer deletes it Message retention: default 4 days, upto 14days Example: order id customer id any attributes you want SQS standard: unlimited throughput SQS - Consuming messages Consumes (running on EC2 instances, Servers, or AWS lambda)… Poll SQS for messages (receive up to 10 messages at a time) Process the messages (example: insert the message inyo an RDS database) Delete the messages using thhe deleteMessage API SQS - Mutiple EC2 Innstances Consumers Consumers receive and process messages in parallel At least once delivery Best effort message ordering Consumers delete messages after processig them We can scale consumers horzontally to improve throughput of processing SQS with auto scaling group (ASG) SQS to decouple between appliccation tiers Amazon SQS - Security Encryption In-flight encryption using HTTPS API At rest encryption using KMS keys Client side encrytion if the client wants to perform encryptioon/decrytion itself Access Controls: IAM policies too regulate access to SQS API SQS Access Policies (similiar to S3 bucket policies) Useful for cross account access to SQS queues Useful for allowinng other services (SNS, S3…) to write to an SQS queue SQS Queue Access Policy Cross Acccount Access Publish S3 Event Notifications to SQS Queue SQS Message Visiblity Timeout After a message is polled by a consumer, it becomes invisible to other consumers By default, the “message visibility timeout” is 30 seconds That means the message has 30 seconnds to be processed After the message visibility timeout is over, the message is “visible” in SQS If a message is not processed within the visibility timeout, it will be processed twice A consumer could call the ChangelMessageVisibility API tto get more time If visibility timeout is high (hours), and consumer crashes, re-processing will take ttime If visiblity ttimeouut is too low (seconds), we may get duplicates Amazon SQS - Dead Letter Queue If a consumer fails to process a message within the visibility timeout… the message goes back to the queue! We can set a threshold of how manny times a message can go back to the queue After tthe mmaximumreceivves tthreshold is exceeded, the message goes intto a dead lettter queue (DLQ) Userful for debugginng! Make sure to process the messages in the DLQ before they expire: Good to sett a rettenttion oof 14days in the DLQ SQS DLQ - Redrive to Source Feature to help consume messages in the DLQ to understand what is wrong with them. When our code is fixed, we can redrive the messages from the DLQ backk into the source queue (or any otther queue) inn batches without writing custtom code Amazon SQS - Delay Queue Delay a message (consummers don’t see it immediately) up to 15 minuttes Defaultt is 0 secconnds (message is available rightt away) Can set a defaultt at queue level Can override tthe defaultt o sennd using the DelaySecccond parameters Amazon SQS - Long Polling When a consumer requests messages from the queue, it can optioally “wait” for messages to arrive if tthere are nonne in the queue This is called long pollinng LongPolling dereases the nuumber of API calls made tto SQS while increasign tthe efficiency and reduinng lattenccy of your applicationn The wait time can be between 1 se tto 20 sec (20 sec preferable) Lonng polling is preferable to short polling long polling level using waittimeseconnds]]></summary></entry><entry><title type="html">AWS DNS</title><link href="http://localhost:4000/posts/aws-dns/" rel="alternate" type="text/html" title="AWS DNS" /><published>2024-02-06T00:00:00+07:00</published><updated>2024-02-06T00:00:00+07:00</updated><id>http://localhost:4000/posts/aws-dns</id><content type="html" xml:base="http://localhost:4000/posts/aws-dns/"><![CDATA[<h1 id="aws-dns">AWS DNS</h1>
<ul>
  <li>DNS is a discovery service</li>
  <li>Translate machine into human and vice versa</li>
  <li>wwww.amazon.com =&gt; 104.98.34.131</li>
  <li>it’s huge and has to be distributed</li>
  <li>4294967296 IPv4
    <h2 id="dns-zone">DNS Zone</h2>
  </li>
  <li>Webserver resolve</li>
  <li>DNS client -&gt; your laptop</li>
  <li>Resolver =&gt; software on your device, or a server which queries DNS on your behalf</li>
  <li>Zone =&gt; A part of the DNS database</li>
  <li>Zonefile =&gt; physical database for a zone</li>
  <li>Nameserver =&gt; where zonfiles are hosted</li>
  <li>
    <table>
      <tbody>
        <tr>
          <td>DNS ROOT &amp; ROOT ZONE</td>
          <td>DNS Root</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>IANA: The global coordination of the DNS Root, IP addressing, and other Internet protocol resources is performed as the Internet Assigned Numbers Authority (IANA) functions.</li>
  <li>Root Zone Database: The Root Zone Database represents the delegation details of top-level domains, including gTLDs such as .com, and country-code TLDs such as .uk. As the manager of the DNS root zone, we are responsible for coordinating these delegations in accordance with our policies and procedures.</li>
  <li>root zone , root IANA</li>
  <li>DNS resolution : Walking the tree</li>
  <li>Root Hints =&gt; config points at the root servers IPs and addresses</li>
  <li>Root Server =&gt; hosts the DNS root zone</li>
  <li>Root Zone =&gt; points at TLD authoritative servers</li>
  <li>gTLD =&gt; generic top level domain (.com .org)</li>
  <li>ccTLD =&gt; country code top level domain (.uk .eu)
    <h2 id="route53">Route53</h2>
    <ol>
      <li>Register Domain</li>
      <li>Host Zones.. managed nameservers</li>
      <li>Global servicce … single database</li>
      <li>Globally resilient</li>
    </ol>
  </li>
  <li>create zonefile also allocated service</li>
  <li>Hosted on four managed name servers</li>
  <li>can be public</li>
  <li>or private .. linked to VPC(s)</li>
  <li>…stores records (recordsets)</li>
</ul>]]></content><author><name>Hardwork đẹp trai</name></author><category term="Fullstack" /><category term="Architect" /><category term="AWS" /><category term="aws" /><category term="dns" /><category term="route53" /><category term="aws zone" /><summary type="html"><![CDATA[AWS DNS DNS is a discovery service Translate machine into human and vice versa wwww.amazon.com =&gt; 104.98.34.131 it’s huge and has to be distributed 4294967296 IPv4 DNS Zone Webserver resolve DNS client -&gt; your laptop Resolver =&gt; software on your device, or a server which queries DNS on your behalf Zone =&gt; A part of the DNS database Zonefile =&gt; physical database for a zone Nameserver =&gt; where zonfiles are hosted DNS ROOT &amp; ROOT ZONE DNS Root IANA: The global coordination of the DNS Root, IP addressing, and other Internet protocol resources is performed as the Internet Assigned Numbers Authority (IANA) functions. Root Zone Database: The Root Zone Database represents the delegation details of top-level domains, including gTLDs such as .com, and country-code TLDs such as .uk. As the manager of the DNS root zone, we are responsible for coordinating these delegations in accordance with our policies and procedures. root zone , root IANA DNS resolution : Walking the tree Root Hints =&gt; config points at the root servers IPs and addresses Root Server =&gt; hosts the DNS root zone Root Zone =&gt; points at TLD authoritative servers gTLD =&gt; generic top level domain (.com .org) ccTLD =&gt; country code top level domain (.uk .eu) Route53 Register Domain Host Zones.. managed nameservers Global servicce … single database Globally resilient create zonefile also allocated service Hosted on four managed name servers can be public or private .. linked to VPC(s) …stores records (recordsets)]]></summary></entry></feed>